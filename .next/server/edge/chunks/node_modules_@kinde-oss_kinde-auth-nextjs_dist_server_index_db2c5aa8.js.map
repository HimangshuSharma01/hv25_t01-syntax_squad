{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/node_modules/.pnpm/node_modules/tslib/tslib.es6.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/removeTrailingSlash.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/config/index.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/version.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/isAppRouter.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/constants.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/splitString.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/sessionManager.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/jwt/validation.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/getAccessToken.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/redirectOnExpiredToken.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getAccessToken.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/kindeServerClient.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getFlag.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getBooleanFlag.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/getIdToken.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getIdToken.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getIntegerFlag.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/generateOrganizationObject.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getOrganization.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getPermission.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getPermissions.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getStringFlag.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/generateUserObject.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getUser.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getUserOrganizations.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/isAuthenticated.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getAccessTokenRaw.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getIdTokenRaw.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getRoles.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/getClaim.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/session/index.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/cookies/getSplitSerializedCookies.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/authMiddleware/authMiddleware.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/copyCookiesToRequest.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/components/RegisterLink.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/components/LoginLink.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/components/LogoutLink.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/components/CreateOrgLink.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/api-client.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/validateState.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/isPreFetch.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/utils/getHeaders.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/health.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/routerClients/RouterClient.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/routerClients/AppRouterClient.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/routerClients/PagesRouterClient.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/auth.js","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/createOrg.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/register.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/setup.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/login.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/logout.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/callback.ts","turbopack:///[project]/node_modules/@kinde-oss/kinde-auth-nextjs/src/handlers/protect.js"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","export function removeTrailingSlash(url) {\n  if (url === undefined || url === null) return undefined;\n\n  url = url.trim();\n\n  if (url.endsWith(\"/\")) {\n    url = url.slice(0, -1);\n  }\n\n  return url;\n}\n","import { version } from \"../utils/version\";\nimport { removeTrailingSlash } from \"../utils/removeTrailingSlash\";\n\n/**\n * @type {import('../../types').KindeState}\n */\nconst initialState = {\n  accessToken: null,\n  idToken: null,\n  isAuthenticated: false,\n  isLoading: true,\n  organization: null,\n  permissions: [],\n  user: null,\n  userOrganizations: [],\n  getAccessToken: () => null,\n  getBooleanFlag: () => null,\n  getClaim: () => null,\n  getFlag: () => null,\n  getIdToken: () => null,\n  getIntegerFlag: () => null,\n  getOrganization: () => null,\n  getPermission: () => null,\n  getPermissions: () => [],\n  getStringFlag: () => null,\n  getToken: () => null,\n  getUser: () => null,\n  getUserOrganizations: () => null,\n  refreshData: () => null,\n};\n\nconst SESSION_PREFIX = \"pkce-verifier\";\n\nconst KINDE_SITE_URL = removeTrailingSlash(process.env.KINDE_SITE_URL);\n\nconst KINDE_POST_LOGIN_ALLOWED_URL_REGEX =\n  process.env.KINDE_POST_LOGIN_ALLOWED_URL_REGEX;\n\n// We need to use NEXT_PUBLIC for frontend vars\nconst KINDE_AUTH_API_PATH =\n  removeTrailingSlash(process.env.NEXT_PUBLIC_KINDE_AUTH_API_PATH) ||\n  removeTrailingSlash(process.env.KINDE_AUTH_API_PATH) ||\n  \"/api/auth\";\n\nconst KINDE_POST_LOGIN_REDIRECT_URL =\n  removeTrailingSlash(process.env.KINDE_POST_LOGIN_REDIRECT_URL) ||\n  removeTrailingSlash(process.env.KINDE_POST_LOGIN_URL_REDIRECT_URL);\nconst KINDE_POST_LOGOUT_REDIRECT_URL = removeTrailingSlash(\n  process.env.KINDE_POST_LOGOUT_REDIRECT_URL,\n);\n\nconst KINDE_ISSUER_URL = removeTrailingSlash(process.env.KINDE_ISSUER_URL);\nconst KINDE_CLIENT_ID = process.env.KINDE_CLIENT_ID;\nconst KINDE_CLIENT_SECRET = process.env.KINDE_CLIENT_SECRET;\nconst KINDE_AUDIENCE = process.env.KINDE_AUDIENCE;\nconst KINDE_COOKIE_DOMAIN = removeTrailingSlash(\n  process.env.KINDE_COOKIE_DOMAIN,\n);\nconst KINDE_SCOPE = process.env.KINDE_SCOPE || \"openid profile email offline\";\n\nconst isDebugMode = process.env.KINDE_DEBUG_MODE === \"true\";\n\ntype Config = {\n  isDebugMode: boolean;\n  apiPath: string;\n  initialState: any; // TODO: Fix this type\n  SESSION_PREFIX: string;\n  redirectURL: string;\n  postLoginRedirectURL: string;\n  postLoginAllowedURLRegex: string;\n  issuerURL: string;\n  clientID: string;\n  clientSecret: string;\n  postLogoutRedirectURL: string;\n  audience: string[] | \"\";\n  cookieDomain: string;\n  responseType: \"code\";\n  codeChallengeMethod: \"S256\";\n  redirectRoutes: {\n    callback: string;\n  };\n  issuerRoutes: {\n    logout: \"/logout\";\n    login: \"/oauth2/auth\";\n    register: \"/oauth2/auth\";\n    token: \"/oauth2/token\";\n    profile: \"/oauth2/v2/user_profile\";\n  };\n  clientOptions: {\n    audience: string[] | \"\";\n    authDomain: string;\n    clientId: string;\n    clientSecret: string;\n    logoutRedirectURL: string;\n    redirectURL: string;\n    frameworkVersion: string;\n    scope: string;\n  };\n  grantType: \"AUTHORIZATION_CODE\";\n};\n\nexport const config: Config = {\n  isDebugMode,\n  apiPath: KINDE_AUTH_API_PATH,\n  initialState,\n  SESSION_PREFIX,\n  redirectURL: KINDE_SITE_URL,\n  postLoginRedirectURL: KINDE_POST_LOGIN_REDIRECT_URL,\n  postLoginAllowedURLRegex: KINDE_POST_LOGIN_ALLOWED_URL_REGEX,\n  issuerURL: KINDE_ISSUER_URL,\n  clientID: KINDE_CLIENT_ID,\n  clientSecret: KINDE_CLIENT_SECRET,\n  postLogoutRedirectURL: KINDE_POST_LOGOUT_REDIRECT_URL,\n  audience: KINDE_AUDIENCE ? KINDE_AUDIENCE.split(\" \") : \"\",\n  cookieDomain: KINDE_COOKIE_DOMAIN,\n  responseType: \"code\",\n  codeChallengeMethod: \"S256\",\n  redirectRoutes: {\n    callback: `${KINDE_AUTH_API_PATH}/kinde_callback`,\n  },\n  issuerRoutes: {\n    logout: \"/logout\",\n    login: \"/oauth2/auth\",\n    register: \"/oauth2/auth\",\n    token: \"/oauth2/token\",\n    profile: \"/oauth2/v2/user_profile\",\n  },\n  clientOptions: {\n    audience: KINDE_AUDIENCE ? KINDE_AUDIENCE.split(\" \") : \"\",\n    authDomain: KINDE_ISSUER_URL || \"\",\n    clientId: KINDE_CLIENT_ID || \"\",\n    clientSecret: KINDE_CLIENT_SECRET || \"\",\n    logoutRedirectURL: KINDE_POST_LOGOUT_REDIRECT_URL || \"\",\n    redirectURL: `${KINDE_SITE_URL}${KINDE_AUTH_API_PATH}/kinde_callback`,\n    frameworkVersion: version,\n    scope: KINDE_SCOPE,\n  },\n  grantType: \"AUTHORIZATION_CODE\",\n};\n\nconst validateRoute = (route: string): string | null => {\n  return route && /^[a-zA-Z0-9_-]+$/.test(route) ? route : null;\n};\n\nexport const routes: {\n  login: string;\n  logout: string;\n  register: string;\n  createOrg: string;\n  health: string;\n  setup: string;\n} = {\n  login: validateRoute(process.env.KINDE_AUTH_LOGIN_ROUTE) || \"login\",\n  logout: validateRoute(process.env.KINDE_AUTH_LOGOUT_ROUTE) || \"logout\",\n  register: validateRoute(process.env.KINDE_AUTH_REGISTER_ROUTE) || \"register\",\n  createOrg:\n    validateRoute(process.env.KINDE_AUTH_CREATEORG_ROUTE) || \"create_org\",\n  health: validateRoute(process.env.KINDE_AUTH_HEALTH_ROUTE) || \"health\",\n  setup: validateRoute(process.env.KINDE_AUTH_SETUP_ROUTE) || \"setup\",\n};\n","// Generated by genversion.\nexport const version = '2.5.6'\n","export const isAppRouter = (req) => {\n  return req instanceof Request;\n};\n","import { ResponseCookie } from \"next/dist/compiled/@edge-runtime/cookies\";\n\nexport const TWENTY_NINE_DAYS = 2505600;\n\nexport const GLOBAL_COOKIE_OPTIONS: Partial<ResponseCookie> = {\n  sameSite: \"lax\",\n  httpOnly: true,\n  secure: process.env.NODE_ENV === \"production\",\n  path: \"/\",\n};\n\nexport const COOKIE_LIST = [\n  \"ac-state-key\",\n  \"id_token_payload\",\n  \"id_token\",\n  \"access_token_payload\",\n  \"access_token\",\n  \"user\",\n  \"refresh_token\",\n  \"post_login_redirect_url\",\n];\n\nexport const MAX_COOKIE_LENGTH = 3000;\n","export const splitString = (str: string, length: number): string[] => {\n  if (length <= 0) {\n    return [];\n  }\n  return str.match(new RegExp(`.{1,${length}}`, \"g\")) || [];\n};\n","import { cookies } from \"next/headers\";\nimport { isAppRouter } from \"../utils/isAppRouter\";\nimport { config } from \"../config/index\";\nimport {\n  TWENTY_NINE_DAYS,\n  MAX_COOKIE_LENGTH,\n  GLOBAL_COOKIE_OPTIONS,\n  COOKIE_LIST,\n} from \"../utils/constants\";\nimport { splitString } from \"../utils/splitString\";\nimport * as cookie from \"cookie\";\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse | import('next').NextResponse} [res]\n * @returns {Promise<import('@kinde-oss/kinde-typescript-sdk').SessionManager>}\n */\nexport const sessionManager = async (req, res) => {\n  try {\n    if (!req) {\n      const cookieStore = await cookies();\n      return appRouterSessionManager(cookieStore);\n    }\n\n    if (isAppRouter(req)) {\n      const cookieStore = await cookies(req, res);\n      return appRouterSessionManager(cookieStore);\n    } else {\n      return pageRouterSessionManager(req, res);\n    }\n  } catch (error) {\n    throw error;\n  }\n};\n\n/**\n *\n * @param {import(\"next/dist/server/web/spec-extension/adapters/request-cookies\").ReadonlyRequestCookies} cookieStore\n * @returns {import('@kinde-oss/kinde-typescript-sdk').SessionManager}\n */\nexport const appRouterSessionManager = (cookieStore) => ({\n  /**\n   *\n   * @param {string} itemKey\n   * @returns {Promise<string | object | null>}\n   */\n  getSessionItem: (itemKey) => {\n    const item = cookieStore.get(itemKey);\n    if (!item) return null;\n    try {\n      let itemValue = \"\";\n      let index = 0;\n      let key = `${String(itemKey)}${index === 0 ? \"\" : index}`;\n      while (cookieStore.has(key)) {\n        itemValue += cookieStore.get(key).value;\n        index++;\n        key = `${String(itemKey)}${index === 0 ? \"\" : index}`;\n      }\n      try {\n        const jsonValue = JSON.parse(itemValue);\n        if (typeof jsonValue === \"object\") {\n          return jsonValue;\n        }\n      } catch (err) {}\n      return itemValue;\n    } catch (error) {\n      if (config.isDebugMode)\n        console.error(\"Failed to parse session item app router:\", error);\n      return item.value;\n    }\n  },\n  /**\n   *\n   * @param {string} itemKey\n   * @param {any} itemValue\n   * @returns {Promise<void>}\n   */\n  setSessionItem: (itemKey, itemValue) => {\n    cookieStore\n      .getAll()\n      .map((c) => c.name)\n      .forEach((key) => {\n        if (key.startsWith(`${String(itemKey)}`)) {\n          cookieStore.delete(key);\n        }\n      });\n    if (itemValue !== undefined) {\n      const itemValueString =\n        typeof itemValue === \"object\" ? JSON.stringify(itemValue) : itemValue;\n      splitString(itemValueString, MAX_COOKIE_LENGTH).forEach(\n        (value, index) => {\n          cookieStore.set(itemKey + (index === 0 ? \"\" : index), value, {\n            maxAge: TWENTY_NINE_DAYS,\n            domain: config.cookieDomain ? config.cookieDomain : undefined,\n            ...GLOBAL_COOKIE_OPTIONS,\n          });\n        },\n      );\n    }\n  },\n  /**\n   *\n   * @param {string} itemKey\n   * @returns {Promise<void>}\n   */\n  removeSessionItem: (itemKey) => {\n    cookieStore\n      .getAll()\n      .map((c) => c.name)\n      .forEach((key) => {\n        if (key.startsWith(`${String(itemKey)}`)) {\n          cookieStore.delete(key);\n        }\n      });\n  },\n  /**\n   * @returns {Promise<void>}\n   */\n  destroySession: () => {\n    cookieStore\n      .getAll()\n      .map((c) => c.name)\n      .forEach((key) => {\n        if (COOKIE_LIST.some((substr) => key.startsWith(substr))) {\n          cookieStore.set(key, \"\", {\n            domain: config.cookieDomain ? config.cookieDomain : undefined,\n            maxAge: 0,\n            ...GLOBAL_COOKIE_OPTIONS,\n          });\n        }\n      });\n  },\n});\n\n/**\n *\n * @param {import('next/types').NextApiRequest} req\n * @param {import('next').NextApiResponse} [res]\n * @returns {import('@kinde-oss/kinde-typescript-sdk').SessionManager}\n */\nexport const pageRouterSessionManager = (req, res) => {\n  return {\n    /**\n     *\n     * @param {string} itemKey\n     * @returns {Promise<string | undefined>}\n     */\n    getSessionItem: (itemKey) => {\n      const itemValue = req.cookies[itemKey];\n      if (!itemValue) return undefined;\n      try {\n        let itemValueString = \"\";\n        let index = 0;\n        let key = `${String(itemKey)}${index === 0 ? \"\" : index}`;\n        while (req.cookies[key]) {\n          itemValueString += req.cookies[key];\n          index++;\n          key = `${String(itemKey)}${index === 0 ? \"\" : index}`;\n        }\n        try {\n          const jsonValue = JSON.parse(itemValueString);\n          if (typeof jsonValue === \"object\") {\n            return jsonValue;\n          }\n        } catch (err) {\n          if (config.isDebugMode)\n            console.error(\"Failed to parse session item:\", err);\n        }\n        return itemValueString;\n      } catch (error) {\n        if (config.isDebugMode)\n          console.error(\"Failed to read session item:\", error);\n        return itemValue;\n      }\n    },\n\n    /**\n     *\n     * @param {string} itemKey\n     * @param {any} itemValue\n     * @returns {Promise<void>}\n     */\n    setSessionItem: (itemKey, itemValue) => {\n      let cookies = res?.getHeader(\"Set-Cookie\") || [];\n\n      if (!Array.isArray(cookies)) {\n        cookies = [cookies.toString()];\n      }\n\n      if (req.cookies[itemKey] !== undefined) {\n        cookies.push(\n          cookie.serialize(itemKey, \"\", {\n            domain: config.cookieDomain ? config.cookieDomain : undefined,\n            maxAge: -1,\n            ...GLOBAL_COOKIE_OPTIONS,\n          }),\n        );\n      }\n\n      if (itemValue !== undefined) {\n        const itemValueString =\n          typeof itemValue === \"object\" ? JSON.stringify(itemValue) : itemValue;\n\n        res?.setHeader(\n          \"Set-Cookie\",\n          [\n            ...(cookies.filter((cookie) => !cookie.startsWith(`${itemKey}`)) ||\n              []),\n            ...splitString(itemValueString, MAX_COOKIE_LENGTH).map(\n              (value, index) => {\n                return cookie.serialize(\n                  itemKey + (index === 0 ? \"\" : index),\n                  value,\n                  {\n                    domain: config.cookieDomain\n                      ? config.cookieDomain\n                      : undefined,\n                    ...GLOBAL_COOKIE_OPTIONS,\n                    maxAge: TWENTY_NINE_DAYS,\n                  },\n                );\n              },\n            ),\n          ],\n          {\n            domain: config.cookieDomain ? config.cookieDomain : undefined,\n            ...GLOBAL_COOKIE_OPTIONS,\n            maxAge: TWENTY_NINE_DAYS,\n          },\n        );\n      }\n    },\n    /**\n     *\n     * @param {string} itemKey\n     * @returns {Promise<void>}\n     */\n    removeSessionItem: (itemKey) => {\n      let cookies = res?.getHeader(\"Set-Cookie\") || [];\n      if (!Array.isArray(cookies)) {\n        cookies = [cookies.toString()];\n      }\n\n      if (req.cookies[itemKey] !== undefined) {\n        cookies.push(\n          cookie.serialize(itemKey, \"\", {\n            domain: config.cookieDomain ? config.cookieDomain : undefined,\n            maxAge: -1,\n            ...GLOBAL_COOKIE_OPTIONS,\n          }),\n        );\n      }\n\n      res?.setHeader(\"Set-Cookie\", [\n        ...cookies.map((c) => {\n          if (c.startsWith(`${itemKey}`)) {\n            return cookie.serialize(c.split(\"=\")[0], \"\", {\n              domain: config.cookieDomain ? config.cookieDomain : undefined,\n              maxAge: -1,\n              ...GLOBAL_COOKIE_OPTIONS,\n            });\n          } else {\n            return c;\n          }\n        }),\n      ]);\n    },\n\n    destroySession: () => {\n      let cookies = res?.getHeader(\"Set-Cookie\") || [];\n      if (!Array.isArray(cookies)) {\n        cookies = [cookies.toString()];\n      }\n\n      res?.setHeader(\"Set-Cookie\", [\n        ...Object.keys(req.cookies).map((c) => {\n          if (COOKIE_LIST.some((substr) => c.startsWith(substr))) {\n            return cookie.serialize(c.split(\"=\")[0], \"\", {\n              domain: config.cookieDomain ? config.cookieDomain : undefined,\n              maxAge: -1,\n              ...GLOBAL_COOKIE_OPTIONS,\n            });\n          }\n        }),\n      ]);\n    },\n  };\n};\n","import { validateToken as jwtValidator } from \"@kinde/jwt-validator\";\nimport { config } from \"../../config\";\nimport { jwtDecoder } from \"@kinde/jwt-decoder\";\n\n// currently assumes that the token is valid\n// .. should we revalidate here as well? seems redundant\nexport const isTokenExpired = (token: string) => {\n  const decodedToken = jwtDecoder(token);\n\n  if (!decodedToken?.exp) {\n    return true;\n  }\n\n  return decodedToken.exp && decodedToken.exp < Date.now() / 1000;\n};\n\nexport const validateToken = async ({\n  token,\n}: {\n  token: string;\n}): Promise<boolean> => {\n  if (!token || typeof token !== \"string\") {\n    if (config.isDebugMode) {\n      console.error(\"validateToken: invalid token or token is missing\");\n    }\n    return false;\n  }\n  const validationResult = await jwtValidator({\n    token,\n    domain: config.issuerURL,\n  });\n\n  if (!validationResult.valid) {\n    if (config.isDebugMode) {\n      console.error(\"validateToken: invalid token\");\n    }\n    return false;\n  }\n\n  const decodedToken = jwtDecoder(token);\n\n  if (config.isDebugMode) {\n    console.log(\n      `validateToken: token is valid - it will expire in ${decodedToken.exp - Date.now() / 1000} seconds`,\n    );\n  }\n\n  if (decodedToken.iss !== config.issuerURL) {\n    if (config.isDebugMode) {\n      console.error(\"validateToken: invalid issuer\");\n    }\n    return false;\n  }\n\n  return true;\n};\n","import { config } from \"../config\";\nimport { sessionManager } from \"../session/sessionManager\";\nimport { NextApiRequest, NextApiResponse } from \"next\";\nimport { validateToken } from \"./jwt/validation\";\nimport { NextResponse } from \"next/server\";\n\nexport const getAccessToken = async (\n  req: NextApiRequest,\n  res?: NextApiResponse | NextResponse,\n) => {\n  try {\n    const session = await sessionManager(req, res);\n    const token = await session.getSessionItem(\"access_token\");\n\n    if (!token || typeof token !== \"string\") {\n      if (config.isDebugMode) {\n        console.warn(\n          \"getAccessToken: invalid token or token is missing (are you logged in?)\",\n        );\n      }\n      return null;\n    }\n\n    const isTokenValid = await validateToken({\n      token,\n    });\n\n    if (!isTokenValid) {\n      if (config.isDebugMode) {\n        console.error(\"getAccessToken: invalid token\");\n      }\n      return null;\n    }\n    return token;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\"getAccessToken\", error);\n    }\n    return null;\n  }\n};\n","import { redirect } from \"next/navigation\";\nimport { isTokenExpired } from \"./jwt/validation\";\nimport { config, routes } from \"../config\";\n\n// This exists solely to solve an edge case where users\n// who may have an expired token are viewing a page that uses\n// authenticated functions on a route *not* protected by their middleware\n// In this case, we want to redirect them to login, but we don't want to\n// redirect them if they don't have a token, as this would inadvertently\n// protect pages that may just be checking authentication status\n//\n// This is very much an edge case though - in general, all routes should be protected by middleware\n//\n// TODO: This is a temporary solution, long-term this would be much better\n// off living inside getKindeServerSession, but we'd need to make getKindeServerSession async (breaking)\nexport const redirectOnExpiredToken = (token: string | null) => {\n  if (config.isDebugMode) {\n    console.log(\"redirectOnExpiredToken: checking for expired token\");\n  }\n  if (!token) {\n    if (config.isDebugMode) {\n      console.log(\"redirectOnExpiredToken: no token, not redirecting\");\n    }\n    return;\n  }\n  if (!isTokenExpired(token)) {\n    if (config.isDebugMode) {\n      console.log(\n        \"redirectOnExpiredToken: token is not expired, not redirecting\",\n      );\n    }\n    return;\n  }\n  if (config.isDebugMode) {\n    console.log(\n      \"redirectOnExpiredToken: token is defined and expired, redirecting\",\n    );\n  }\n  redirect(`${config.apiPath}/${routes.login}`);\n};\n","import { config } from \"../config/index\";\nimport { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\nimport { redirectOnExpiredToken } from \"../utils/redirectOnExpiredToken\";\n\n/**\n * @callback getAccessToken\n * @returns {Promise<import('../../types.js').KindeAccessToken | undefined>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n *\n * @returns {getAccessToken}\n */\nexport const getAccessTokenFactory = (req, res) => async () => {\n  try {\n    const accessToken = await getAccessToken(req, res);\n    if (config.isDebugMode) {\n      console.log(\n        \"getAccessTokenFactory: running redirectOnExpiredToken check\",\n      );\n    }\n    redirectOnExpiredToken(accessToken);\n    return jwtDecoder(accessToken);\n  } catch (err) {\n    if (config.isDebugMode) {\n      console.error(err);\n    }\n    return null;\n  }\n};\n","import {\n  createKindeServerClient,\n  GrantType,\n} from \"@kinde-oss/kinde-typescript-sdk\";\nimport { config } from \"../config/index\";\n\nexport const kindeClient = createKindeServerClient(\n  GrantType.AUTHORIZATION_CODE,\n  config.clientOptions,\n);\n","import { sessionManager } from \"./sessionManager\";\nimport { FlagDataType } from \"@kinde-oss/kinde-typescript-sdk\";\nimport { kindeClient } from \"./kindeServerClient\";\n\n/**\n * @callback getFlag\n * @param {string} code\n * @param {boolean | number | string} defaultValue\n * @param {import('../../types').KindeFlagTypeCode} flagType\n * @returns {Promise<import('../../types').KindeFlag | {value: boolean | number | string}>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getFlag}\n */\nexport const getFlagFactory =\n  (req, res) => async (code, defaultValue, flagType) => {\n    try {\n      const tokenFeatureFlags = await kindeClient.getClaimValue(\n        await sessionManager(req, res),\n        \"feature_flags\",\n        \"access_token\",\n      );\n      const tokenHasuraFeatureFlags = await kindeClient.getClaimValue(\n        await sessionManager(req, res),\n        \"x-hasura-feature-flags\",\n        \"access_token\",\n      );\n\n      const featureFlags = {\n        ...tokenFeatureFlags,\n        ...tokenHasuraFeatureFlags,\n      };\n\n      const flag = featureFlags[code];\n\n      if (!flag && defaultValue === undefined) {\n        throw new Error(\n          `Flag ${code} was not found, and no default value has been provided`,\n        );\n      }\n\n      if (flag?.t && flagType && flagType !== flag?.t) {\n        throw new Error(\n          `Flag ${code} is of type ${FlagDataType[flag.t]}, expected type is ${\n            FlagDataType[flagType]\n          }`,\n        );\n      }\n\n      const isDefault = flag?.v === undefined;\n      const response = {\n        is_default: isDefault,\n        value: flag?.v === undefined ? defaultValue : flag?.v,\n        code,\n        type: isDefault ? FlagDataType[flag?.t ?? flagType] : false,\n        defaultValue\n      };\n\n      return response;\n    } catch (error) {\n      // @ts-ignore\n      if (error.message.includes(\"no default value has been provided\")) {\n        throw error;\n      }\n      return { value: defaultValue };\n    }\n  };\n","import { getFlagFactory } from \"./getFlag\";\nimport { config } from \"../config/index\";\n\n/**\n * @callback getBooleanFlag\n * @param {string} code\n * @param {boolean} defaultValue\n * @returns {Promise<boolean | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getBooleanFlag}\n */\nexport const getBooleanFlagFactory =\n  (req, res) => async (code, defaultValue) => {\n    try {\n      const flag = await getFlagFactory(req, res)(code, defaultValue, \"b\");\n      return flag.value;\n    } catch (err) {\n      if (config.isDebugMode) {\n        console.error(err);\n      }\n      return null;\n    }\n  };\n","import { config } from \"../config\";\nimport { sessionManager } from \"../session/sessionManager\";\nimport { NextApiRequest, NextApiResponse } from \"next\";\nimport { validateToken } from \"./jwt/validation\";\nimport { kindeClient } from \"../session/kindeServerClient\";\n\nexport const getIdToken = async (\n  req: NextApiRequest,\n  res?: NextApiResponse,\n) => {\n  const tokenKey = \"id_token\";\n  try {\n    const session = await sessionManager(req, res);\n    const token = await session.getSessionItem(tokenKey);\n\n    if (!token || typeof token !== \"string\") {\n      if (config.isDebugMode) {\n        console.warn(\n          \"getIdToken: invalid token or token is missing (are you logged in?)\",\n        );\n      }\n      return null;\n    }\n\n    const isTokenValid = await validateToken({\n      token,\n    });\n\n    if (!isTokenValid) {\n      if (config.isDebugMode) {\n        console.error(\"getIdToken: invalid token\");\n      }\n      return null;\n    }\n\n    return token;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\"getIdToken\", error);\n    }\n    return null;\n  }\n};\n","import { sessionManager } from \"./sessionManager\";\nimport { config } from \"../config/index\";\nimport { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { getIdToken } from \"../utils/getIdToken\";\nimport { redirectOnExpiredToken } from \"../utils/redirectOnExpiredToken\";\n\n/**\n * @callback getIdToken\n * @returns {Promise<import('../../types').KindeIdToken>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getIdToken}\n */\n\n// @ts-ignore\nexport const getIdTokenFactory = (req, res) => async () => {\n  try {\n    const token = await getIdToken(req, res);\n    if (config.isDebugMode) {\n      console.log(\"getIdTokenFactory: running redirectOnExpiredToken check\");\n    }\n    redirectOnExpiredToken(token);\n    return jwtDecoder(token);\n  } catch (err) {\n    if (config.isDebugMode) {\n      console.error(err);\n    }\n    return null;\n  }\n};\n","import { getFlagFactory } from \"./getFlag\";\nimport { config } from \"../config/index\";\n\n/**\n * @callback getIntegerFlag\n * @param {string} code\n * @param {number} defaultValue\n * @returns {Promise<number | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getIntegerFlag}\n */\nexport const getIntegerFlagFactory =\n  (req, res) => async (code, defaultValue) => {\n    try {\n      const flag = await getFlagFactory(req, res)(code, defaultValue, \"i\");\n      return flag.value;\n    } catch (err) {\n      if (config.isDebugMode) {\n        console.error(err);\n      }\n      return null;\n    }\n  };\n","import { KindeAccessToken, KindeIdToken } from \"../../types\";\n\ntype OrgPropertyKey =\n  | \"city\"\n  | \"industry\"\n  | \"postcode\"\n  | \"state_region\"\n  | \"street_address\"\n  | \"street_address_2\";\n\nconst getOrgProperty = (\n  key: OrgPropertyKey,\n  idToken: KindeIdToken,\n  accessToken: KindeAccessToken,\n): string | undefined => {\n  const orgIdTokenProperties =\n    idToken.organization_properties ||\n    idToken[\"x-hasura-organization_properties\"] ||\n    {};\n  const orgAccessTokenProperties =\n    accessToken.organization_properties ||\n    accessToken[\"x-hasura-organization_properties\"] ||\n    {};\n  const idValue = orgIdTokenProperties[`kp_org_${key}`]?.v;\n  const accessValue = orgAccessTokenProperties[`kp_org_${key}`]?.v;\n  return idValue || accessValue;\n};\n\nexport const generateOrganizationObject = (\n  idToken: KindeIdToken,\n  accessToken: KindeAccessToken,\n) => {\n  const orgCode = accessToken.org_code || accessToken[\"x-hasura-org-code\"];\n  const orgName = accessToken.org_name || accessToken[\"x-hasura-org-name\"];\n  if (!orgCode) {\n    throw new Error(\"Missing required organization fields in access token\");\n  }\n\n  return {\n    orgCode,\n    orgName,\n    properties: {\n      city: getOrgProperty(\"city\", idToken, accessToken),\n      industry: getOrgProperty(\"industry\", idToken, accessToken),\n      postcode: getOrgProperty(\"postcode\", idToken, accessToken),\n      state_region: getOrgProperty(\"state_region\", idToken, accessToken),\n      street_address: getOrgProperty(\"street_address\", idToken, accessToken),\n      street_address_2: getOrgProperty(\n        \"street_address_2\",\n        idToken,\n        accessToken,\n      ),\n    },\n  };\n};\n","import { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { KindeAccessToken, KindeIdToken } from \"../../types\";\nimport { config } from \"../config/index\";\nimport { generateOrganizationObject } from \"../utils/generateOrganizationObject\";\nimport { sessionManager } from \"./sessionManager\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\n/**\n * @callback getOrganization\n * @returns {Promise<import('../../types').KindeOrganization | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getOrganization}\n */\nexport const getOrganizationFactory = (req, res) => async () => {\n  try {\n    const idTokenString = await (\n      await sessionManager(req, res)\n    ).getSessionItem(\"id_token\");\n    if (!idTokenString) {\n      throw new Error(\"ID token is missing\");\n    }\n    const idToken = jwtDecoder<KindeIdToken>(idTokenString as string);\n\n    const accessToken = (await getAccessToken(req, res)) as string;\n    const decodedToken = jwtDecoder<KindeAccessToken>(accessToken);\n\n    return generateOrganizationObject(idToken, decodedToken);\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(error);\n    }\n    return null;\n  }\n};\n","import { sessionManager } from \"./sessionManager\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { config } from \"../config/index\";\n\n/**\n * @callback getPermission\n *  @param {string} name\n * @returns {Promise<import('../../types').KindePermission | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getPermission}\n */\nexport const getPermissionFactory = (req, res) => async (name) => {\n  try {\n    const permission = await kindeClient.getPermission(\n      await sessionManager(req, res),\n      name,\n    );\n\n    if (!permission.isGranted) {\n      const hasuraPermissions = await kindeClient.getClaimValue(\n        await sessionManager(req, res),\n        \"x-hasura-permissions\",\n      );\n      if (hasuraPermissions.includes(name)) {\n        return { isGranted: true, orgCode: permission.orgCode };\n      }\n    }\n    return permission;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(error);\n    }\n    return null;\n  }\n};\n","import { sessionManager } from \"./sessionManager\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { config } from \"../config/index\";\n\n/**\n * @callback getPermissions\n * @returns {Promise<import('../../types').KindePermissions | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getPermissions}\n */\nexport const getPermissionsFactory = (req, res) => async () => {\n  try {\n    const permissions = await kindeClient.getPermissions(\n      await sessionManager(req, res),\n    );\n\n    if (!permissions.permissions) {\n      const hasuraPermissions = await kindeClient.getClaimValue(\n        await sessionManager(req, res),\n        \"x-hasura-permissions\",\n      );\n\n      return {\n        permissions: hasuraPermissions,\n        orgCode: await kindeClient.getClaimValue(\n          await sessionManager(req, res),\n          \"x-hasura-org-code\",\n        ),\n      };\n    }\n\n    return permissions;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(error);\n    }\n    return null;\n  }\n};\n","import { getFlagFactory } from \"./getFlag\";\nimport { config } from \"../config/index\";\n/**\n * @callback getStringFlag\n * @param {string} code\n * @param {string} defaultValue\n * @returns {Promise<string | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getStringFlag}\n */\nexport const getStringFlagFactory =\n  (req, res) => async (code, defaultValue) => {\n    try {\n      const flag = await getFlagFactory(req, res)(code, defaultValue, \"s\");\n      return flag.value;\n    } catch (err) {\n      if (config.isDebugMode) {\n        console.error(err);\n      }\n      return null;\n    }\n  };\n","import { KindeAccessToken, KindeIdToken, KindeUser } from \"../../types\";\n\ntype CustomPropertyType = Record<string, any>;\nexport const generateUserObject = (\n  idToken: KindeIdToken,\n  accessToken: KindeAccessToken,\n) => {\n  const user: KindeUser<CustomPropertyType> = {\n    id: idToken.sub,\n    email: idToken.email,\n    family_name: idToken.family_name,\n    given_name: idToken.given_name,\n    picture: idToken.picture,\n    username: idToken.preferred_username,\n    phone_number: idToken.phone_number,\n  };\n  let res = user;\n\n  const properties = idToken.user_properties || accessToken.user_properties;\n\n  if (properties) {\n    const {\n      kp_usr_city: cityObj,\n      kp_usr_industry: industryObj,\n      kp_usr_is_marketing_opt_in: isMarketingOptInObj,\n      kp_usr_job_title: jobTitleObj,\n      kp_usr_middle_name: middleNameObj,\n      kp_usr_postcode: postcodeObj,\n      kp_usr_salutation: salutationObj,\n      kp_usr_state_region: stateRegionObj,\n      kp_usr_street_address: streetAddressObj,\n      kp_usr_street_address_2: streetAddress2Obj,\n      ...rest\n    } = properties;\n\n    const sanitizedRest: Record<string, any> = Object.keys(rest).reduce(\n      (acc, key) => {\n        acc[key] = rest[key]?.v;\n        return acc;\n      },\n      {},\n    );\n    res = {\n      ...user,\n      properties: {\n        city: cityObj?.v,\n        industry: industryObj?.v,\n        is_marketing_opt_in: isMarketingOptInObj?.v,\n        job_title: jobTitleObj?.v,\n        middle_name: middleNameObj?.v,\n        postcode: postcodeObj?.v,\n        salutation: salutationObj?.v,\n        state_region: stateRegionObj?.v,\n        street_address: streetAddressObj?.v,\n        street_address_2: streetAddress2Obj?.v,\n        ...sanitizedRest,\n      },\n    };\n  }\n  return res;\n};\n","import { NextApiRequest, NextApiResponse } from \"next\";\nimport { KindeAccessToken, KindeIdToken, KindeUser } from \"../../types\";\nimport { config } from \"../config/index\";\nimport { generateUserObject } from \"../utils/generateUserObject\";\nimport { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\nimport { getIdToken } from \"../utils/getIdToken\";\n\nexport const getUserFactory =\n  (req: NextApiRequest, res: NextApiResponse) =>\n  async <T = Record<string, any>>(): Promise<KindeUser<T>> => {\n    try {\n      const rawToken = await getIdToken(req, res);\n      if (!rawToken) {\n        return null;\n      }\n      const idToken = jwtDecoder<KindeIdToken>(rawToken as string);\n\n      const accessToken = await getAccessToken(req, res);\n      if (!accessToken) {\n        return null;\n      }\n      const decodedToken = jwtDecoder<KindeAccessToken>(accessToken as string);\n\n      return generateUserObject(idToken, decodedToken) as KindeUser<T>;\n    } catch (error) {\n      if (config.isDebugMode) {\n        console.debug(\"getUser\", error);\n      }\n      return null;\n    }\n  };\n","import { sessionManager } from \"./sessionManager\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { config } from \"../config/index\";\nimport { NextApiRequest, NextApiResponse } from \"next\";\nimport { KindeOrganizations } from \"../../types\";\n\nexport const getUserOrganizationsFactory =\n  (req?: NextApiRequest, res?: NextApiResponse) =>\n  async (): Promise<KindeOrganizations | null> => {\n    try {\n      const session = await sessionManager(req, res);\n      const userOrgs = await kindeClient.getUserOrganizations(session);\n      const orgNames =\n        ((await kindeClient.getClaimValue(\n          session,\n          \"organizations\",\n          \"id_token\",\n        )) as { id: string; name: string }[]) ?? [];\n\n      const hasuraOrgCodes =\n        ((await kindeClient.getClaimValue(\n          session,\n          \"x-hasura-org-codes\",\n          \"id_token\",\n        )) as string[]) ?? [];\n\n      const hasuraOrganizations =\n        ((await kindeClient.getClaimValue(\n          session,\n          \"x-hasura-organizations\",\n          \"id_token\",\n        )) as { id: string; name: string }[]) ?? [];\n      return {\n        orgCodes: [...userOrgs.orgCodes, ...hasuraOrgCodes],\n        orgs: [...orgNames, ...hasuraOrganizations].map((org) => ({\n          code: org?.id,\n          name: org?.name,\n        })),\n      };\n    } catch (error) {\n      if (config.isDebugMode) {\n        console.debug(\"getUserOrganization error:\", error);\n      }\n      return null;\n    }\n  };\n","import { getUserFactory } from \"./getUser\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\nimport { isTokenExpired } from \"../utils/jwt/validation\";\nimport { redirect } from \"next/navigation\";\nimport { redirectOnExpiredToken } from \"../utils/redirectOnExpiredToken\";\nimport { config } from \"../config/index\";\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {() => Promise<boolean>}\n */\nexport const isAuthenticatedFactory = (req, res) => async () => {\n  const token = await getAccessToken(req, res);\n  if (config.isDebugMode) {\n    console.log(\"isAuthenticatedFactory: running redirectOnExpiredToken check\");\n  }\n  redirectOnExpiredToken(token);\n  const user = await getUserFactory(req, res)();\n  return token && Boolean(user);\n};\n","import { sessionManager } from \"./sessionManager\";\n\n/**\n * @callback getAccessTokenRaw\n * @returns {Promise<string>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n *\n * @returns {getAccessTokenRaw}\n */\n// @ts-ignore\nexport const getAccessTokenRawFactory = (req, res) => async () => {\n  return await (await sessionManager(req, res)).getSessionItem(\"access_token\");\n};\n","import { sessionManager } from \"./sessionManager\";\n\n/**\n * @callback getIdTokenRaw\n * @returns {Promise<string>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getIdTokenRaw}\n */\n\n// @ts-ignore\nexport const getIdTokenRawFactory = (req, res) => async () => {\n  return await (await sessionManager(req, res)).getSessionItem(\"id_token\");\n};\n","import { sessionManager } from \"./sessionManager\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { config } from \"../config/index\";\n/**\n * @callback getRoles\n * @returns {Promise<import('../../types').KindeRoles | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getRoles}\n */\nexport const getRolesFactory = (req, res) => async () => {\n  try {\n    const roles = await kindeClient.getClaimValue(\n      await sessionManager(req, res),\n      \"roles\",\n    );\n\n    if (!roles) {\n      const hasuraRoles = await kindeClient.getClaimValue(\n        await sessionManager(req, res),\n        \"x-hasura-roles\",\n      );\n\n      return hasuraRoles;\n    }\n\n    return roles;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(error);\n    }\n    return null;\n  }\n};\n","import { sessionManager } from \"./sessionManager\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { config } from \"../config/index\";\n\n/**\n * @callback getClaim\n *  @param {string} claim\n *  @param {\"access_token\" | \"id_token\"} [type]\n * @returns {Promise<{name: string, value: string}> | null>}\n */\n\n/**\n *\n * @param {import('next').NextApiRequest} [req]\n * @param {import('next').NextApiResponse} [res]\n * @returns {getClaim}\n */\nexport const getClaimFactory = (req, res) => async (claim, type) => {\n  try {\n    const kindeClaim = await kindeClient.getClaim(\n      await sessionManager(req, res),\n      claim,\n      type,\n    );\n    return kindeClaim;\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(error);\n    }\n    return null;\n  }\n};\n","import { getAccessTokenFactory } from \"./getAccessToken\";\nimport { getBooleanFlagFactory } from \"./getBooleanFlag\";\nimport { getFlagFactory } from \"./getFlag\";\nimport { getIdTokenFactory } from \"./getIdToken\";\nimport { getIntegerFlagFactory } from \"./getIntegerFlag\";\nimport { getOrganizationFactory } from \"./getOrganization\";\nimport { getPermissionFactory } from \"./getPermission\";\nimport { getPermissionsFactory } from \"./getPermissions\";\nimport { getStringFlagFactory } from \"./getStringFlag\";\nimport { getUserFactory } from \"./getUser\";\nimport { getUserOrganizationsFactory } from \"./getUserOrganizations\";\nimport { isAuthenticatedFactory } from \"./isAuthenticated\";\nimport { getAccessTokenRawFactory } from \"./getAccessTokenRaw\";\nimport { getIdTokenRawFactory } from \"./getIdTokenRaw\";\nimport { kindeClient } from \"./kindeServerClient\";\nimport { sessionManager } from \"./sessionManager\";\nimport { getRolesFactory } from \"./getRoles\";\nimport { getClaimFactory } from \"./getClaim\";\nimport { config } from \"../config/index\";\nimport { NextApiRequest, NextApiResponse } from \"next\";\n\nexport default function (req?: NextApiRequest, res?: NextApiResponse) {\n  return {\n    refreshTokens: async () => {\n      try {\n        // this will ALWAYS fail in an RSC as Cookies cannot be modified there.\n        // refreshTokens is technically available in an RSC via getKindeServerSession,\n        // but it won't work.\n        // Maybe we should provide user feedback on this?\n        const response = await kindeClient.refreshTokens(\n          await sessionManager(req, res),\n        );\n        return response;\n      } catch (error) {\n        if (config.isDebugMode) {\n          console.error(error);\n        }\n        return null;\n      }\n    },\n    getAccessToken: getAccessTokenFactory(req, res),\n    getBooleanFlag: getBooleanFlagFactory(req, res),\n    getFlag: getFlagFactory(req, res),\n    getIdToken: getIdTokenFactory(req, res),\n    getIdTokenRaw: getIdTokenRawFactory(req, res),\n    getAccessTokenRaw: getAccessTokenRawFactory(req, res),\n    getIntegerFlag: getIntegerFlagFactory(req, res),\n    getOrganization: getOrganizationFactory(req, res),\n    getPermission: getPermissionFactory(req, res),\n    getPermissions: getPermissionsFactory(req, res),\n    getStringFlag: getStringFlagFactory(req, res),\n    getUser: getUserFactory(req, res),\n    getUserOrganizations: getUserOrganizationsFactory(req, res),\n    isAuthenticated: isAuthenticatedFactory(req, res),\n    getRoles: getRolesFactory(req, res),\n    getClaim: getClaimFactory(req, res),\n  };\n}\n","import {\n  GLOBAL_COOKIE_OPTIONS,\n  MAX_COOKIE_LENGTH,\n  TWENTY_NINE_DAYS,\n} from \"../constants\";\nimport { splitString } from \"../splitString\";\nimport { config } from \"../../config\";\nimport { RequestCookie } from \"next/dist/compiled/@edge-runtime/cookies\";\n\nexport const getSplitCookies = (cookieName: string, cookieValue: string) => {\n  return splitString(cookieValue, MAX_COOKIE_LENGTH).map((value, index) => {\n    return {\n      name: cookieName + (index === 0 ? \"\" : index),\n      value: value,\n      options: {\n        maxAge: TWENTY_NINE_DAYS,\n        domain: config.cookieDomain ? config.cookieDomain : undefined,\n        ...GLOBAL_COOKIE_OPTIONS,\n      } as Partial<RequestCookie>,\n    };\n  });\n};\n","import { NextResponse } from \"next/server\";\nimport { config } from \"../config/index\";\nimport { KindeAccessToken, KindeIdToken } from \"../../types\";\nimport { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { isTokenExpired } from \"../utils/jwt/validation\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\nimport { kindeClient } from \"../session/kindeServerClient\";\nimport { sessionManager } from \"../session/sessionManager\";\nimport { getSplitCookies } from \"../utils/cookies/getSplitSerializedCookies\";\nimport { getIdToken } from \"../utils/getIdToken\";\nimport { OAuth2CodeExchangeResponse } from \"@kinde-oss/kinde-typescript-sdk\";\nimport { copyCookiesToRequest } from \"../utils/copyCookiesToRequest\";\nimport { routes } from \"../config/index\";\n\nconst handleMiddleware = async (req, options, onSuccess) => {\n  const { pathname } = req.nextUrl;\n\n  const isReturnToCurrentPage = options?.isReturnToCurrentPage;\n  const loginPage = options?.loginPage || `${config.apiPath}/${routes.login}`;\n  const callbackPage = `${config.apiPath}/kinde_callback`;\n  const registerPage = `${config.apiPath}/${routes.register}`;\n\n  if (\n    loginPage == pathname ||\n    callbackPage == pathname ||\n    registerPage == pathname\n  ) {\n    return NextResponse.next();\n  }\n\n  let publicPaths = [\"/_next\", \"/favicon.ico\"];\n  if (options?.publicPaths !== undefined) {\n    if (Array.isArray(options?.publicPaths)) {\n      publicPaths = options.publicPaths;\n    }\n  }\n\n  const loginRedirectUrl = isReturnToCurrentPage\n    ? `${loginPage}?post_login_redirect_url=${pathname}`\n    : loginPage;\n\n  const isPublicPath = publicPaths.some((p) => {\n    // explicit root path handling\n    // if we use startsWith and \"/\" is provided as a publicPath,\n    // we inadvertently match all paths because they all start with \"/\"\n    if (p === \"/\") return pathname === \"/\";\n    return pathname.startsWith(p);\n  });\n\n  // getAccessToken will validate the token\n  let kindeAccessToken = await getAccessToken(req);\n  // getIdToken will validate the token\n  let kindeIdToken = await getIdToken(req);\n\n  // if no access token, redirect to login\n  if ((!kindeAccessToken || !kindeIdToken) && !isPublicPath) {\n    if (config.isDebugMode) {\n      console.log(\n        \"authMiddleware: no access or id token, redirecting to login\",\n      );\n    }\n    return NextResponse.redirect(\n      new URL(loginRedirectUrl, options?.redirectURLBase || config.redirectURL),\n    );\n  }\n\n  const session = await sessionManager(req);\n  let refreshResponse: OAuth2CodeExchangeResponse | null = null;\n  const resp = NextResponse.next();\n\n  // if accessToken is expired, refresh it\n  if (isTokenExpired(kindeAccessToken) || isTokenExpired(kindeIdToken)) {\n    if (config.isDebugMode) {\n      console.log(\"authMiddleware: access token expired, refreshing\");\n    }\n\n    try {\n      refreshResponse = await kindeClient.refreshTokens(session);\n      kindeAccessToken = refreshResponse.access_token;\n      kindeIdToken = refreshResponse.id_token;\n\n      // if we want layouts/pages to get immediate access to the new token,\n      // we need to set the cookie on the response here\n      const splitAccessTokenCookies = getSplitCookies(\n        \"access_token\",\n        refreshResponse.access_token,\n      );\n      splitAccessTokenCookies.forEach((cookie) => {\n        resp.cookies.set(cookie.name, cookie.value, cookie.options);\n      });\n\n      const splitIdTokenCookies = getSplitCookies(\n        \"id_token\",\n        refreshResponse.id_token,\n      );\n      splitIdTokenCookies.forEach((cookie) => {\n        resp.cookies.set(cookie.name, cookie.value, cookie.options);\n      });\n\n      // copy the cookies from the response to the request\n      // in Next versions prior to 14.2.8, the cookies function\n      // reads the Set-Cookie header from the *request* object, not the *response* object\n      // in order to get the new cookies to the request, we need to copy them over\n      copyCookiesToRequest(req, resp);\n\n      if (config.isDebugMode) {\n        console.log(\"authMiddleware: tokens refreshed\");\n      }\n    } catch (error) {\n      // token is expired and refresh failed, redirect to login\n      if (config.isDebugMode) {\n        console.error(\n          \"authMiddleware: token refresh failed, redirecting to login\",\n        );\n      }\n\n      if (!isPublicPath) {\n        return NextResponse.redirect(\n          new URL(\n            loginRedirectUrl,\n            options?.redirectURLBase || config.redirectURL,\n          ),\n        );\n      }\n    }\n  }\n\n  // we don't bail out earlier than here because we want to refresh the tokens\n  // if they are expired, even if the path is public\n  if (isPublicPath) {\n    return resp;\n  }\n\n  let accessTokenValue: KindeAccessToken | null = null;\n  let idTokenValue: KindeIdToken | null = null;\n\n  try {\n    accessTokenValue = jwtDecoder<KindeAccessToken>(kindeAccessToken);\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\n        \"authMiddleware: access token decode failed, redirecting to login\",\n      );\n    }\n    return NextResponse.redirect(\n      new URL(loginRedirectUrl, options?.redirectURLBase || config.redirectURL),\n    );\n  }\n\n  try {\n    idTokenValue = jwtDecoder<KindeIdToken>(kindeIdToken);\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\n        \"authMiddleware: id token decode failed, redirecting to login\",\n      );\n    }\n    return NextResponse.redirect(\n      new URL(loginRedirectUrl, options?.redirectURLBase || config.redirectURL),\n    );\n  }\n\n  const customValidationValid = options?.isAuthorized\n    ? options.isAuthorized({ req, token: accessTokenValue })\n    : true;\n\n  if (customValidationValid && onSuccess) {\n    if (config.isDebugMode) {\n      console.log(\"authMiddleware: invoking onSuccess callback\");\n    }\n    const callbackResult = await onSuccess({\n      token: accessTokenValue,\n      user: {\n        family_name: idTokenValue.family_name,\n        given_name: idTokenValue.given_name,\n        email: idTokenValue.email,\n        id: idTokenValue.sub,\n        picture: idTokenValue.picture,\n      },\n    });\n\n    // If a user returned a response from their onSuccess callback, copy our refreshed tokens to it\n    if (callbackResult instanceof NextResponse) {\n      if (config.isDebugMode) {\n        console.log(\n          \"authMiddleware: onSuccess callback returned a response, copying our cookies to it\",\n        );\n      }\n      // Copy our cookies to their response\n      resp.cookies.getAll().forEach((cookie) => {\n        callbackResult.cookies.set(cookie.name, cookie.value, {\n          ...cookie,\n        });\n      });\n\n      // Copy any headers we set (if any) to their response\n      resp.headers.forEach((value, key) => {\n        callbackResult.headers.set(key, value);\n      });\n\n      return callbackResult;\n    }\n\n    // If they didn't return a response, return our response with the refreshed tokens\n    if (config.isDebugMode) {\n      console.log(\n        \"authMiddleware: onSuccess callback did not return a response, returning our response\",\n      );\n    }\n\n    return resp;\n  }\n\n  if (customValidationValid) {\n    if (config.isDebugMode) {\n      console.log(\n        \"authMiddleware: customValidationValid is true, returning response\",\n      );\n    }\n    return resp;\n  }\n\n  if (config.isDebugMode) {\n    console.log(\"authMiddleware: default behaviour, redirecting to login\");\n  }\n\n  return NextResponse.redirect(\n    new URL(loginRedirectUrl, options?.redirectURLBase || config.redirectURL),\n  );\n};\n\n/**\n * @param {Request} [req]\n * @param {function(req: Request & {kindeAuth: {user: any, token: string}})} [onIsAuthorized]\n */\nexport function withAuth(...args) {\n  // most basic usage - no options\n  if (!args.length || args[0] instanceof Request) {\n    // @ts-ignore\n    return handleMiddleware(...args);\n  }\n\n  // passing through the kindeAuth data to the middleware function\n  if (typeof args[0] === \"function\") {\n    const middleware = args[0];\n    const options = args[1];\n    return async (...args) =>\n      await handleMiddleware(args[0], options, async ({ token, user }) => {\n        args[0].kindeAuth = { token, user };\n        return await middleware(...args);\n      });\n  }\n\n  // includes options\n  const options = args[0];\n  // @ts-ignore\n  return async (...args) => await handleMiddleware(args[0], options);\n}\n","import {\n  RequestCookies,\n  ResponseCookies,\n} from \"next/dist/server/web/spec-extension/cookies\";\nimport { NextRequest, NextResponse } from \"next/server\";\n\nexport const copyCookiesToRequest = (req: NextRequest, res: NextResponse) => {\n  const setCookies = new ResponseCookies(res.headers);\n  const newReqHeaders = new Headers(req.headers);\n  const newReqCookies = new RequestCookies(newReqHeaders);\n  setCookies.getAll().forEach((cookie) => newReqCookies.set(cookie));\n\n  // NextResponse.next will set x-middleware-override-headers / x-middleware-request-* headers\n  const dummyRes = NextResponse.next({ request: { headers: newReqHeaders } });\n\n  dummyRes.headers.forEach((value, key) => {\n    if (\n      key === \"x-middleware-override-headers\" ||\n      key.startsWith(\"x-middleware-request-\")\n    ) {\n      res.headers.set(key, value);\n    }\n  });\n};\n","import React from \"react\";\nimport { config } from \"../config/index\";\nimport { routes } from \"../config/index\";\n/**\n * @typedef {Object} PropsType\n * @prop {React.ReactNode} children\n * @prop {string} [orgCode]\n * @prop {string} [postLoginRedirectURL]\n * @prop {Object.<string, string>} [authUrlParams]\n *\n * @typedef {PropsType & React.AnchorHTMLAttributes<HTMLAnchorElement>} Props\n */\n\n/**\n * @param {Props} props\n */\n\nexport function RegisterLink({\n  children,\n  orgCode,\n  postLoginRedirectURL,\n  authUrlParams,\n  ...props\n}) {\n  let params = new URLSearchParams();\n  let paramsObj = {};\n  if (orgCode != null) paramsObj.org_code = orgCode;\n  if (postLoginRedirectURL != null)\n    paramsObj.post_login_redirect_url = postLoginRedirectURL;\n\n  paramsObj = { ...authUrlParams, ...paramsObj };\n\n  for (const key in paramsObj) params.append(key, paramsObj[key]);\n  return (\n    <a\n      href={`${config.apiPath}/${routes.register}${\n        params ? `?${params.toString()}` : \"\"\n      }`}\n      {...props}\n    >\n      {children}\n    </a>\n  );\n}\n","import React from \"react\";\nimport { config } from \"../config/index\";\nimport { routes } from \"../config\";\n\n/**\n * @typedef {Object} PropsType\n * @prop {React.ReactNode} children\n * @prop {string} [orgCode]\n * @prop {string} [postLoginRedirectURL]\n * @prop {Object.<string, string>} [authUrlParams]\n *\n * @typedef {PropsType & React.AnchorHTMLAttributes<HTMLAnchorElement>} Props\n */\n\n/**\n * @param {Props} props\n */\nexport function LoginLink({\n  children,\n  postLoginRedirectURL,\n  orgCode,\n  authUrlParams,\n  ...props\n}) {\n  const params = new URLSearchParams();\n  let paramsObj = {};\n  if (orgCode != null) paramsObj.org_code = orgCode;\n  if (postLoginRedirectURL != null) {\n    if (postLoginRedirectURL?.startsWith(\"/\")) {\n      const host =\n        typeof window !== \"undefined\"\n          ? window.location.origin\n          : process.env.KINDE_SITE_URL;\n      postLoginRedirectURL = `${host}${postLoginRedirectURL}`;\n    }\n    paramsObj.post_login_redirect_url = postLoginRedirectURL;\n  }\n\n  paramsObj = { ...authUrlParams, ...paramsObj };\n\n  for (const key in paramsObj) params.append(key, paramsObj[key]);\n\n  const authUrl = `${config.apiPath}/${routes.login}${\n    params ? `?${params.toString()}` : \"\"\n  }`;\n  return (\n    <a href={authUrl} {...props}>\n      {children}\n    </a>\n  );\n}\n","import React from \"react\";\n\nimport { config, routes } from \"../config/index\";\n/**\n * @typedef {Object} PropsType\n * @prop {React.ReactNode} children\n * @prop {string} [postLogoutRedirectURL]\n *\n * @typedef {PropsType & React.AnchorHTMLAttributes<HTMLAnchorElement>} Props\n */\n\n/**\n * @param {Props} props\n */\nexport function LogoutLink({ children, postLogoutRedirectURL, ...props }) {\n  return (\n    <a\n      href={`${config.apiPath}/${routes.logout}${\n        postLogoutRedirectURL\n          ? `?post_logout_redirect_url=${postLogoutRedirectURL}`\n          : \"\"\n      }`}\n      {...props}\n    >\n      {children}\n    </a>\n  );\n}\n","import React from \"react\";\nimport { config, routes } from \"../config/index\";\n\n/**\n * @typedef {Object} PropsType\n * @prop {React.ReactNode} children\n * @prop {string} [orgName]\n *\n * @typedef {PropsType & React.AnchorHTMLAttributes<HTMLAnchorElement>} Props\n */\n\n/**\n * @param {Props} props\n */\nexport function CreateOrgLink({ children, orgName, ...props }) {\n  return (\n    <a\n      href={`${config.apiPath}/${routes.createOrg}${\n        orgName ? `?org_name=${orgName}` : \"\"\n      }`}\n      {...props}\n    >\n      {children}\n    </a>\n  );\n}\n","import {\n  APIsApi,\n  ApplicationsApi,\n  BusinessApi,\n  CallbacksApi,\n  Configuration,\n  ConnectedAppsApi,\n  EnvironmentsApi,\n  FeatureFlagsApi,\n  IndustriesApi,\n  OAuthApi,\n  OrganizationsApi,\n  PermissionsApi,\n  RolesApi,\n  SubscribersApi,\n  TimezonesApi,\n  UsersApi,\n} from \"@kinde-oss/kinde-typescript-sdk\";\nimport { config } from \"./config/index\";\nimport { sessionManager } from \"./session/sessionManager\";\n\n/**\n * Create the Kinde Management API client\n * @param {Request | import('next').NextApiRequest} [req] - optional request (required when used with pages router)\n * @param {Response | import('next').NextApiResponse} [res] - optional response (required when used with pages router)\n */\nexport const createKindeManagementAPIClient = async (req, res) => {\n  let apiToken = null;\n\n  const store = await sessionManager(req, res);\n  store.removeSessionItem(\"kinde_api_access_token\");\n\n  const response = await fetch(`${config.issuerURL}/oauth2/token`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded\",\n    },\n    body: new URLSearchParams({\n      grant_type: \"client_credentials\",\n      client_id: config.clientID || \"\",\n      client_secret: config.clientSecret || \"\",\n      audience: config.issuerURL + \"/api\",\n    }),\n  });\n  apiToken = (await response.json()).access_token;\n\n  const cfg = new Configuration({\n    basePath: config.issuerURL,\n    accessToken: apiToken,\n    headers: { Accept: \"application/json\" },\n  });\n\n  const usersApi = new UsersApi(cfg);\n  const oauthApi = new OAuthApi(cfg);\n  const subscribersApi = new SubscribersApi(cfg);\n  const organizationsApi = new OrganizationsApi(cfg);\n  const connectedAppsApi = new ConnectedAppsApi(cfg);\n  const featureFlagsApi = new FeatureFlagsApi(cfg);\n  const environmentsApi = new EnvironmentsApi(cfg);\n  const permissionsApi = new PermissionsApi(cfg);\n  const rolesApi = new RolesApi(cfg);\n  const businessApi = new BusinessApi(cfg);\n  const industriesApi = new IndustriesApi(cfg);\n  const timezonesApi = new TimezonesApi(cfg);\n  const applicationsApi = new ApplicationsApi(cfg);\n  const callbacksApi = new CallbacksApi(cfg);\n  const apisApi = new APIsApi(cfg);\n\n  return {\n    usersApi,\n    oauthApi,\n    subscribersApi,\n    organizationsApi,\n    connectedAppsApi,\n    featureFlagsApi,\n    environmentsApi,\n    permissionsApi,\n    rolesApi,\n    businessApi,\n    industriesApi,\n    timezonesApi,\n    applicationsApi,\n    callbacksApi,\n    apisApi,\n  };\n};\n","export default function validateState(passedState: string) {\n  if (!/^[a-zA-Z0-9-_]+$/.test(passedState)) {\n    return false;\n  }\n  return true;\n}\n","export function isPreFetch(headers: Headers): boolean {\n  const isPrefetch =\n    headers.get(\"purpose\") === \"prefetch\" ||\n    headers.get(\"x-purpose\") === \"prefetch\" ||\n    headers.get(\"x-moz\") === \"prefetch\";\n\n  return !!isPrefetch;\n}\n","import { NextApiRequest } from \"next\";\nimport { ReadonlyHeaders } from \"next/dist/server/web/spec-extension/adapters/headers\";\nimport { NextRequest } from \"next/server\";\n\nexport const getHeaders = async (req?: NextRequest | NextApiRequest) => {\n  if (req) {\n    // pages router, or we've provided a request down on app router for some reason\n    return new Headers(req.headers as HeadersInit);\n  } else {\n    try {\n      // dynamically import headers on app router environments in Next >=13 (it didn't exist prior to 13)\n      const { headers } = await import(\"next/headers\");\n      const heads = await headers();\n      return heads;\n    } catch (error) {\n      throw new Error(\n        `Kinde: Failed to read request headers (are you using a Next.js version prior to 13?)`,\n      );\n    }\n  }\n};\n","import { config } from \"../config/index\";\nimport { NextResponse } from \"next/server\";\nimport { validateClientSecret } from \"@kinde-oss/kinde-typescript-sdk\";\n\n/**\n *\n * @returns NextResponse\n */\nexport const health = async () => {\n  return NextResponse.json({\n    apiPath: config.apiPath,\n    redirectURL: config.clientOptions.redirectURL,\n    postLoginRedirectURL: config.postLoginRedirectURL,\n    issuerURL: config.issuerURL,\n    clientID: config.clientID,\n    clientSecret: validateClientSecret(config.clientSecret)\n      ? \"Set correctly\"\n      : \"Not set correctly\",\n    postLogoutRedirectURL: config.postLogoutRedirectURL,\n    audience: config.audience,\n    cookieDomain: config.cookieDomain,\n    logoutRedirectURL: config.clientOptions.logoutRedirectURL,\n  });\n};\n","import { NextResponse } from \"next/server\";\n\nexport default class RouterClient {\n  /** @type {import('../../types').KindeClientConfig} */\n  clientConfig = {};\n  /** @type {import('../../types').KindeClient} */\n  kindeClient = null;\n  /** @type {URL} */\n  url;\n  /** @type {import('@kinde-oss/kinde-typescript-sdk').SessionManager} */\n  sessionManager;\n  /** @type {import('next').NextApiResponse | *} */\n  res;\n  /** @type {import('next').NextApiRequest | NextResponse | *} */\n  req;\n  /** @type {URLSearchParams} */\n  searchParams;\n\n  constructor() {\n    if (this.constructor == RouterClient) {\n      throw new Error(\"Abstract classes can't be instantiated.\");\n    }\n  }\n\n  /**\n   *\n   * @param {string} url\n   * @returns\n   */\n  redirect(url) {\n    throw new Error(\"Method 'redirect()' must be implemented.\");\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {{status: number}} [status]\n   * @returns\n   */\n  json(data, status) {\n    throw new Error(\"Method 'json()' must be implemented.\");\n  }\n\n  error() {\n    throw new Error(\"Method 'error()' must be implemented.\");\n  }\n\n  /**\n   *\n   * @returns {URL}\n   */\n  getUrl() {\n    throw new Error(\"Method 'getUrl()' must be implemented.\");\n  }\n\n  /**\n   *\n   * @param {string} key\n   * @returns {string | null}\n   */\n  getSearchParam(key) {\n    throw new Error(\"Method 'getSearchParam()' must be implemented.\");\n  }\n\n  onError() {\n    throw new Error(\"Method 'onError()' must be implemented.\");\n  }\n}\n","import { createKindeServerClient } from \"@kinde-oss/kinde-typescript-sdk\";\nimport { cookies } from \"next/headers\";\nimport { NextResponse } from \"next/server\";\nimport { config } from \"../config/index\";\nimport { appRouterSessionManager } from \"../session/sessionManager\";\nimport RouterClient from \"./RouterClient\";\n\nexport default class AppRouterClient extends RouterClient {\n  /**\n   *\n   * @param {import('next/server').NextRequest} req\n   * @param {*} res\n   * @param {{onError?: () => void; config: {audience?: string | string[], clientId?: string, clientSecret?: string, issuerURL?: string, siteUrl?: string, postLoginRedirectUrl?: string, postLogoutRedirectUrl?: string, scope?: string}}} options\n   */\n  constructor(req, res, options) {\n    super();\n    this.clientConfig = {\n      ...config.clientOptions,\n      framework: \"Next.js:App\",\n      audience: options?.config?.audience || config.clientOptions.audience,\n      authDomain: options?.config?.issuerURL || config.clientOptions.authDomain,\n      clientId: options?.config?.clientId || config.clientOptions.clientId,\n      clientSecret:\n        options?.config?.clientSecret || config.clientOptions.clientSecret,\n      logoutRedirectURL:\n        options?.config?.postLogoutRedirectUrl ||\n        config.clientOptions.logoutRedirectURL,\n      redirectURL: options?.config?.siteUrl\n        ? `${options?.config?.siteUrl}${config.apiPath}/kinde_callback`\n        : config.clientOptions.redirectURL,\n      siteUrl: config.redirectURL || options.config.siteUrl,\n      scope: options?.config?.scope || config.clientOptions.scope,\n    };\n    this.kindeClient = createKindeServerClient(\n      config.grantType,\n      this.clientConfig,\n    );\n    this.url = new URL(req.url);\n\n    this.req = req;\n    this.searchParams = req.nextUrl.searchParams;\n    this.onErrorCallback = options?.onError;\n  }\n\n  async createStore() {\n    this.sessionManager = appRouterSessionManager(await cookies());\n  }\n\n  /**\n   *\n   * @param {string} url\n   * @returns\n   */\n  redirect(url) {\n    return NextResponse.redirect(url);\n  }\n\n  /**\n   *\n   * @returns {URL}\n   */\n  getUrl() {\n    return this.url;\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {{status: number}} status\n   * @returns\n   */\n  json(data, status = { status: 200 }) {\n    return NextResponse.json(data, status);\n  }\n\n  error() {\n    return Response.error;\n  }\n\n  /**\n   *\n   * @param {string} key\n   * @returns\n   */\n  getSearchParam(key) {\n    return this.req.nextUrl.searchParams.get(key);\n  }\n\n  onError(error) {\n    if (this.onErrorCallback) {\n      this.onErrorCallback(error);\n    }\n  }\n}\n","import { createKindeServerClient } from \"@kinde-oss/kinde-typescript-sdk\";\nimport { config } from \"../config/index\";\nimport {\n  pageRouterSessionManager,\n  sessionManager,\n} from \"../session/sessionManager\";\nimport RouterClient from \"./RouterClient\";\n\n// @ts-ignore\nexport default class PagesRouterClient extends RouterClient {\n  /**\n   *\n   * @param {import('next').NextApiRequest} req\n   * @param {import('next').NextApiResponse} res\n   * @param {{onError?: () => void; config: {audience?: string | string[], clientId?: string, clientSecret?: string, issuerURL?: string, siteUrl?: string, postLoginRedirectUrl?: string, postLogoutRedirectUrl?: string, scope?: string}}} options\n   */\n  constructor(req, res, options) {\n    super();\n    const url = req.url.split(\"/\");\n    url.pop();\n    this.clientConfig = {\n      ...config.clientOptions,\n      framework: \"Next.js:Pages\",\n      audience: options?.config?.audience || config.clientOptions.audience,\n      authDomain: options?.config?.issuerURL || config.clientOptions.authDomain,\n      clientId: options?.config?.clientId || config.clientOptions.clientId,\n      clientSecret:\n        options?.config?.clientSecret || config.clientOptions.clientSecret,\n      logoutRedirectURL:\n        options?.config?.postLogoutRedirectUrl ||\n        config.clientOptions.logoutRedirectURL,\n      redirectURL: options?.config?.siteUrl\n        ? `${options?.config?.siteUrl}${config.apiPath}/kinde_callback`\n        : config.clientOptions.redirectURL,\n      siteUrl: config.redirectURL || options.config.siteUrl,\n    };\n    this.kindeClient = createKindeServerClient(\n      config.grantType,\n      this.clientConfig,\n    );\n    // @ts-ignore\n    this.url = new URL(this.clientConfig.siteUrl + req.url);\n    this.res = res;\n    this.req = req;\n    this.searchParams = this.url.searchParams;\n    this.sessionManager = pageRouterSessionManager(req, res);\n  }\n\n  /**\n   *\n   * @param {string} url\n   * @returns\n   */\n  redirect(url) {\n    return this.res.redirect(url);\n  }\n\n  getUrl() {\n    return this.url;\n  }\n  /**\n   *\n   * @param {object} data\n   * @param {{status: number}} status\n   * @returns\n   */\n  json(data, status = { status: 200 }) {\n    return this.res.status(status.status).json(data);\n  }\n\n  /**\n   *\n   * @param {string} key\n   * @returns {string | null}\n   */\n  getSearchParam(key) {\n    return this.url.searchParams.get(key);\n  }\n}\n","import { isAppRouter } from \"../utils/isAppRouter\";\nimport { callback } from \"./callback\";\nimport { createOrg } from \"./createOrg\";\nimport { login } from \"./login\";\nimport { logout } from \"./logout\";\nimport { setup } from \"./setup\";\nimport { health } from \"./health\";\nimport { register } from \"./register\";\nimport AppRouterClient from \"../routerClients/AppRouterClient\";\nimport PagesRouterClient from \"../routerClients/PagesRouterClient\";\nimport { config, routes } from \"../config/index\";\n\n/**\n * @type {Record<string,(routerClient: RouterClient) => Promise<void>>}\n */\nconst routeMap = {\n  [routes.createOrg]: createOrg,\n  [routes.register]: register,\n  [routes.setup]: setup,\n  [routes.login]: login,\n  [routes.logout]: logout,\n  [routes.health]: health,\n  kinde_callback: callback,\n};\n\n/**\n *\n * @param {string} endpoint\n * @returns\n */\nconst getRoute = (endpoint) => {\n  return routeMap[endpoint];\n};\n/**\n * @param {object} [request]\n * @param {string} [endpoint]\n * @param {{onError?: () => void; config: {audience?: string | string[], clientId?: string, clientSecret?: string, issuerURL?: string, siteUrl?: string, postLoginRedirectUrl?: string, postLogoutRedirectUrl?: string}}} [options]\n * @returns {(req, res) => any}\n */\nexport default (request, endpoint, options) => {\n  if (!config.clientOptions.authDomain)\n    throw new Error(\n      \"The environment variable 'KINDE_ISSUER_URL' is required. Set it in your .env file\",\n    );\n\n  if (!config.clientOptions.clientId && !options?.config?.clientId)\n    throw new Error(\n      \"env variable 'KINDE_CLIENT_ID' is not set and not passed in options\",\n    );\n\n  if (!config.clientOptions.clientSecret && !options?.config?.clientSecret)\n    throw new Error(\n      \"env variable 'KINDE_CLIENT_SECRET' is not set and not passed in options\",\n    );\n\n  if (!config.clientOptions.redirectURL && !options?.config?.siteUrl)\n    throw new Error(\n      \"env variable 'KINDE_SITE_URL' is not set and not passed in options\",\n    );\n\n  // For backwards compatibility in app router\n  if (typeof request == \"object\" && typeof endpoint == \"string\") {\n    // @ts-ignore\n    return appRouterHandler(\n      request,\n      { params: { kindeAuth: endpoint } },\n      options,\n    );\n  }\n  /**\n   *\n   * @param {import('next').NextApiRequest | Request} req\n   * @param {import('next').NextApiResponse | Response} res\n   */\n  return async function handler(req, res) {\n    return isAppRouter(req)\n      ? // @ts-ignore\n        appRouterHandler(req, res, options)\n      : // @ts-ignore\n        pagesRouterHandler(req, res, request);\n  };\n};\n\n/**\n *\n * @param {import('next/server').NextRequest} req\n * @param {{params: {kindeAuth: string}}} res\n * @param {{onError?: () => void}} options\n * @returns\n */\nconst appRouterHandler = async (req, res, options) => {\n  const { params } = res;\n  let endpoint = (await params).kindeAuth;\n  endpoint = Array.isArray(endpoint) ? endpoint[0] : endpoint;\n  const route = getRoute(endpoint);\n\n  if (route) {\n    const routerClient = new AppRouterClient(req, res, options);\n    await routerClient.createStore();\n    return await route(routerClient);\n  } else {\n    return new Response(\"This page could not be found.\", { status: 404 });\n  }\n};\n\n/**\n *\n * @param {import('next').NextApiRequest} req\n * @param {import('next').NextApiResponse} res\n * @param {{domain: string, clientId: string, clientSecret: string}} clientOptions\n * @returns\n */\nconst pagesRouterHandler = async (req, res, clientOptions) => {\n  let {\n    query: { kindeAuth: endpoint },\n  } = req;\n  endpoint = Array.isArray(endpoint) ? endpoint[0] : endpoint;\n  if (!endpoint) {\n    throw Error(\"Please check your Kinde setup\");\n  }\n  const route = getRoute(endpoint);\n  return route\n    ? // @ts-ignore\n      await route(new PagesRouterClient(req, res, clientOptions))\n    : res.status(404).end();\n};\n","import RouterClient from \"../routerClients/RouterClient\";\nimport validateState from \"../utils/validateState\";\n\n/**\n *\n * @param {RouterClient} routerClient\n */\nexport const createOrg = async (routerClient) => {\n  const org_name = routerClient.getSearchParam(\"org_name\");\n  const options = {\n    org_name: org_name ?? undefined,\n    is_create_org: true,\n  };\n\n  const passedState = routerClient.searchParams.get(\"state\");\n\n  if (passedState) {\n    if (!validateState(passedState)) {\n      throw new Error(\"Invalid state supplied\");\n    }\n\n    routerClient.sessionManager.setSessionItem(\"state\", passedState);\n  }\n\n  const authUrl = await routerClient.kindeClient.createOrg(\n    routerClient.sessionManager,\n    options,\n  );\n\n  return routerClient.redirect(authUrl.toString());\n};\n","import RouterClient from \"../routerClients/RouterClient\";\nimport { getHeaders } from \"../utils/getHeaders\";\nimport { isPreFetch } from \"../utils/isPreFetch\";\nimport validateState from \"../utils/validateState\";\n\n/**\n *\n * @param {RouterClient} routerClient\n */\nexport const register = async (routerClient: RouterClient) => {\n  const headers = await getHeaders(routerClient.req);\n  if (isPreFetch(headers)) {\n    return null;\n  }\n\n  const authUrl = await routerClient.kindeClient.register(\n    routerClient.sessionManager,\n    {\n      authUrlParams: Object.fromEntries(routerClient.searchParams),\n    },\n  );\n\n  const postLoginRedirectURL = routerClient.getSearchParam(\n    \"post_login_redirect_url\",\n  );\n\n  if (postLoginRedirectURL) {\n    routerClient.sessionManager.setSessionItem(\n      \"post_login_redirect_url\",\n      postLoginRedirectURL,\n    );\n  }\n\n  const passedState = routerClient.searchParams.get(\"state\");\n\n  if (passedState) {\n    if (!validateState(passedState)) {\n      throw new Error(\"Invalid state supplied\");\n    }\n\n    routerClient.sessionManager.setSessionItem(\"state\", passedState);\n  }\n\n  return routerClient.redirect(authUrl.toString());\n};\n","import { jwtDecoder } from \"@kinde/jwt-decoder\";\nimport { KindeAccessToken, KindeIdToken } from \"../../types\";\nimport { config } from \"../config/index\";\nimport { generateUserObject } from \"../utils/generateUserObject\";\nimport { validateToken } from \"@kinde/jwt-validator\";\nimport { refreshTokens } from \"../utils/refreshTokens\";\nimport { getAccessToken } from \"../utils/getAccessToken\";\nimport RouterClient from \"../routerClients/RouterClient\";\nimport { getIdToken } from \"../utils/getIdToken\";\nimport { isTokenExpired } from \"../utils/jwt/validation\";\nimport { sessionManager } from \"../session/sessionManager\";\nimport { kindeClient } from \"../session/kindeServerClient\";\n\n/**\n *\n * @param {RouterClient} routerClient\n * @returns\n */\nexport const setup = async (routerClient: RouterClient) => {\n  try {\n    let accessTokenEncoded = await getAccessToken(routerClient.req);\n    let idTokenEncoded = await getIdToken(routerClient.req);\n\n    if (!accessTokenEncoded || !idTokenEncoded) {\n      if (config.isDebugMode) {\n        console.log(\"setup: no access or id token - returning NOT_LOGGED_IN\");\n      }\n      return routerClient.json(\n        {\n          message: \"NOT_LOGGED_IN\",\n        },\n        { status: 200 },\n      );\n    }\n\n    const session = await sessionManager(routerClient.req);\n\n    if (isTokenExpired(accessTokenEncoded) || isTokenExpired(idTokenEncoded)) {\n      if (config.isDebugMode) {\n        console.log(\"setup: access or id token expired - attempting refresh\");\n      }\n      try {\n        const refreshResponse = await kindeClient.refreshTokens(session);\n        accessTokenEncoded = refreshResponse.access_token;\n        idTokenEncoded = refreshResponse.id_token;\n      } catch (error) {\n        if (config.isDebugMode) {\n          console.error(\"setup: refresh tokens failed - returning error\");\n        }\n        return routerClient.json(\n          { message: \"REFRESH_FAILED\", error },\n          { status: 500 },\n        );\n      }\n    }\n\n    let accessToken: KindeAccessToken | null = null;\n    let idToken: KindeIdToken | null = null;\n\n    try {\n      accessToken = jwtDecoder<KindeAccessToken>(accessTokenEncoded);\n    } catch (error) {\n      if (config.isDebugMode) {\n        console.error(\n          \"setup: access token decode failed, redirecting to login\",\n        );\n      }\n      return routerClient.json(\n        { message: \"ACCESS_TOKEN_DECODE_FAILED\", error },\n        { status: 500 },\n      );\n    }\n\n    try {\n      idToken = jwtDecoder<KindeIdToken>(idTokenEncoded);\n    } catch (error) {\n      if (config.isDebugMode) {\n        console.error(\"setup: id token decode failed, redirecting to login\");\n      }\n      return routerClient.json(\n        { message: \"ID_TOKEN_DECODE_FAILED\", error },\n        { status: 500 },\n      );\n    }\n\n    if (!accessToken || !idToken) {\n      return routerClient.json(\n        { message: \"TOKENS_MISSING\", error: \"No access or id token\" },\n        { status: 500 },\n      );\n    }\n\n    const permissions = accessToken.permissions;\n\n    const organization = accessToken.org_code;\n    const featureFlags = accessToken.feature_flags;\n    const userOrganizations = idToken.org_codes;\n    const orgName = accessToken.org_name;\n    const orgProperties = accessToken.organization_properties;\n    const orgNames = idToken.organizations;\n\n    if (!accessToken.permissions || !idToken.org_codes) {\n      return routerClient.json(\n        { message: \"MISSING_REQUIRED_CLAIMS\" },\n        { status: 500 },\n      );\n    }\n\n    return routerClient.json({\n      accessToken,\n      accessTokenEncoded,\n      accessTokenRaw: accessTokenEncoded,\n      idToken,\n      idTokenRaw: idTokenEncoded,\n      idTokenEncoded,\n      user: generateUserObject(idToken, accessToken),\n      permissions: {\n        permissions,\n        orgCode: organization,\n      },\n      needsRefresh: false,\n      message: \"OK\",\n      organization: {\n        orgCode: organization,\n        orgName,\n        properties: {\n          city: orgProperties?.kp_org_city?.v,\n          industry: orgProperties?.kp_org_industry?.v,\n          postcode: orgProperties?.kp_org_postcode?.v,\n          state_region: orgProperties?.kp_org_state_region?.v,\n          street_address: orgProperties?.kp_org_street_address?.v,\n          street_address_2: orgProperties?.kp_org_street_address_2?.v,\n        },\n      },\n      featureFlags,\n      userOrganizations: {\n        orgCodes: userOrganizations,\n        orgs: orgNames?.map((org) => ({\n          code: org?.id,\n          name: org?.name,\n        })),\n      },\n    });\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\"setup: failed, error: \", error);\n    }\n\n    return routerClient.json(\n      {\n        message: \"SETUP_FAILED\",\n        error,\n      },\n      { status: 500 },\n    );\n  }\n};\n","import RouterClient from \"../routerClients/RouterClient\";\nimport { isPreFetch } from \"../utils/isPreFetch\";\nimport { getHeaders } from \"../utils/getHeaders\";\nimport validateState from \"../utils/validateState\";\n\n/**\n *\n * @param {RouterClient} routerClient\n */\nexport const login = async (routerClient: RouterClient) => {\n  const headers = await getHeaders(routerClient.req);\n  if (isPreFetch(headers)) {\n    return null;\n  }\n\n  const passedState = routerClient.searchParams.get(\"state\");\n\n  if (passedState) {\n    if (!validateState(passedState)) {\n      throw new Error(\"Invalid state supplied\");\n    }\n\n    routerClient.sessionManager.setSessionItem(\"state\", passedState);\n  }\n\n  const authUrl = await routerClient.kindeClient.login(\n    routerClient.sessionManager,\n    {\n      authUrlParams: Object.fromEntries(routerClient.searchParams),\n    },\n  );\n\n  const postLoginRedirectURL = routerClient.getSearchParam(\n    \"post_login_redirect_url\",\n  );\n\n  if (postLoginRedirectURL) {\n    routerClient.sessionManager.setSessionItem(\n      \"post_login_redirect_url\",\n      postLoginRedirectURL,\n    );\n  }\n\n  return routerClient.redirect(authUrl.toString());\n};\n","import { config } from \"../config/index\";\nimport RouterClient from \"../routerClients/RouterClient\";\nimport { isPreFetch } from \"../utils/isPreFetch\";\nimport { getHeaders } from \"../utils/getHeaders\";\n\n/**\n *\n * @param {RouterClient} routerClient\n */\nexport const logout = async (routerClient: RouterClient) => {\n  const headers = await getHeaders(routerClient.req);\n  if (isPreFetch(headers)) {\n    return null;\n  }\n\n  const authUrl = await routerClient.kindeClient.logout(\n    routerClient.sessionManager,\n  );\n\n  let postLogoutRedirectURL =\n    routerClient.getSearchParam(\"post_logout_redirect_url\") ||\n    config.postLogoutRedirectURL;\n  if (postLogoutRedirectURL?.startsWith(\"/\")) {\n    postLogoutRedirectURL = config.redirectURL + postLogoutRedirectURL;\n  }\n  if (postLogoutRedirectURL) {\n    authUrl.searchParams.set(\"redirect\", postLogoutRedirectURL);\n  }\n\n  return routerClient.redirect(authUrl.toString());\n};\n","import { config } from \"../config/index\";\nimport RouterClient from \"../routerClients/RouterClient\";\n\nexport const callback = async (routerClient: RouterClient) => {\n  const postLoginRedirectURLFromMemory =\n    (await routerClient.sessionManager.getSessionItem(\n      \"post_login_redirect_url\",\n    )) as string;\n\n  if (postLoginRedirectURLFromMemory) {\n    await routerClient.sessionManager.removeSessionItem(\n      \"post_login_redirect_url\",\n    );\n  }\n\n  const postLoginRedirectURL = postLoginRedirectURLFromMemory\n    ? postLoginRedirectURLFromMemory\n    : config.postLoginRedirectURL;\n  try {\n    await routerClient.kindeClient.handleRedirectToApp(\n      routerClient.sessionManager,\n      routerClient.getUrl(),\n    );\n  } catch (error) {\n    if (config.isDebugMode) {\n      console.error(\"callback\", error);\n    }\n\n    if (error.message.includes(\"Expected: State not found\")) {\n      return routerClient.json(\n        {\n          error:\n            `Error: State not found.\\nTo resolve this error please visit our docs https://docs.kinde.com/developer-tools/sdks/backend/nextjs-sdk/#state-not-found-error` +\n            error.message,\n        },\n        { status: 500 },\n      );\n    }\n\n    return routerClient.json({ error: error.message }, { status: 500 });\n  }\n\n  // Compile regex once at startup\n  const compiledRegex = (() => {\n    if (!config.postLoginAllowedURLRegex) {\n      return null;\n    }\n    try {\n      return new RegExp(config.postLoginAllowedURLRegex);\n    } catch (error) {\n      console.error(\"Invalid postLoginAllowedURLRegex pattern:\", error);\n      throw new Error(\n        `Invalid postLoginAllowedURLRegex pattern: ${error.message}`,\n      );\n    }\n  })();\n\n  const isRedirectAllowed = (url: string) => {\n    if (!config.postLoginAllowedURLRegex) {\n      return true;\n    }\n    return compiledRegex!.test(url);\n  };\n\n  const state = (await routerClient.sessionManager.getSessionItem(\n    \"state\",\n  )) as string;\n  await routerClient.sessionManager.removeSessionItem(\"state\");\n\n  if (postLoginRedirectURL && isRedirectAllowed(postLoginRedirectURL)) {\n    const url = postLoginRedirectURL.startsWith('http')\n\t\t\t? new URL(postLoginRedirectURL)\n\t\t\t: new URL(postLoginRedirectURL, routerClient.clientConfig.siteUrl);\n    state && url.searchParams.set(\"state\", state);\n    return routerClient.redirect(url.toString());\n  }\n\n  const url = new URL(routerClient.clientConfig.siteUrl);\n  state && url.searchParams.set(\"state\", state);\n  return routerClient.redirect(url.toString());\n};\n","import kinde from \"../session/index\";\nimport { redirect } from \"next/navigation\";\nimport { NextResponse } from \"next/server\";\nimport { routes } from \"../config\";\n\n/**\n * Redirects to the authentication URL with optional parameters.\n * @param {Object} params - The redirect parameters\n * @param {string} [params.postLoginRedirectURL] - The URL to redirect to after login\n * @param {string} [params.orgCode] - The organization code\n * @throws {Error} If KINDE_SITE_URL is not configured\n */\nconst redirectToAuth = ({ postLoginRedirectURL, orgCode }) => {\n  // Validate inputs\n  if (postLoginRedirectURL && typeof postLoginRedirectURL !== \"string\") {\n    throw new TypeError(\"postLoginRedirectURL must be a string\");\n  }\n  if (orgCode && typeof orgCode !== \"string\") {\n    throw new TypeError(\"orgCode must be a string\");\n  }\n\n  const params = new URLSearchParams();\n  let paramsObj = {};\n  const kindeSiteUrl = process.env.KINDE_SITE_URL;\n  if (!kindeSiteUrl) {\n    throw new Error(\"KINDE_SITE_URL environment variable is not configured\");\n  }\n\n  if (orgCode != null) paramsObj.org_code = orgCode;\n  if (postLoginRedirectURL != null) {\n    if (postLoginRedirectURL?.startsWith(\"/\")) {\n      postLoginRedirectURL = `${kindeSiteUrl}${postLoginRedirectURL}`;\n    }\n    try {\n      // Validate URL construction\n      new URL(postLoginRedirectURL);\n    } catch (e) {\n      throw new Error(`Invalid postLoginRedirectURL: ${postLoginRedirectURL}`);\n    }\n    paramsObj.post_login_redirect_url = postLoginRedirectURL;\n  }\n\n  for (const key in paramsObj) params.append(key, paramsObj[key]);\n\n  const authUrl = new URL(\n    `${kindeSiteUrl}/api/auth/${routes.login}?${params.toString()}`,\n  );\n\n  redirect(authUrl.toString());\n};\n\n/**\n * A higher-order function that wraps a page component and adds protection logic.\n * @param {import('react').ReactNode} page - The page component to be protected.\n * @param {Object} config - The configuration options for the protection logic.\n * @param {string} config.postLoginRedirectURL - The redirect URL after the user logs in.\n * @param {string} config.orgCode - The organization code for multi-tenant applications.\n * @param {string[]} config.roles - The required role(s) for accessing the protected page.\n * @param {string|string[]} config.permissions - The required permission(s) for accessing the protected page.\n\n * @returns {Function} - The protected page component.\n */\n\nexport const protectPage =\n  (Page, config = {}) =>\n  async (props) => {\n    const { isAuthenticated, getPermission, getPermissions, getRoles } =\n      kinde();\n\n    const isSignedIn = await isAuthenticated();\n\n    if (!isSignedIn) {\n      redirectToAuth(config);\n    }\n\n    if (config.roles) {\n      const roles = await getRoles();\n      if (!roles) redirectToAuth(config);\n      const roleNames = new Set(roles.map((r) => r.name));\n      if (!config.roles.some((role) => roleNames.has(role))) {\n        redirectToAuth(config);\n      }\n    }\n\n    if (typeof config.permissions === \"string\") {\n      const hasPermission = await getPermission(config.permissions);\n      if (!hasPermission) {\n        redirectToAuth(config);\n      }\n    }\n\n    if (Array.isArray(config.permissions)) {\n      const permissions = await getPermissions();\n      if (\n        !config.permissions.some((permission) =>\n          permissions.includes(permission),\n        )\n      ) {\n        redirectToAuth(config);\n      }\n    }\n\n    return Page(props);\n  };\n\n/**\n * Protects a Next.js API route handler with authentication and authorization.\n * @param {Function} handler - The Next.js API route handler.\n * @param {Object} config - The configuration object.\n * @param {string[]} config.roles - The required role(s) for accessing the protected page.\n * @param {string|string[]} config.permissions - The required permission(s) for accessing the protected page.\n * @returns {Function} - The protected API route handler.\n */\n\nexport const protectApi = (handler, config) => async (req) => {\n  const { isAuthenticated, getPermission, getPermissions, getRoles } = kinde();\n  try {\n    const isSignedIn = await isAuthenticated();\n\n    if (!isSignedIn) {\n      return NextResponse.json({ statusCode: 401, message: \"Unauthorized\" });\n    }\n\n    if (config.roles) {\n      const roles = await getRoles();\n      if (!roles)\n        return NextResponse.json({ statusCode: 401, message: \"Unauthorized\" });\n      const roleNames = new Set(roles.map((r) => r.name));\n      if (!config.roles.some((role) => roleNames.has(role))) {\n        return NextResponse.json({ statusCode: 401, message: \"Unauthorized\" });\n      }\n    }\n\n    if (typeof config.permissions === \"string\") {\n      const hasPermission = await getPermission(config.permissions);\n      if (!hasPermission) {\n        return NextResponse.json({ statusCode: 403, message: \"Forbidden\" });\n      }\n    }\n\n    if (Array.isArray(config.permissions)) {\n      const permissions = await getPermissions();\n      if (\n        !config.permissions.some((permission) =>\n          permissions.includes(permission),\n        )\n      ) {\n        return NextResponse.json({ statusCode: 403, message: \"Forbidden\" });\n      }\n    }\n  } catch (error) {\n    console.error(\"Error protecting page\", error);\n    return null;\n  }\n\n  return handler(req);\n};\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","_","label","sent","trys","ops","g","create","Iterator","verb","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","ar","l","Array","slice","concat","SuppressedError","removeTrailingSlash","url","trim","endsWith","KINDE_SITE_URL","process","env","KINDE_POST_LOGIN_ALLOWED_URL_REGEX","KINDE_AUTH_API_PATH","NEXT_PUBLIC_KINDE_AUTH_API_PATH","KINDE_POST_LOGIN_REDIRECT_URL","KINDE_POST_LOGIN_URL_REDIRECT_URL","KINDE_POST_LOGOUT_REDIRECT_URL","KINDE_ISSUER_URL","KINDE_CLIENT_ID","KINDE_CLIENT_SECRET","KINDE_AUDIENCE","KINDE_COOKIE_DOMAIN","KINDE_SCOPE","config","isDebugMode","KINDE_DEBUG_MODE","apiPath","initialState","accessToken","idToken","isAuthenticated","isLoading","organization","permissions","user","userOrganizations","getAccessToken","getBooleanFlag","getClaim","getFlag","getIdToken","getIntegerFlag","getOrganization","getPermission","getPermissions","getStringFlag","getToken","getUser","getUserOrganizations","refreshData","SESSION_PREFIX","redirectURL","postLoginRedirectURL","postLoginAllowedURLRegex","issuerURL","clientID","clientSecret","postLogoutRedirectURL","audience","split","cookieDomain","responseType","codeChallengeMethod","redirectRoutes","callback","issuerRoutes","logout","login","register","token","profile","clientOptions","authDomain","clientId","logoutRedirectURL","frameworkVersion","scope","grantType","validateRoute","route","test","routes","KINDE_AUTH_LOGIN_ROUTE","KINDE_AUTH_LOGOUT_ROUTE","KINDE_AUTH_REGISTER_ROUTE","createOrg","KINDE_AUTH_CREATEORG_ROUTE","health","KINDE_AUTH_HEALTH_ROUTE","setup","KINDE_AUTH_SETUP_ROUTE","isAppRouter","req","Request","TWENTY_NINE_DAYS","GLOBAL_COOKIE_OPTIONS","sameSite","httpOnly","secure","NODE_ENV","path","COOKIE_LIST","MAX_COOKIE_LENGTH","splitString","str","match","RegExp","sessionManager","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","cookieStore","_cookieStore","wrap","_context","prev","cookies","abrupt","appRouterSessionManager","pageRouterSessionManager","t0","stop","_x","_x2","getSessionItem","itemKey","item","get","itemValue","index","key","String","has","jsonValue","JSON","parse","_typeof","err","error","console","setSessionItem","getAll","map","c","name","forEach","startsWith","undefined","itemValueString","stringify","set","_objectSpread","maxAge","domain","removeSessionItem","destroySession","some","substr","getHeader","isArray","toString","cookie","serialize","setHeader","_toConsumableArray","filter","keys","isTokenExpired","decodedToken","jwtDecoder","exp","Date","now","validateToken","_b","jwtValidator","_c","valid","log","iss","_a","warn","error_1","redirectOnExpiredToken","redirect","getAccessTokenFactory","kindeClient","createKindeServerClient","GrantType","AUTHORIZATION_CODE","getFlagFactory","code","defaultValue","flagType","_flag$t","tokenFeatureFlags","tokenHasuraFeatureFlags","featureFlags","flag","isDefault","response","t1","getClaimValue","t2","t3","Error","FlagDataType","is_default","type","t4","message","includes","_x3","getBooleanFlagFactory","tokenKey","getIdTokenFactory","getIntegerFlagFactory","getOrgProperty","orgIdTokenProperties","organization_properties","orgAccessTokenProperties","idValue","accessValue","generateOrganizationObject","orgCode","org_code","orgName","org_name","properties","city","industry","postcode","state_region","street_address","street_address_2","getOrganizationFactory","idTokenString","getPermissionFactory","permission","isGranted","t5","getPermissionsFactory","hasuraPermissions","t6","t7","t8","getStringFlagFactory","generateUserObject","id","sub","email","family_name","given_name","picture","username","preferred_username","phone_number","user_properties","cityObj","kp_usr_city","industryObj","kp_usr_industry","isMarketingOptInObj","jobTitleObj","kp_usr_job_title","middleNameObj","kp_usr_middle_name","postcodeObj","salutationObj","kp_usr_salutation","stateRegionObj","kp_usr_state_region","streetAddressObj","streetAddress2Obj","kp_usr_street_address_2","rest_1","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","sanitizedRest","reduce","acc","is_marketing_opt_in","job_title","middle_name","salutation","getUserFactory","rawToken","debug","getUserOrganizationsFactory","session","_d","userOrgs","orgNames","hasuraOrgCodes","hasuraOrganizations","orgCodes","orgs","org","isAuthenticatedFactory","Boolean","getAccessTokenRawFactory","getIdTokenRawFactory","getRolesFactory","roles","hasuraRoles","getClaimFactory","claim","kindeClaim","kinde","_this","refreshTokens","getIdTokenRaw","getAccessTokenRaw","getRoles","getSplitCookies","cookieName","cookieValue","options","handleMiddleware","onSuccess","pathname","nextUrl","isReturnToCurrentPage","loginPage","callbackPage","registerPage","NextResponse","publicPaths","loginRedirectUrl","isPublicPath","kindeAccessToken","kindeIdToken","URL","redirectURLBase","refreshResponse","resp","access_token","id_token","setCookies","ResponseCookies","headers","newReqHeaders","Headers","newReqCookies","RequestCookies","request","copyCookiesToRequest","accessTokenValue","idTokenValue","customValidationValid","isAuthorized","callbackResult_1","withAuth","args","_i","middleware_1","options_1","kindeAuth","RegisterLink","children","authUrlParams","props","_objectWithoutProperties","_excluded","params","URLSearchParams","paramsObj","post_login_redirect_url","append","React","createElement","_extends","href","LoginLink","_postLoginRedirectURL","host","window","location","origin","authUrl","LogoutLink","CreateOrgLink","createKindeManagementAPIClient","apiToken","cfg","usersApi","oauthApi","subscribersApi","organizationsApi","connectedAppsApi","featureFlagsApi","environmentsApi","permissionsApi","rolesApi","businessApi","industriesApi","timezonesApi","applicationsApi","callbacksApi","apisApi","fetch","method","grant_type","client_id","client_secret","json","Configuration","basePath","Accept","UsersApi","OAuthApi","SubscribersApi","OrganizationsApi","ConnectedAppsApi","FeatureFlagsApi","EnvironmentsApi","PermissionsApi","RolesApi","BusinessApi","IndustriesApi","TimezonesApi","ApplicationsApi","CallbacksApi","APIsApi","validateState","passedState","isPreFetch","getHeaders","import","validateClientSecret","RouterClient","_createClass","_classCallCheck","_defineProperty","constructor","data","status","AppRouterClient","_options$config","_options$config2","_options$config3","_options$config4","_options$config5","_options$config6","_options$config7","_options$config8","_callSuper","clientConfig","framework","postLogoutRedirectUrl","siteUrl","searchParams","onErrorCallback","onError","_inherits","_createStore","Response","PagesRouterClient","routeMap","routerClient","getSearchParam","is_create_org","fromEntries","accessTokenEncoded","_g","idTokenEncoded","feature_flags","org_codes","orgProperties","organizations","accessTokenRaw","idTokenRaw","needsRefresh","kp_org_city","kp_org_industry","kp_org_postcode","kp_org_state_region","_e","kp_org_street_address","_f","kp_org_street_address_2","error_2","postLoginRedirectURLFromMemory","handleRedirectToApp","getUrl","compiledRegex","isRedirectAllowed","state","url_1","getRoute","endpoint","auth","appRouterHandler","_handler","pagesRouterHandler","_callee2","_context2","createStore","_x4","_x5","_ref2","_callee3","_context3","query","end","_x6","_x7","_x8","redirectToAuth","kindeSiteUrl","protectPage","Page","_kinde","roleNames","Set","r","role","protectApi","handler","_ref3","_kinde2","statusCode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BO,IAAIA,IAAW;IAQlB,OAPAA,IAAWC,OAAOC,MAAAA,IAAU,SAAkBC,CAAAA;QAC1C,IAAK,IAAIC,GAAGC,IAAI,GAAGC,IAAIC,UAAUC,MAAAA,EAAQH,IAAIC,GAAGD,IAE5C,IAAK,IAAII,KADTL,IAAIG,SAAAA,CAAUF,EAAAA,CACOJ,OAAOS,SAAAA,CAAUC,cAAAA,CAAeC,IAAAA,CAAKR,GAAGK,MAAAA,CAAIN,CAAAA,CAAEM,EAAAA,GAAKL,CAAAA,CAAEK,EAAAA;QAE9E,OAAON;IACV,GACMH,EAASa,KAAAA,CAAMC,IAAAA,EAAMP;AAChC;AA0EO,SAASQ,EAAUC,CAAAA,EAASC,CAAAA,EAAYC,CAAAA,EAAGC,CAAAA;IAE9C,OAAO,IAAA,CAAKD,KAAAA,CAAMA,IAAIE,OAAAA,CAAAA,EAAU,SAAUC,CAAAA,EAASC,CAAAA;QAC/C,SAASC,EAAUC,CAAAA;YAAS,IAAA;gBAAMC,EAAKN,EAAUO,IAAAA,CAAKF;YAAU,EAAC,OAAOG,GAAAA;gBAAKL,EAAOK;YAAI;QAAE;QAC1F,SAASC,EAASJ,CAAAA;YAAS,IAAA;gBAAMC,EAAKN,EAAiB,KAAA,CAAEK;YAAU,EAAC,OAAOG,GAAAA;gBAAKL,EAAOK;YAAI;QAAE;QAC7F,SAASF,EAAKI,CAAAA;YAJlB,IAAeL;YAIaK,EAAOC,IAAAA,GAAOT,EAAQQ,EAAOL,KAAAA,IAAAA,CAJ1CA,IAIyDK,EAAOL,KAAAA,EAJhDA,aAAiBN,IAAIM,IAAQ,IAAIN,EAAE,SAAUG,CAAAA;gBAAWA,EAAQG;YAAQ,EAAA,EAIjBO,IAAAA,CAAKR,GAAWK;QAAW;QAC7GH,EAAAA,CAAMN,IAAYA,EAAUN,KAAAA,CAAMG,GAASC,KAAc,EAAA,CAAA,EAAKS,IAAAA;IAClE;AACJ;AAEO,SAASM,EAAYhB,CAAAA,EAASiB,CAAAA;IACjC,IAAsGC,GAAGC,GAAGhC,GAAxGiC,IAAI;QAAEC,OAAO;QAAGC,MAAM;YAAa,IAAW,IAAPnC,CAAAA,CAAE,EAAA,EAAQ,MAAMA,CAAAA,CAAE,EAAA;YAAI,OAAOA,CAAAA,CAAE;QAAK;QAAEoC,MAAM,EAAA;QAAIC,KAAK,EAAA;IAAA,GAAeC,IAAIxC,OAAOyC,MAAAA,CAAAA,CAA4B,cAAA,OAAbC,WAA0BA,WAAW1C,MAAAA,EAAQS,SAAAA;IACtL,OAAO+B,EAAEf,IAAAA,GAAOkB,EAAK,IAAIH,EAAS,KAAA,GAAIG,EAAK,IAAIH,EAAU,MAAA,GAAIG,EAAK,IAAsB,cAAA,OAAXC,UAAAA,CAA0BJ,CAAAA,CAAEI,OAAOC,QAAAA,CAAAA,GAAY;QAAa,OAAOhC;IAAO,CAAA,GAAG2B;;IAC1J,SAASG,EAAKtC,CAAAA;QAAK,OAAO,SAAUyC,CAAAA;YAAK,OACzC,SAAcC,CAAAA;gBACV,IAAId,GAAG,MAAM,IAAIe,UAAU;gBAC3B,MAAOR,KAAAA,CAAMA,IAAI,GAAGO,CAAAA,CAAG,EAAA,IAAA,CAAOZ,IAAI,CAAA,CAAA,GAAKA,GAAAA,IAAAA;oBACnC,IAAIF,IAAI,GAAGC,KAAAA,CAAMhC,IAAY,IAAR6C,CAAAA,CAAG,EAAA,GAASb,EAAU,MAAA,GAAIa,CAAAA,CAAG,EAAA,GAAKb,EAAS,KAAA,IAAA,CAAA,CAAOhC,IAAIgC,EAAU,MAAA,KAAMhC,EAAES,IAAAA,CAAKuB,IAAI,CAAA,IAAKA,EAAET,IAAAA,KAAAA,CAAAA,CAAWvB,IAAIA,EAAES,IAAAA,CAAKuB,GAAGa,CAAAA,CAAG,EAAA,CAAA,EAAKlB,IAAAA,EAAM,OAAO3B;oBAE3J,OADIgC,IAAI,GAAGhC,KAAAA,CAAG6C,IAAK;wBAAS,IAARA,CAAAA,CAAG,EAAA;wBAAQ7C,EAAEqB,KAAAA;qBAAAA,GACzBwB,CAAAA,CAAG,EAAA;wBACP,KAAK;wBAAG,KAAK;4BAAG7C,IAAI6C;4BAAI;wBACxB,KAAK;4BAAc,OAAXZ,EAAEC,KAAAA,IAAgB;gCAAEb,OAAOwB,CAAAA,CAAG,EAAA;gCAAIlB,MAAAA,CAAM;4BAAA;wBAChD,KAAK;4BAAGM,EAAEC,KAAAA,IAASF,IAAIa,CAAAA,CAAG,EAAA,EAAIA,IAAK;gCAAC;6BAAA;4BAAI;wBACxC,KAAK;4BAAGA,IAAKZ,EAAEI,GAAAA,CAAIU,GAAAA,IAAOd,EAAEG,IAAAA,CAAKW,GAAAA;4BAAO;wBACxC;4BACI,IAAA,CAAA,CAAM/C,IAAIiC,EAAEG,IAAAA,EAAAA,CAAMpC,IAAIA,EAAEK,MAAAA,GAAS,KAAKL,CAAAA,CAAEA,EAAEK,MAAAA,GAAS,EAAA,KAAkB,MAAVwC,CAAAA,CAAG,EAAA,IAAsB,MAAVA,CAAAA,CAAG,EAAA,GAAW;gCAAEZ,IAAI;gCAAG;4BAAU;4BAC3G,IAAc,MAAVY,CAAAA,CAAG,EAAA,IAAA,CAAA,CAAc7C,KAAM6C,CAAAA,CAAG,EAAA,GAAK7C,CAAAA,CAAE,EAAA,IAAM6C,CAAAA,CAAG,EAAA,GAAK7C,CAAAA,CAAE,EAAA,GAAM;gCAAEiC,EAAEC,KAAAA,GAAQW,CAAAA,CAAG,EAAA;gCAAI;4BAAO;4BACrF,IAAc,MAAVA,CAAAA,CAAG,EAAA,IAAYZ,EAAEC,KAAAA,GAAQlC,CAAAA,CAAE,EAAA,EAAI;gCAAEiC,EAAEC,KAAAA,GAAQlC,CAAAA,CAAE,EAAA,EAAIA,IAAI6C;gCAAI;4BAAO;4BACpE,IAAI7C,KAAKiC,EAAEC,KAAAA,GAAQlC,CAAAA,CAAE,EAAA,EAAI;gCAAEiC,EAAEC,KAAAA,GAAQlC,CAAAA,CAAE,EAAA,EAAIiC,EAAEI,GAAAA,CAAIW,IAAAA,CAAKH;gCAAK;4BAAO;4BAC9D7C,CAAAA,CAAE,EAAA,IAAIiC,EAAEI,GAAAA,CAAIU,GAAAA,IAChBd,EAAEG,IAAAA,CAAKW,GAAAA;4BAAO;oBAAA;oBAEtBF,IAAKf,EAAKrB,IAAAA,CAAKI,GAASoB;gBAC3B,EAAC,OAAOT,GAAAA;oBAAKqB,IAAK;wBAAC;wBAAGrB;qBAAAA,EAAIQ,IAAI;gBAAG,CAAU,QAAA;oBAAED,IAAI/B,IAAI;gBAAG;gBACzD,IAAY,IAAR6C,CAAAA,CAAG,EAAA,EAAQ,MAAMA,CAAAA,CAAG,EAAA;gBAAI,OAAO;oBAAExB,OAAOwB,CAAAA,CAAG,EAAA,GAAKA,CAAAA,CAAG,EAAA,GAAA,KAAK;oBAAQlB,MAAAA,CAAM;gBAAA;YAC9E,CAtBgDL,CAAK;gBAACnB;gBAAGyC;aAAAA;QAAM;IAAE;AAuBrE;AA+DO,SAASK,EAAcC,CAAAA,EAAIC,CAAAA,EAAMC,CAAAA;IACpC,IAAIA,KAA6B,MAArBhD,UAAUC,MAAAA,EAAc,IAAK,IAA4BgD,GAAxBnD,IAAI,GAAGoD,IAAIH,EAAK9C,MAAAA,EAAYH,IAAIoD,GAAGpD,IAAAA,CACxEmD,KAAQnD,KAAKiD,KAAAA,CACRE,KAAAA,CAAIA,IAAKE,MAAMhD,SAAAA,CAAUiD,KAAAA,CAAM/C,IAAAA,CAAK0C,GAAM,GAAGjD,EAAAA,GAClDmD,CAAAA,CAAGnD,EAAAA,GAAKiD,CAAAA,CAAKjD,EAAAA;IAGrB,OAAOgD,EAAGO,MAAAA,CAAOJ,KAAME,MAAMhD,SAAAA,CAAUiD,KAAAA,CAAM/C,IAAAA,CAAK0C;AACtD;AA2GkD,cAAA,OAApBO,mBAAiCA;ACxUxD,SAASC,EAAoBC,CAAAA;IAClC,IAAIA,QAAAA,GAQJ,OAAA,CANAA,IAAMA,EAAIC,IAAAA,EAAAA,EAEFC,QAAAA,CAAS,QAAA,CACfF,IAAMA,EAAIJ,KAAAA,CAAM,GAAA,CAAG,EAAA,GAGdI;AACT;ACJA,IA2BMG,IAAiBJ,EAAoBK,QAAQC,GAAAA,CAAIF,cAAAA,GAEjDG,KACJF,QAAQC,GAAAA,CAAIC,kCAAAA,EAGRC,KACJR,EAAoBK,QAAQC,GAAAA,CAAIG,+BAAAA,KAChCT,EAAoBK,QAAQC,GAAAA,CAAIE,mBAAAA,KAChC,aAEIE,KACJV,EAAoBK,QAAQC,GAAAA,CAAII,6BAAAA,KAChCV,EAAoBK,QAAQC,GAAAA,CAAIK,iCAAAA,GAC5BC,KAAiCZ,EACrCK,QAAQC,GAAAA,CAAIM,8BAAAA,GAGRC,KAAmBb,EAAoBK,QAAQC,GAAAA,CAAIO,gBAAAA,GACnDC,KAAkBT,QAAQC,GAAAA,CAAIQ,eAAAA,EAC9BC,KAAsBV,QAAQC,GAAAA,CAAIS,mBAAAA,EAClCC,KAAiBX,QAAQC,GAAAA,CAAIU,cAAAA,EAC7BC,KAAsBjB,EAC1BK,QAAQC,GAAAA,CAAIW,mBAAAA,GAERC,KAAcb,QAAQC,GAAAA,CAAIY,WAAAA,IAAe,gCA2ClCC,KAAiB;IAC5BC,aA1CmD,WAAjCf,QAAQC,GAAAA,CAAIe,gBAAAA;IA2C9BC,SAASd;IACTe,cAlGmB;QACnBC,aAAa;QACbC,SAAS;QACTC,iBAAAA,CAAiB;QACjBC,WAAAA,CAAW;QACXC,cAAc;QACdC,aAAa,EAAA;QACbC,MAAM;QACNC,mBAAmB,EAAA;QACnBC,gBAAgB;YAAM,OAAA;QAAI;QAC1BC,gBAAgB;YAAM,OAAA;QAAI;QAC1BC,UAAU;YAAM,OAAA;QAAI;QACpBC,SAAS;YAAM,OAAA;QAAI;QACnBC,YAAY;YAAM,OAAA;QAAI;QACtBC,gBAAgB;YAAM,OAAA;QAAI;QAC1BC,iBAAiB;YAAM,OAAA;QAAI;QAC3BC,eAAe;YAAM,OAAA;QAAI;QACzBC,gBAAgB;YAAM,OAAA,EAAE;;QACxBC,eAAe;YAAM,OAAA;QAAI;QACzBC,UAAU;YAAM,OAAA;QAAI;QACpBC,SAAS;YAAM,OAAA;QAAI;QACnBC,sBAAsB;YAAM,OAAA;QAAI;QAChCC,aAAa;YAAM,OAAA;QAAI;IAAA;IA6EvBC,gBA1EqB;IA2ErBC,aAAa3C;IACb4C,sBAAsBtC;IACtBuC,0BAA0B1C;IAC1B2C,WAAWrC;IACXsC,UAAUrC;IACVsC,cAAcrC;IACdsC,uBAAuBzC;IACvB0C,UAAUtC,KAAiBA,GAAeuC,KAAAA,CAAM,OAAO;IACvDC,cAAcvC;IACdwC,cAAc;IACdC,qBAAqB;IACrBC,gBAAgB;QACdC,UAAU,GAAG9D,MAAAA,CAAAU,IAAoC;IAAA;IAEnDqD,cAAc;QACZC,QAAQ;QACRC,OAAO;QACPC,UAAU;QACVC,OAAO;QACPC,SAAS;IAAA;IAEXC,eAAe;QACbb,UAAUtC,KAAiBA,GAAeuC,KAAAA,CAAM,OAAO;QACvDa,YAAYvD,MAAoB;QAChCwD,UAAUvD,MAAmB;QAC7BsC,cAAcrC,MAAuB;QACrCuD,mBAAmB1D,MAAkC;QACrDmC,aAAa,GAAAjD,MAAAA,CAAGM,GAAcN,MAAAA,CAAGU,IAAoC;QACrE+D,kBCrImB;QDsInBC,OAAOtD;IAAAA;IAETuD,WAAW;AAAA,GAGPC,KAAgB,SAACC,CAAAA;IACrB,OAAOA,KAAS,mBAAmBC,IAAAA,CAAKD,KAASA,IAAQ;AAC3D,GAEaE,KAOT;IACFd,OAAOW,GAAcrE,QAAQC,GAAAA,CAAIwE,sBAAAA,KAA2B;IAC5DhB,QAAQY,GAAcrE,QAAQC,GAAAA,CAAIyE,uBAAAA,KAA4B;IAC9Df,UAAUU,GAAcrE,QAAQC,GAAAA,CAAI0E,yBAAAA,KAA8B;IAClEC,WACEP,GAAcrE,QAAQC,GAAAA,CAAI4E,0BAAAA,KAA+B;IAC3DC,QAAQT,GAAcrE,QAAQC,GAAAA,CAAI8E,uBAAAA,KAA4B;IAC9DC,OAAOX,GAAcrE,QAAQC,GAAAA,CAAIgF,sBAAAA,KAA2B;AAAA,GE9JjDC,KAAc,SAACC,CAAAA;IAC1B,OAAOA,aAAeC;AACxB,GCAaC,KAAmB,SAEnBC,KAAiD;IAC5DC,UAAU;IACVC,UAAAA,CAAU;IACVC,QAAiC,eAAzBzF,QAAQC,IAAIyF;IACpBC,MAAM;AAAA,GAGKC,KAAc;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CAAA,EAGWC,KAAoB,KCtBpBC,KAAc,SAACC,CAAAA,EAAa1J,CAAAA;IAIvC,OAAO0J,EAAIC,KAAAA,CAAM,IAAIC,OAAO,OAAAxG,MAAAA,CAAOpD,GAAM,MAAK,SAAS;AACzD,GCaa6J,KAAc;IAAA,IAAAC,IAAAC,EAAAC,IAAAC,IAAAA,CAAG,SAAAC,EAAOpB,CAAAA,EAAKqB,CAAAA;QAAG,IAAAC,GAAAC;QAAA,OAAAL,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,IAAAqJ,EAAAC,IAAAA,GAAA,GAEpC1B,GAAG;wBAAAyB,EAAArJ,IAAAA,GAAA;wBAAA;oBAAA;oBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,6LACoBuJ;gBAAS,KAAA;oBAAlB,OAAXL,IAAWG,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAAA,UACVC,GAAwBP;gBAAY,KAAA;oBAAA,IAAA,CAGzCvB,GAAYC,IAAI;wBAAAyB,EAAArJ,IAAAA,GAAA;wBAAA;oBAAA;oBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,kLACQuJ,WAAAA,EAAQ3B,GAAKqB;gBAAI,KAAA;oBAA1B,OAAXC,IAAWG,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAAA,UACVC,GAAwBP;gBAAY,KAAA;oBAAA,OAAAG,EAAAG,MAAAA,CAAA,UAEpCE,GAAyB9B,GAAKqB;gBAAI,KAAA;oBAAAI,EAAArJ,IAAAA,GAAA;oBAAA;gBAAA,KAAA;oBAAA,MAAAqJ,EAAAC,IAAAA,GAAA,IAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAAAA,EAAAM,EAAAA;gBAAA,KAAA;gBAAA,KAAA;oBAAA,OAAAN,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ,GAAA,MAAA;YAAA;gBAAA;gBAAA;aAAA;SAAA;IAAA;IAK9C,OAAA,SAhB0Ba,CAAAA,EAAAC,CAAAA;QAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;IAAA;AAAA,CAAA,IAuBd4K,KAA0B,SAACP,CAAAA;IAAW,OAAM;QAMvDa,gBAAgB,SAACC,CAAAA;YACf,IAAMC,IAAOf,EAAYgB,GAAAA,CAAIF;YAC7B,IAAA,CAAKC,GAAM,OAAO;YAClB,IAAA;gBAIE,IAHA,IAAIE,IAAY,IACZC,IAAQ,GACRC,IAAGnI,GAAAA,MAAAA,CAAMoI,OAAON,IAAQ9H,MAAAA,CAAa,MAAVkI,IAAc,KAAKA,IAC3ClB,EAAYqB,GAAAA,CAAIF,IACrBF,KAAajB,EAAYgB,GAAAA,CAAIG,GAAKvK,KAAAA,EAClCsK,KACAC,IAAAA,GAAGnI,MAAAA,CAAMoI,OAAON,IAAQ9H,MAAAA,CAAa,MAAVkI,IAAc,KAAKA;gBAEhD,IAAA;oBACE,IAAMI,IAAYC,KAAKC,KAAAA,CAAMP;oBAC7B,IAAyB,aAArBQ,EAAOH,IACT,OAAOA;gBAEV,EAAC,OAAOI,GAAAA,CAAK;gBACd,OAAOT;YACR,EAAC,OAAOU,GAAAA;gBAGP,OAFItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,4CAA4CA,IACrDZ,EAAKnK;YACd;QACD;QAODiL,gBAAgB,SAACf,CAAAA,EAASG,CAAAA;YASxB,IARAjB,EACG8B,MAAAA,GACAC,GAAAA,CAAI,SAACC,CAAAA;gBAAC,OAAKA,EAAEC;YAAI,GACjBC,OAAAA,CAAQ,SAACf,CAAAA;gBACJA,EAAIgB,UAAAA,CAAU,GAAAnJ,MAAAA,CAAIoI,OAAON,QAC3Bd,EAAW,MAAA,CAAQmB;YAEvB,IAAA,KACgBiB,MAAdnB,GAAyB;gBAC3B,IAAMoB,IACiB,aAArBZ,EAAOR,KAAyBM,KAAKe,SAAAA,CAAUrB,KAAaA;gBAC9D5B,GAAYgD,GAAiBjD,IAAmB8C,OAAAA,CAC9C,SAACtL,CAAAA,EAAOsK,CAAAA;oBACNlB,EAAYuC,GAAAA,CAAIzB,IAAAA,CAAqB,MAAVI,IAAc,KAAKA,CAAAA,GAAQtK,GAAK4L,EAAA;wBACzDC,QAAQ7D;wBACR8D,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;oBAAAA,GACjDvD;gBAEP;YAEJ;QACD;QAMD8D,mBAAmB,SAAC7B,CAAAA;YAClBd,EACG8B,MAAAA,GACAC,GAAAA,CAAI,SAACC,CAAAA;gBAAC,OAAKA,EAAEC;YAAI,GACjBC,OAAAA,CAAQ,SAACf,CAAAA;gBACJA,EAAIgB,UAAAA,CAAU,GAAAnJ,MAAAA,CAAIoI,OAAON,QAC3Bd,EAAW,MAAA,CAAQmB;YAEvB;QACH;QAIDyB,gBAAgB;YACd5C,EACG8B,MAAAA,GACAC,GAAAA,CAAI,SAACC,CAAAA;gBAAC,OAAKA,EAAEC;YAAI,GACjBC,OAAAA,CAAQ,SAACf,CAAAA;gBACJhC,GAAY0D,IAAAA,CAAK,SAACC,CAAAA;oBAAM,OAAK3B,EAAIgB,UAAAA,CAAWW;gBAAO,MACrD9C,EAAYuC,GAAAA,CAAIpB,GAAK,IAAEqB,EAAA;oBACrBE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;oBACpDK,QAAQ;gBAAA,GACL5D;YAGT;QACJ;IAAA;AACD,GAQY2B,KAA2B,SAAC9B,CAAAA,EAAKqB,CAAAA;IAC5C,OAAO;QAMLc,gBAAgB,SAACC,CAAAA;YACf,IAAMG,IAAYvC,EAAI2B,OAAAA,CAAQS,EAAAA;YAC9B,IAAKG,GACL,IAAA;gBAIE,IAHA,IAAIoB,IAAkB,IAClBnB,IAAQ,GACRC,IAAGnI,GAAAA,MAAAA,CAAMoI,OAAON,IAAQ9H,MAAAA,CAAa,MAAVkI,IAAc,KAAKA,IAC3CxC,EAAI2B,OAAAA,CAAQc,EAAAA,EACjBkB,KAAmB3D,EAAI2B,OAAAA,CAAQc,EAAAA,EAC/BD,KACAC,IAAAA,GAAGnI,MAAAA,CAAMoI,OAAON,IAAQ9H,MAAAA,CAAa,MAAVkI,IAAc,KAAKA;gBAEhD,IAAA;oBACE,IAAMI,IAAYC,KAAKC,KAAAA,CAAMa;oBAC7B,IAAyB,aAArBZ,EAAOH,IACT,OAAOA;gBAEV,EAAC,OAAOI,GAAAA;oBACHrH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,iCAAiCD;gBACnD;gBACA,OAAOW;YACR,EAAC,OAAOV,GAAAA;gBAGP,OAFItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,gCAAgCA,IACzCV;YACT;QACD;QAQDY,gBAAgB,SAACf,CAAAA,EAASG,CAAAA;YACxB,IAAIZ,IAAAA,CAAUN,QAAAA,IAAAA,KAAG,IAAHA,EAAKgD,SAAAA,CAAU,aAAA,KAAiB,EAAA;YAgB9C,IAdKjK,MAAMkK,OAAAA,CAAQ3C,MAAAA,CACjBA,IAAU;gBAACA,EAAQ4C,QAAAA;aAAAA,GAAAA,KAGQb,MAAzB1D,EAAI2B,OAAAA,CAAQS,EAAAA,IACdT,EAAQ9H,IAAAA,qJACN2K,EAAOC,UAAAA,EAAUrC,GAAS,IAAE0B,EAAA;gBAC1BE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;gBACpDK,QAAAA,CAAQ;YAAA,GACL5D,OAAAA,KAKSuD,MAAdnB,GAAyB;gBAC3B,IAAMoB,IACiB,aAArBZ,EAAOR,KAAyBM,KAAKe,SAAAA,CAAUrB,KAAaA;gBAE9DlB,QAAAA,KAAAA,EAAKqD,SAAAA,CACH,cAAY,EAAA,CAAApK,MAAAA,CAAAqK,EAENhD,EAAQiD,MAAAA,CAAO,SAACJ,CAAAA;oBAAM,OAAA,CAAMA,EAAOf,UAAAA,CAAAA,GAAUnJ,MAAAA,CAAI8H;gBAAU,MAC7D,EAAA,GAAEuC,EACDhE,GAAYgD,GAAiBjD,IAAmB2C,GAAAA,CACjD,SAACnL,CAAAA,EAAOsK,CAAAA;oBACN,0JAAOgC,EAAOC,WAAAA,EACZrC,IAAAA,CAAqB,MAAVI,IAAc,KAAKA,CAAAA,GAC9BtK,GAAK4L,EAAAA,EAAA;wBAEHE,QAAQrI,GAAOqC,YAAAA,GACXrC,GAAOqC,YAAAA,GAAAA,KACP0F;oBAAAA,GACDvD,KAAqB,CAAA,GAAA;wBACxB4D,QAAQ7D;oBAAAA;gBAGd,MACD4D,EAAAA,EAAA;oBAGDE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;gBAAAA,GACjDvD,KAAqB,CAAA,GAAA;oBACxB4D,QAAQ7D;gBAAAA;YAGd;QACD;QAMD+D,mBAAmB,SAAC7B,CAAAA;YAClB,IAAIT,IAAAA,CAAUN,QAAAA,IAAAA,KAAG,IAAHA,EAAKgD,SAAAA,CAAU,aAAA,KAAiB,EAAA;YACzCjK,MAAMkK,OAAAA,CAAQ3C,MAAAA,CACjBA,IAAU;gBAACA,EAAQ4C,QAAAA;aAAAA,GAAAA,KAGQb,MAAzB1D,EAAI2B,OAAAA,CAAQS,EAAAA,IACdT,EAAQ9H,IAAAA,qJACN2K,EAAOC,UAAAA,EAAUrC,GAAS,IAAE0B,EAAA;gBAC1BE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;gBACpDK,QAAAA,CAAQ;YAAA,GACL5D,OAKTkB,QAAAA,KAAAA,EAAKqD,SAAAA,CAAU,cAAYC,EACtBhD,EAAQ0B,GAAAA,CAAI,SAACC,CAAAA;gBACd,OAAIA,EAAEG,UAAAA,CAAU,GAAAnJ,MAAAA,CAAI8H,0JACXoC,EAAOC,UAAAA,EAAUnB,EAAEvF,KAAAA,CAAM,IAAA,CAAK,EAAA,EAAI,IAAE+F,EAAA;oBACzCE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;oBACpDK,QAAAA,CAAQ;gBAAA,GACL5D,OAGEmD;YAEV;QAEJ;QAEDY,gBAAgB;YACd,IAAIvC,IAAAA,CAAUN,QAAAA,IAAAA,KAAG,IAAHA,EAAKgD,SAAAA,CAAU,aAAA,KAAiB,EAAA;YACzCjK,MAAMkK,OAAAA,CAAQ3C,MAAAA,CACjBA,IAAU;gBAACA,EAAQ4C,QAAAA;aAAAA,GAGrBlD,QAAAA,KAAAA,EAAKqD,SAAAA,CAAU,cAAYC,EACtBhO,OAAOkO,IAAAA,CAAK7E,EAAI2B,OAAAA,EAAS0B,GAAAA,CAAI,SAACC,CAAAA;gBAC/B,IAAI7C,GAAY0D,IAAAA,CAAK,SAACC,CAAAA;oBAAM,OAAKd,EAAEG,UAAAA,CAAWW;gBAAO,IACnD,OAAOI,EAAOC,8JAAAA,EAAUnB,EAAEvF,KAAAA,CAAM,IAAA,CAAK,EAAA,EAAI,IAAE+F,EAAA;oBACzCE,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;oBACpDK,QAAAA,CAAQ;gBAAA,GACL5D;YAGR;QAEL;IAAA;AAEJ,GC1Ra2E,KAAiB,SAACrG,CAAAA;IAC7B,IAAMsG,iMAAeC,EAAWvG;IAEhC,OAAA,CAAA,CAAKsG,QAAAA,IAAAA,KAAA,IAAAA,EAAcE,GAAAA,KAIZF,EAAaE,GAAAA,IAAOF,EAAaE,GAAAA,GAAMC,KAAKC,GAAAA,KAAQ;AAC7D,GAEaC,KAAgB,SAAA,CAAA;IAAA,OAAA,EAAA,KAAA,GAAA;QAAA;KAAA,EAAA,KAAA,GAAA,SAAOC,CAAAA;QAAAA,IAAAA,GAClC5G,IAAK4G,EAAA5G,KAAAA;QAAAA,OAAAA,EAAAA,IAAAA,EAAAA,SAAAA,CAAAA;YAAAA,OAAAA,EAAAA,KAAAA;gBAAAA,KAAAA;oBAIL,OAAKA,KAA0B,YAAA,OAAVA,IAMI;wBAAA;4BAAM6G,gMAAAA,EAAa;4BAC1C7G,OAAKA;4BACLuF,QAAQrI,GAAO+B,SAAAA;wBAAAA;qBAAAA,GAAAA,CAPX/B,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,qDAEhB;wBAAA;wBAAA,CAAO;qBAAA;gBAAA,KAAA;oBAOT,OALyBsC,EAGvBvM,IAAAA,GAEoBwM,KAAAA,GAAAA,CAOhBT,iMAAeC,EAAWvG,IAE5B9C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,qDAAqDnL,MAAAA,CAAAyK,EAAaE,GAAAA,GAAMC,KAAKC,GAAAA,KAAQ,KAAI,cAIzFJ,EAAaW,GAAAA,KAAQ/J,GAAO+B,SAAAA,GAAAA,CAC1B/B,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,kCAEhB;wBAAA;wBAAA,CAAO;qBAAA,IAGT;wBAAA;wBAAA,CAAO;qBAAA,IAAA,CArBDtH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,iCAEhB;wBAAA;wBAAA,CAAO;qBAAA;YAAA;QAAA;IAAA;AAmBV,GCjDYzG,KAAiB,SAC5BwD,CAAAA,EACAqB,CAAAA;IAAoC,OAAA5J,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAGlB,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAMsJ,GAAef,GAAKqB;qBAAAA;gBAAAA,KAAAA;oBAC5B,OAAA;wBAAA;wBADEsE,EAA8B3M,IAAAA,GAClBmJ,cAAAA,CAAe;qBAAA;gBAAA,KAAA;oBAE3C,OAAA,CAFM1D,IAAQkH,EAA4C3M,IAAAA,EAAAA,KAE3B,YAAA,OAAVyF,IASA;wBAAA;wBAAM2G,GAAc;4BACvC3G,OAAKA;wBAAAA;qBAAAA,GAAAA,CATD9C,GAAOC,WAAAA,IACTsH,QAAQ0C,IAAAA,CACN,2EAGJ;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAOT,OAJqBD,EAEnB3M,IAAAA,KAQF;wBAAA;wBAAOyF;qBAAAA,GAAAA,CALD9C,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,kCAEhB;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAOT,OAAA,IAAA,EAAA,IAAA,IAHItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,kBAAkB4C,IAElC;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAAA,OAAA;wBAAA;qBAAA;YAAA;QAAA;IAAA;AAEV,GCzBYC,KAAyB,SAACrH,CAAAA;IACjC9C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,uDAEThH,IAMAqG,GAAerG,KAAAA,CAQhB9C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,qQAGJM,EAAS,GAAGzL,MAAAA,CAAAqB,GAAOG,OAAAA,EAAW,KAAAxB,MAAAA,CAAA+E,GAAOd,KAAAA,EAAAA,IAZ/B5C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,mEARA9J,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI;AAkBlB,GCtBaO,KAAwB,SAAChG,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,IAAApF;QAAA,OAAAkF,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAArJ,IAAAA,GAAA,GAErBoE,GAAewD,GAAKqB;gBAAI,KAAA;oBAMd,OAN9BrF,IAAWyF,EAAAzI,IAAAA,EACb2C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,gEAGJK,GAAuB9J,IAAayF,EAAAG,MAAAA,CAAAA,UAC7BoD,6LAAAA,EAAWhJ;gBAAY,KAAA;oBAI7B,OAJ6ByF,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAE1B9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAM,EAAAA,GACdN,EAAAG,MAAAA,CAAA,UACM;gBAAI,KAAA;gBAAA,KAAA;oBAAA,OAAAH,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ,GAAA,MAAA;YAAA;gBAAA;gBAAA;aAAA;SAAA;IAAA;AAEd,GC3BY6E,2NAAcC,0BAAAA,kNACzBC,YAAAA,CAAUC,kBAAAA,EACVzK,GAAOgD,aAAAA,GCUI0H,KACX,SAACrG,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOkF,CAAAA,EAAMC,CAAAA,EAAcC,CAAAA;YAAQ,IAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;YAAA,OAAA7F,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAEF,OAFEqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAEbkE,IAAWxE,EAAArJ,IAAAA,GAAA,GACnC2I,GAAef,GAAKqB;oBAAI,KAAA;wBAAA,OAAAI,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAM,EAAAA,CADYkF,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA,EAEvD,iBACA;oBAAc,KAAA;wBAEiC,OAL3CN,IAAiBjF,EAAAzI,IAAAA,EAAAyI,EAAAyF,EAAAA,GAKejB,IAAWxE,EAAArJ,IAAAA,GAAA,IACzC2I,GAAef,GAAKqB;oBAAI,KAAA;wBAAA,OAAAI,EAAA0F,EAAAA,GAAA1F,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAAAqJ,EAAAyF,EAAAA,CADkBD,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAAyF,EAAAA,EAAAzF,EAAA0F,EAAAA,EAE7D,0BACA;oBAAc,KAAA;wBAQe,IAXzBR,IAAuBlF,EAAAzI,IAAAA,EAMvB4N,IAAY9C,EAAAA,EACb4C,CAAAA,GAAAA,IACAC,IAAAA,CAGCE,IAAOD,CAAAA,CAAaN,EAAAA,KAAAA,KAEI5C,MAAjB6C,GAA0B;4BAAA9E,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,MAC/B,IAAIgP,MAAK,QAAA9M,MAAAA,CACLgM,GAAAA;oBACT,KAAA;wBAAA,IAGCO,QAAAA,KAAAA,CAAAA,EAAMhQ,CAAAA,IAAAA,CAAK2P,KAAYA,MAAAA,CAAaK,QAAAA,IAAAA,KAAAA,IAAAA,EAAMhQ,CAAAA,GAAC;4BAAA4K,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,MACvC,IAAIgP,MAAK9M,QAAAA,MAAAA,CACLgM,GAAI,gBAAAhM,MAAAA,0MAAe+M,gBAAAA,CAAaR,EAAKhQ,CAAAA,CAAAA,EAAE,uBAAAyD,MAAAA,2MAC7C+M,eAAAA,CAAab,EAAAA;oBAEhB,KAAA;wBAUF,OAPKM,IAAAA,KAAwBpD,MAAAA,CAAZmD,QAAAA,IAAAA,KAAAA,IAAAA,EAAMpN,CAAAA,GAClBsN,IAAW;4BACfO,YAAYR;4BACZ5O,OAAAA,KAAmBwL,MAAAA,CAAZmD,QAAAA,IAAAA,KAAAA,IAAAA,EAAMpN,CAAAA,IAAkB8M,IAAeM,QAAAA,IAAAA,KAAAA,IAAAA,EAAMpN,CAAAA;4BACpD6M,MAAAA;4BACAiB,MAAAA,CAAAA,CAAMT,+MAAYO,eAAAA,CAAAA,SAAAA,CAAYZ,IAACI,QAAAA,IAAAA,KAAI,IAAJA,EAAMhQ,CAAAA,KAAAA,KAAC,MAAA4P,IAAAA,IAAID,EAAAA;4BAC1CD,cAAAA;wBAAAA,GACD9E,EAAAG,MAAAA,CAAA,UAEMmF;oBAAQ,KAAA;wBAAA,IAAAtF,EAAAC,IAAAA,GAAA,IAAAD,EAAA+F,EAAAA,GAAA/F,EAAA,KAAA,CAAA,IAAA,CAGXA,EAAA+F,EAAAA,CAAMC,OAAAA,CAAQC,QAAAA,CAAS,uCAAqC;4BAAAjG,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,MAAAqJ,EAAA+F,EAAAA;oBAAA,KAAA;wBAAA,OAAA/F,EAAAG,MAAAA,CAGzD,UAAA;4BAAE1J,OAAOqO;wBAAAA;oBAAc,KAAA;oBAAA,KAAA;wBAAA,OAAA9E,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEjC,OAAA,SAAAa,CAAAA,EAAAC,CAAAA,EAAAyF,CAAAA;YAAA,OAAA3G,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAnDQ;AAmDR,GCtDU2Q,KACX,SAAC5H,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOkF,CAAAA,EAAMC,CAAAA;YAAY,IAAAM;YAAA,OAAA3F,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAAA,OAAAqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAArJ,IAAAA,GAAA,GAEhBiO,GAAerG,GAAKqB,EAApBgF,CAAyBC,GAAMC,GAAc;oBAAI,KAAA;wBAA1D,OAAJM,IAAIpF,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CACHiF,UAAAA,EAAK3O,KAAAA;oBAAK,KAAA;wBAIhB,OAJgBuJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAEb9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAM,EAAAA,GACdN,EAAAG,MAAAA,CAAA,UACM;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAH,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEd,OAAAa,SAAAA,CAAAA,EAAAC,CAAAA;YAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAVQ;AAUR,GCrBU2F,KAAa,SACxBoD,CAAAA,EACAqB,CAAAA;IAAqB,OAAA5J,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAEfoQ,IAAW,YAAA,EAAA,KAAA,GAAA;gBAAA,KAAA;oBAEC,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAM9G,GAAef,GAAKqB;qBAAAA;gBAAAA,KAAAA;oBAC5B,OAAA;wBAAA;wBADEsE,EAA8B3M,IAAAA,GAClBmJ,cAAAA,CAAe0F;qBAAAA;gBAAAA,KAAAA;oBAE3C,OAAA,CAFMpJ,IAAQkH,EAAsC3M,IAAAA,EAAAA,KAErB,YAAA,OAAVyF,IASA;wBAAA;wBAAM2G,GAAc;4BACvC3G,OAAKA;wBAAAA;qBAAAA,GAAAA,CATD9C,GAAOC,WAAAA,IACTsH,QAAQ0C,IAAAA,CACN,uEAGJ;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAOT,OAJqBD,EAEnB3M,IAAAA,KASF;wBAAA;wBAAOyF;qBAAAA,GAAAA,CAND9C,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,8BAEhB;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAQT,OAAA,IAAA,EAAA,IAAA,IAHItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,cAAc4C,IAE9B;wBAAA;wBAAO;qBAAA;gBAAA,KAAA;oBAAA,OAAA;wBAAA;qBAAA;YAAA;QAAA;IAAA;AAEV,GCvBYiC,KAAoB,SAAC9H,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,IAAA3C;QAAA,OAAAyC,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAArJ,IAAAA,GAAA,GAEvBwE,GAAWoD,GAAKqB;gBAAI,KAAA;oBAIV,OAJxB5C,IAAKgD,EAAAzI,IAAAA,EACP2C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,4DAEdK,GAAuBrH,IAAOgD,EAAAG,MAAAA,CAAAA,cACvBoD,yLAAAA,EAAWvG;gBAAM,KAAA;oBAIvB,OAJuBgD,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAEpB9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAM,EAAAA,GACdN,EAAAG,MAAAA,CAAA,UACM;gBAAI,KAAA;gBAAA,KAAA;oBAAA,OAAAH,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ,GAAA,MAAA;YAAA;gBAAA;gBAAA;aAAA;SAAA;IAAA;AAEd,GCjBY2G,KACX,SAAC/H,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOkF,CAAAA,EAAMC,CAAAA;YAAY,IAAAM;YAAA,OAAA3F,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAAA,OAAAqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAArJ,IAAAA,GAAA,GAEhBiO,GAAerG,GAAKqB,EAApBgF,CAAyBC,GAAMC,GAAc;oBAAI,KAAA;wBAA1D,OAAJM,IAAIpF,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CACHiF,UAAAA,EAAK3O,KAAAA;oBAAK,KAAA;wBAIhB,OAJgBuJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAEb9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAM,EAAAA,GACdN,EAAAG,MAAAA,CAAA,UACM;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAH,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEd,OAAAa,SAAAA,CAAAA,EAAAC,CAAAA;YAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAVQ;AAUR,GCjBG+Q,KAAiB,SACrBvF,CAAAA,EACAxG,CAAAA,EACAD,CAAAA;IAAAA,IAAAA,GAAAA,GAEMiM,IACJhM,EAAQiM,uBAAAA,IACRjM,CAAAA,CAAQ,mCAAA,IACR,CAAE,GACEkM,IACJnM,EAAYkM,uBAAAA,IACZlM,CAAAA,CAAY,mCAAA,IACZ,CAAE,GACEoM,IAAiD,SAAA,CAAvCzC,IAAAsC,CAAAA,CAAqB,UAAU3N,MAAAA,CAAAmI,GAAAA,KAAAA,KAAQ,MAAAkD,IAAAA,KAAA,IAAAA,EAAAlM,CAAAA,EACjD4O,IAAyD,SAAA,CAA3ChD,IAAA8C,CAAAA,CAAyB,UAAU7N,MAAAA,CAAAmI,GAAAA,KAAAA,KAAQ,MAAA4C,IAAAA,KAAA,IAAAA,EAAA5L,CAAAA;IAC/D,OAAO2O,KAAWC;AACpB,GAEaC,KAA6B,SACxCrM,CAAAA,EACAD,CAAAA;IAEA,IAAMuM,IAAUvM,EAAYwM,QAAAA,IAAYxM,CAAAA,CAAY,oBAAA,EAC9CyM,IAAUzM,EAAY0M,QAAAA,IAAY1M,CAAAA,CAAY,oBAAA;IACpD,IAAA,CAAKuM,GACH,MAAM,IAAInB,MAAM;IAGlB,OAAO;QACLmB,SAAOA;QACPE,SAAOA;QACPE,YAAY;YACVC,MAAMZ,GAAe,QAAQ/L,GAASD;YACtC6M,UAAUb,GAAe,YAAY/L,GAASD;YAC9C8M,UAAUd,GAAe,YAAY/L,GAASD;YAC9C+M,cAAcf,GAAe,gBAAgB/L,GAASD;YACtDgN,gBAAgBhB,GAAe,kBAAkB/L,GAASD;YAC1DiN,kBAAkBjB,GAChB,oBACA/L,GACAD;QAAAA;IAAAA;AAIR,GCrCakN,KAAyB,SAAClJ,CAAAA,EAAKqB,CAAAA;IAAQ,OAAA;QAAA,OAAA5J,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;YAAA,IAAA,GAAA,GAAA,GAAA,GAAA;YAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;gBAAA,OAAA,EAAA,KAAA;oBAAA,KAAA;wBAG9C,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;4BAAA;4BAAA;;4BAAA;yBAAA,GAAA;4BAAA;4BAAMsJ,GAAef,GAAKqB;yBAAAA;oBAAAA,KAAAA;wBADN,OAAM;4BAAA;4BAC1BsE,EAAAA,IAAAA,GACAxD,cAAAA,CAAe;yBAAA;oBAAA,KAAA;wBACjB,IAAA,CAAA,CAHMgH,IAAgBxD,EAEM3M,IAAAA,EAAAA,GAE1B,MAAM,IAAIoO,MAAM;wBAIG,OAFfnL,QAAU+I,yLAAAA,EAAyBmE,IAEpB;4BAAA;4BAAM3M,GAAewD,GAAKqB;yBAAAA;oBAAAA,KAAAA;wBAG/C,OAHMrF,IAAe2J,EAAA3M,IAAAA,IACf+L,iMAAeC,EAA6BhJ,IAElD;4BAAA;4BAAOsM,GAA2BrM,GAAS8I;yBAAAA;oBAAAA,KAAAA;wBAK3C,OAAA,IAAA,EAAA,IAAA,IAHIpJ,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM4C,IAEhB;4BAAA;4BAAO;yBAAA;oBAAA,KAAA;wBAAA,OAAA;4BAAA;yBAAA;gBAAA;YAAA;QAEV;IAAA;AAAA,GCrBYuD,KAAuB,SAACpJ,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOmC,CAAAA;YAAI,IAAA8F;YAAA,OAAAnI,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAErB,OAFqBqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAEhCkE,IAAWxE,EAAArJ,IAAAA,GAAA,GAC5B2I,GAAef,GAAKqB;oBAAI,KAAA;wBAC1B,OAD0BI,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAAAyI,EAAAyF,EAAAA,GAC9B3D,GAAI9B,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAM,EAAAA,CAF+BhF,aAAAA,CAAazF,IAAAA,CAAAmK,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA,EAAAvF,EAAAyF,EAAAA;oBAAA,KAAA;wBAAlC,IAAA,CAAVmC,IAAU5H,EAAAzI,IAAAA,EAKAsQ,SAAAA,EAAS;4BAAA7H,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBACoB,OADpBqJ,EAAA0F,EAAAA,GACSlB,IAAWxE,EAAArJ,IAAAA,GAAA,IACnC2I,GAAef,GAAKqB;oBAAI,KAAA;wBAAA,OAAAI,EAAA+F,EAAAA,GAAA/F,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAAAqJ,EAAA0F,EAAAA,CADYF,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAA0F,EAAAA,EAAA1F,EAAA+F,EAAAA,EAEvD;oBAAsB,KAAA;wBAFD,IAAA,CAAA/F,EAAAzI,IAAAA,CAID0O,QAAAA,CAASnE,IAAK;4BAAA9B,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqJ,EAAAG,MAAAA,CAC3B,UAAA;4BAAE0H,WAAAA,CAAW;4BAAMf,SAASc,EAAWd,OAAAA;wBAAAA;oBAAS,KAAA;wBAAA,OAAA9G,EAAAG,MAAAA,CAAA,UAGpDyH;oBAAU,KAAA;wBAIhB,OAJgB5H,EAAAC,IAAAA,GAAA,IAAAD,EAAA8H,EAAAA,GAAA9H,EAAA,KAAA,CAAA,IAEb9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAA8H,EAAAA,GACd9H,EAAAG,MAAAA,CAAA,UACM;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAH,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEd,OAAA,SAAAa,CAAAA;YAAA,OAAAjB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAvB4C;AAuB5C,GCxBYuS,KAAwB,SAACxJ,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,IAAA/E,GAAAoN;QAAA,OAAAvI,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAEV,OAFUqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAErBkE,IAAWxE,EAAArJ,IAAAA,GAAA,GAC7B2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAM,EAAAA,CADM/E,cAAAA,CAAc1F,IAAAA,CAAAmK,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA;gBAAA,KAAA;oBAAnC,IAAA,CAAX3K,IAAWoF,EAAAzI,IAAAA,EAIAqD,WAAAA,EAAW;wBAAAoF,EAAArJ,IAAAA,GAAA;wBAAA;oBAAA;oBACiB,OADjBqJ,EAAAyF,EAAAA,GACMjB,IAAWxE,EAAArJ,IAAAA,GAAA,IACnC2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAA0F,EAAAA,GAAA1F,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAAAqJ,EAAAyF,EAAAA,CADYD,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAAyF,EAAAA,EAAAzF,EAAA0F,EAAAA,EAEvD;gBAAsB,KAAA;oBAKI,OAPtBsC,IAAiBhI,EAAAzI,IAAAA,EAAAyI,EAAA+F,EAAAA,GAMRiC,GAAiBhI,EAAA8H,EAAAA,GACftD,IAAWxE,EAAArJ,IAAAA,GAAA,IAClB2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAAiI,EAAAA,GAAAjI,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAAAqJ,EAAA8H,EAAAA,CADLtC,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAA8H,EAAAA,EAAA9H,EAAAiI,EAAAA,EAEtC;gBAAmB,KAAA;oBAAA,OAAAjI,EAAAkI,EAAAA,GAAAlI,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAA,UAAA;wBAHrBvF,aAAWoF,EAAA+F,EAAAA;wBACXe,SAAO9G,EAAAkI,EAAAA;oBAAAA;gBAAA,KAAA;oBAAA,OAAAlI,EAAAG,MAAAA,CAAA,UAOJvF;gBAAW,KAAA;oBAIjB,OAJiBoF,EAAAC,IAAAA,GAAA,IAAAD,EAAAmI,EAAAA,GAAAnI,EAAA,KAAA,CAAA,IAEd9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAmI,EAAAA,GACdnI,EAAAG,MAAAA,CAAA,UACM;gBAAI,KAAA;gBAAA,KAAA;oBAAA,OAAAH,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ,GAAA,MAAA;YAAA;gBAAA;gBAAA;aAAA;SAAA;IAAA;AAEd,GC5BYyI,KACX,SAAC7J,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOkF,CAAAA,EAAMC,CAAAA;YAAY,IAAAM;YAAA,OAAA3F,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAAA,OAAAqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAArJ,IAAAA,GAAA,GAEhBiO,GAAerG,GAAKqB,EAApBgF,CAAyBC,GAAMC,GAAc;oBAAI,KAAA;wBAA1D,OAAJM,IAAIpF,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CACHiF,UAAAA,EAAK3O,KAAAA;oBAAK,KAAA;wBAIhB,OAJgBuJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAAAN,EAAA,KAAA,CAAA,IAEb9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAAM,EAAAA,GACdN,EAAAG,MAAAA,CAAA,UACM;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAH,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEd,OAAAa,SAAAA,CAAAA,EAAAC,CAAAA;YAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAVQ;AAUR,GCvBU6S,KAAqB,SAChC7N,CAAAA,EACAD,CAAAA;IAEA,IAAMM,IAAsC;QAC1CyN,IAAI9N,EAAQ+N,GAAAA;QACZC,OAAOhO,EAAQgO,KAAAA;QACfC,aAAajO,EAAQiO,WAAAA;QACrBC,YAAYlO,EAAQkO,UAAAA;QACpBC,SAASnO,EAAQmO,OAAAA;QACjBC,UAAUpO,EAAQqO,kBAAAA;QAClBC,cAActO,EAAQsO,YAAAA;IAAAA,GAEpBlJ,IAAM/E,GAEJqM,IAAa1M,EAAQuO,eAAAA,IAAmBxO,EAAYwO,eAAAA;IAE1D,IAAI7B,GAAY;QAEZ,IAAa8B,IAWX9B,EAXkB+B,WAAAA,EACHC,IAUfhC,EAAUiC,eAAAA,EATgBC,IAS1BlC,EAAAA,0BAAAA,EARgBmC,IAQhBnC,EAR2BoC,gBAAAA,EACTC,IAOlBrC,EAAUsC,kBAAAA,EANKC,IAMfvC,EAAAA,eAAAA,EALiBwC,IAKjBxC,EAL8ByC,iBAAAA,EACXC,IAInB1C,EAAU2C,mBAAAA,EAHWC,IAGrB5C,EAAAA,qBAAAA,EAFuB6C,IAEvB7C,EAFwC8C,uBAAAA,EACvCC,IvBUF,SAAgB5U,CAAAA,EAAGuB,CAAAA;YACtB,IAAIxB,IAAI,CAAE;YACV,IAAK,IAAIM,KAAKL,EAAOH,OAAOS,SAAAA,CAAUC,cAAAA,CAAeC,IAAAA,CAAKR,GAAGK,MAAMkB,EAAEsT,OAAAA,CAAQxU,KAAK,KAAA,CAC9EN,CAAAA,CAAEM,EAAAA,GAAKL,CAAAA,CAAEK,EAAAA;YACb,IAAS,QAALL,KAAqD,cAAA,OAAjCH,OAAOiV,qBAAAA,EACtB;gBAAA,IAAI7U,IAAI;gBAAb,IAAgBI,IAAIR,OAAOiV,qBAAAA,CAAsB9U,IAAIC,IAAII,EAAED,MAAAA,EAAQH,IAC3DsB,EAAEsT,OAAAA,CAAQxU,CAAAA,CAAEJ,EAAAA,IAAM,KAAKJ,OAAOS,SAAAA,CAAUyU,oBAAAA,CAAqBvU,IAAAA,CAAKR,GAAGK,CAAAA,CAAEJ,EAAAA,KAAAA,CACvEF,CAAAA,CAAEM,CAAAA,CAAEJ,EAAAA,CAAAA,GAAMD,CAAAA,CAAEK,CAAAA,CAAEJ,EAAAA,CAAAA;YAF4B;YAItD,OAAOF;QACX,CuBpBaiV,CACLnD,GAZE;YAYL;YAAA;YAAA;YAAA;YAAA;YAAA;YAAA;YAAA;YAAA;YAAA;SAAA,GAEKoD,IAAqCpV,OAAOkO,IAAAA,CAAK6G,GAAMM,MAAAA,CAC3D,SAACC,CAAAA,EAAKxJ,CAAAA;YAAAA,IAAAA;YAEJ,OADAwJ,CAAAA,CAAIxJ,EAAAA,GAAkB,SAAA,CAAXkD,IAAA+F,CAAAA,CAAKjJ,EAAAA,KAAAA,KAAM,MAAAkD,IAAAA,KAAA,IAAAA,EAAAlM,CAAAA,EACfwS;QACR,GACD,CAAA;QAEF5K,IAAG3K,EAAAA,EAAA,CAAA,GACE4F,IACH;YAAAqM,YAAAA,EAAAA;gBACEC,MAAM6B,QAAAA,IAAAA,KAAO,IAAPA,EAAShR,CAAAA;gBACfoP,UAAU8B,QAAAA,IAAAA,KAAW,IAAXA,EAAalR,CAAAA;gBACvByS,qBAAqBrB,QAAAA,IAAAA,KAAA,IAAAA,EAAqBpR,CAAAA;gBAC1C0S,WAAWrB,QAAAA,IAAAA,KAAA,IAAAA,EAAarR,CAAAA;gBACxB2S,aAAapB,QAAAA,IAAAA,KAAa,IAAbA,EAAevR,CAAAA;gBAC5BqP,UAAUoC,QAAAA,IAAAA,KAAAA,IAAAA,EAAazR,CAAAA;gBACvB4S,YAAYlB,QAAAA,IAAAA,KAAA,IAAAA,EAAe1R,CAAAA;gBAC3BsP,cAAcsC,QAAAA,IAAAA,KAAc,IAAdA,EAAgB5R,CAAAA;gBAC9BuP,gBAAgBuC,QAAAA,IAAAA,KAAgB,IAAhBA,EAAkB9R,CAAAA;gBAClCwP,kBAAkBuC,QAAAA,IAAAA,KAAA,IAAAA,EAAmB/R,CAAAA;YAAAA,GAClCsS;QAAAA;IAAAA;IAIT,OAAO1K;AACT,GCpDaiL,KACX,SAACtM,CAAAA,EAAqBqB,CAAAA;IACtB,OAAA;QAAA,OAAA5J,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;YAAA,IAAA,GAAA,GAAA,GAAA,GAAA;YAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;gBAAA,OAAA,EAAA,KAAA;oBAAA,KAAA;wBAEqB,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;4BAAA;4BAAA;;4BAAA;yBAAA,GAAA;4BAAA;4BAAMmF,GAAWoD,GAAKqB;yBAAAA;oBAAAA,KAAAA;wBACvC,OAAA,CADMkL,IAAW5G,EAA0B3M,IAAAA,EAAAA,IAAAA,CAIrCiD,oLAAU+I,aAAAA,EAAyBuH,IAErB;4BAAA;4BAAM/P,GAAewD,GAAKqB;yBAAAA,IAJ5C;4BAAA;4BAAO;yBAAA;oBAAA,KAAA;wBAKT,OAAA,CADMrF,IAAc2J,EAA8B3M,IAAAA,EAAAA,IAAAA,CAI5C+L,oLAAeC,aAAAA,EAA6BhJ,IAElD;4BAAA;4BAAO8N,GAAmB7N,GAAS8I;yBAAAA,IAJjC;4BAAA;4BAAO;yBAAA;oBAAA,KAAA;wBAST,OAAA,IAAA,EAAA,IAAA,IAHIpJ,GAAOC,WAAAA,IACTsH,QAAQsJ,KAAAA,CAAM,WAAW3G,IAE3B;4BAAA;4BAAO;yBAAA;oBAAA,KAAA;wBAAA,OAAA;4BAAA;yBAAA;gBAAA;YAAA;QAEV;IAAA;AArBD,GCJW4G,KACX,SAACzM,CAAAA,EAAsBqB,CAAAA;IACvB,OAAA;QAAA,OAAA5J,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;YAAA,IAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA;YAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;gBAAA,OAAA,EAAA,KAAA;oBAAA,KAAA;wBAEoB,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;4BAAA;4BAAA;;4BAAA;yBAAA,GAAA;4BAAA;4BAAMsJ,GAAef,GAAKqB;yBAAAA;oBAAAA,KAAAA;wBACzB,OADXqL,IAAUC,EAA8B3T,IAAAA,IAC7B;4BAAA;4BAAMiN,GAAY7I,oBAAAA,CAAqBsP;yBAAAA;oBAAAA,KAAAA;wBAEpD,OAFEE,IAAWD,EAA+C3T,IAAAA,IAEtD;4BAAA;4BAAAiN,GAAYgB,aAAAA,CAClByF,GACA,iBACA;yBAAA;oBAAA,KAAA;wBAIA,OAREG,IAAAA,SAAAA,CACHlH,IAACgH,EAID3T,IAAAA,EAAAA,KAAAA,KAAAA,MAAAA,IAAAA,IAAwC,EAAA,EAGjC;4BAAA;4BAAAiN,GAAYgB,aAAAA,CAClByF,GACA,sBACA;yBAAA;oBAAA,KAAA;wBAIA,OAREI,IAAAA,SAAAA,CACHzH,IAACsH,EAID3T,IAAAA,EAAAA,KAAAA,KAAAA,MAAAA,IAAAA,IAAkB,EAAA,EAGX;4BAAA;4BAAAiN,GAAYgB,aAAAA,CAClByF,GACA,0BACA;yBAAA;oBAAA,KAAA;wBAEJ,OANMK,IAAAA,SAAAA,CACHxH,IAACoH,EAID3T,IAAAA,EAAAA,KAAAA,KAAAA,MAAAA,IAAAA,IAAwC,EAAA,EACpC;4BAAA;4BAAA;gCACLgU,UAAAA,EAAAA,EAAAA,EAAAA,EAAcJ,EAASI,QAAAA,EAAAA,CAAQ,IAAKF,GAAAA,CAAe;gCACnDG,MAAMnT,EAAAA,EAAA,EAAA,EAAI+S,GAAAA,CAAQ,IAAKE,GAAAA,CAAmB,GAAE1J,GAAAA,CAAI,SAAC6J,CAAAA;oCAAQ,OAAC;wCACxD5G,MAAM4G,QAAAA,IAAAA,KAAA,IAAAA,EAAKnD,EAAAA;wCACXxG,MAAM2J,QAAAA,IAAAA,KAAA,IAAAA,EAAK3J,IAAAA;oCAAAA;gCAAAA;4BAAAA;yBAAAA;oBAAAA,KAAAA;wBAOf,OAAA,IAAA,EAAA,IAAA,IAHI5H,GAAOC,WAAAA,IACTsH,QAAQsJ,KAAAA,CAAM,8BAA8B3G,IAE9C;4BAAA;4BAAO;yBAAA;oBAAA,KAAA;wBAAA,OAAA;4BAAA;yBAAA;gBAAA;YAAA;QAEV;IAAA;AArCD,GCKWsH,KAAyB,SAACnN,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,IAAA3C,GAAAnC;QAAA,OAAA4E,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,GAC9BoE,GAAewD,GAAKqB;gBAAI,KAAA;oBAId,OAJxB5C,IAAKgD,EAAAzI,IAAAA,EACP2C,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,iEAEdK,GAAuBrH,IAAOgD,EAAArJ,IAAAA,GAAA,GACXkU,GAAetM,GAAKqB,EAApBiL;gBAA0B,KAAA;oBAAnC,OAAJhQ,IAAImF,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAA,UACHnD,KAAS2O,QAAQ9Q;gBAAK,KAAA;gBAAA,KAAA;oBAAA,OAAAmF,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ;IAAAA;AAC9B,GCNYiM,KAA2B,SAACrN,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,OAAAF,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,GAChC2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAzI,IAAAA,CAAEmJ,cAAAA,CAAe;gBAAc,KAAA;oBAAA,OAAAV,EAAAG,MAAAA,CAAAH,UAAAA,EAAAzI,IAAAA;gBAAA,KAAA;gBAAA,KAAA;oBAAA,OAAAyI,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ;IAAAA;AAC5E,GCFYkM,KAAuB,SAACtN,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,OAAAF,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,GAC5B2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAzI,IAAAA,CAAEmJ,cAAAA,CAAe;gBAAU,KAAA;oBAAA,OAAAV,EAAAG,MAAAA,CAAAH,UAAAA,EAAAzI,IAAAA;gBAAA,KAAA;gBAAA,KAAA;oBAAA,OAAAyI,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ;IAAAA;AACxE,GCHYmM,KAAkB,SAACvN,CAAAA,EAAKqB,CAAAA;IAAG,OAAAJ,EAAAC,IAAAC,IAAAA,CAAK,SAAAC;QAAA,IAAAoM,GAAAC;QAAA,OAAAvM,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAEV,OAFUqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAErBkE,IAAWxE,EAAArJ,IAAAA,GAAA,GACvB2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAM,EAAAA,CADAkF,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA,EAE3C;gBAAO,KAAA;oBAFE,IAALwG,IAAK/L,EAAAzI,IAAAA,EAKD;wBAAAyI,EAAArJ,IAAAA,GAAA;wBAAA;oBAAA;oBAC6B,OAD7BqJ,EAAAyF,EAAAA,GACkBjB,IAAWxE,EAAArJ,IAAAA,GAAA,IAC7B2I,GAAef,GAAKqB;gBAAI,KAAA;oBAAA,OAAAI,EAAA0F,EAAAA,GAAA1F,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAAAqJ,EAAAyF,EAAAA,CADMD,aAAAA,CAAa3P,IAAAA,CAAAmK,EAAAyF,EAAAA,EAAAzF,EAAA0F,EAAAA,EAEjD;gBAAgB,KAAA;oBAFD,OAAXsG,IAAWhM,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAA,UAKV6L;gBAAW,KAAA;oBAAA,OAAAhM,EAAAG,MAAAA,CAAA,UAGb4L;gBAAK,KAAA;oBAIX,OAJW/L,EAAAC,IAAAA,GAAA,IAAAD,EAAA+F,EAAAA,GAAA/F,EAAA,KAAA,CAAA,IAER9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAA+F,EAAAA,GACd/F,EAAAG,MAAAA,CAAA,UACM;gBAAI,KAAA;gBAAA,KAAA;oBAAA,OAAAH,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ,GAAA,MAAA;YAAA;gBAAA;gBAAA;aAAA;SAAA;IAAA;AAEd,GCpBYsM,KAAkB,SAAC1N,CAAAA,EAAKqB,CAAAA;IAAG,OAAA;QAAA,IAAAL,IAAAC,EAAAC,IAAAC,IAAAA,CAAK,SAAAC,EAAOuM,CAAAA,EAAOpG,CAAAA;YAAI,IAAAqG;YAAA,OAAA1M,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAEvB,OAFuBqJ,EAAAC,IAAAA,GAAA,GAAAD,EAAAM,EAAAA,GAElCkE,IAAWxE,EAAArJ,IAAAA,GAAA,GAC5B2I,GAAef,GAAKqB;oBAAI,KAAA;wBAE1B,OAF0BI,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAAAyI,EAAAyF,EAAAA,GAC9ByG,GAAKlM,EAAA0F,EAAAA,GACLI,GAAI9F,EAAArJ,IAAAA,GAAA,GAAAqJ,EAAAM,EAAAA,CAH+BrF,QAAAA,CAAQpF,IAAAA,CAAAmK,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA,EAAAvF,EAAAyF,EAAAA,EAAAzF,EAAA0F,EAAAA;oBAAA,KAAA;wBAA7B,OAAVyG,IAAUnM,EAAAzI,IAAAA,EAAAyI,EAAAG,MAAAA,CAAA,UAKTgM;oBAAU,KAAA;wBAIhB,OAJgBnM,EAAAC,IAAAA,GAAA,IAAAD,EAAA+F,EAAAA,GAAA/F,EAAA,KAAA,CAAA,IAEb9F,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAKxB,EAAA+F,EAAAA,GACd/F,EAAAG,MAAAA,CAAA,UACM;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAH,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QAEd,OAAAa,SAAAA,CAAAA,EAAAC,CAAAA;YAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAduC;AAcvC;ACVwB,SAAA4W,GAAA7N,CAAAA,EAAsBqB,CAAAA;IAA/C,IAoCCyM,IAAAtW,IAAAA;IAnCC,OAAO;QACLuW,eAAe;YAAA,OAAAtW,EAAAqW,GAAAA,KAAA,GAAA,KAAA,GAAA;gBAAA,IAAA,GAAA,GAAA;gBAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;oBAAA,OAAA,EAAA,KAAA;wBAAA,KAAA;4BAOT,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;gCAAA;gCAAA;;gCAAA;6BAAA,GADqBzI,IAAAA,CAAAM,IAAAM,EAAAA,EAAY8H,aAAAA,EACjC;gCAAA;gCAAMhN,GAAef,GAAKqB;6BAAAA;wBAAAA,KAAAA;4BADX,OAAM;gCAAA;gCAAAgE,EAAA9N,KAAAA,CAAAoO,GAAA;oCACrBJ,EAA8BvM,IAAAA;iCAAAA;6BAAAA;wBAAAA,KAAAA;4BAEhC,OAAA;gCAAA;gCAHiBuM,EAEhBvM,IAAAA;6BAAAA;wBAAAA,KAAAA;4BAMD,OAAA,IAAA,EAAA,IAAA,IAHI2C,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM4C,IAEhB;gCAAA;gCAAO;6BAAA;wBAAA,KAAA;4BAAA,OAAA;gCAAA;6BAAA;oBAAA;gBAAA;YAEV;QAAA;QACDrJ,gBAAgBwJ,GAAsBhG,GAAKqB;QAC3C5E,gBAAgBmL,GAAsB5H,GAAKqB;QAC3C1E,SAAS0J,GAAerG,GAAKqB;QAC7BzE,YAAYkL,GAAkB9H,GAAKqB;QACnC2M,eAAeV,GAAqBtN,GAAKqB;QACzC4M,mBAAmBZ,GAAyBrN,GAAKqB;QACjDxE,gBAAgBkL,GAAsB/H,GAAKqB;QAC3CvE,iBAAiBoM,GAAuBlJ,GAAKqB;QAC7CtE,eAAeqM,GAAqBpJ,GAAKqB;QACzCrE,gBAAgBwM,GAAsBxJ,GAAKqB;QAC3CpE,eAAe4M,GAAqB7J,GAAKqB;QACzClE,SAASmP,GAAetM,GAAKqB;QAC7BjE,sBAAsBqP,GAA4BzM,GAAKqB;QACvDnF,iBAAiBiR,GAAuBnN,GAAKqB;QAC7C6M,UAAUX,GAAgBvN,GAAKqB;QAC/B3E,UAAUgR,GAAgB1N,GAAKqB;IAAAA;AAEnC;AChDO,IAAM8M,KAAkB,SAACC,CAAAA,EAAoBC,CAAAA;IAClD,OAAO1N,GAAY0N,GAAa3N,IAAmB2C,GAAAA,CAAI,SAACnL,CAAAA,EAAOsK,CAAAA;QAC7D,OAAO;YACLe,MAAM6K,IAAAA,CAAwB,MAAV5L,IAAc,KAAKA,CAAAA;YACvCtK,OAAOA;YACPoW,SAAS5X,EAAAA;gBACPqN,QAAQ7D;gBACR8D,QAAQrI,GAAOqC,YAAAA,GAAerC,GAAOqC,YAAAA,GAAAA,KAAe0F;YAAAA,GACjDvD;QAAAA;IAGT;AACF,GCPMoO,KAAmB,SAAOvO,CAAAA,EAAKsO,CAAAA,EAASE,CAAAA;IAAS,OAAA/W,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAQrD,OAPQgX,IAAazO,EAAI0O,OAAAA,CAAAA,QAAAA,EAEnBC,IAAwBL,QAAAA,IAAAA,KAAAA,IAAAA,EAASK,qBAAAA,EACjCC,IAAAA,CAAYN,QAAAA,IAAAA,KAAO,IAAPA,EAASM,SAAAA,KAAa,GAAGtU,MAAAA,CAAAqB,GAAOG,OAAAA,EAAO,KAAAxB,MAAAA,CAAI+E,GAAOd,KAAAA,GAC9DsQ,IAAe,GAAGvU,MAAAA,CAAAqB,GAAOG,OAAAA,EAAAA,oBACzBgT,IAAe,GAAGxU,MAAAA,CAAAqB,GAAOG,OAAAA,EAAAA,KAAAA,MAAAA,CAAWuD,GAAOb,QAAAA,GAG/CoQ,KAAaH,KACbI,KAAgBJ,KAChBK,KAAgBL,IAEhB;wBAAA;sNAAOM,eAAAA,CAAa3W,IAAAA;qBAAAA,GAAAA,CAGlB4W,IAAc;wBAAC;wBAAU;qBAAA,EAAA,KACAtL,MAAAA,CAAzB4K,QAAAA,IAAAA,KAAO,IAAPA,EAASU,WAAAA,KACP5U,MAAMkK,OAAAA,CAAQgK,QAAAA,IAAAA,KAAO,IAAPA,EAASU,WAAAA,KAAAA,CACzBA,IAAcV,EAAQU,WAAAA,GAIpBC,IAAmBN,IACrB,GAAArU,MAAAA,CAAGsU,GAAS,6BAAAtU,MAAAA,CAA4BmU,KACxCG,GAEEM,IAAeF,EAAY7K,IAAAA,CAAK,SAAChN,CAAAA;wBAIrC,OAAU,QAANA,IAA+B,QAAbsX,IACfA,EAAShL,UAAAA,CAAWtM;oBAC7B,IAGuB;wBAAA;wBAAMqF,GAAewD;qBAAAA;gBAAAA,KAAAA;oBAEzB,OAFfmP,IAAmBxJ,EAAyB3M,IAAAA,IAE7B;wBAAA;wBAAM4D,GAAWoD;qBAAAA;gBAAAA,KAAAA;oBAGpC,OAHIoP,IAAezJ,EAAqB3M,IAAAA,IAGlCmW,KAAqBC,KAAkBF,IAW7B;wBAAA;wBAAMnO,GAAef;qBAAAA,GAAAA,CAV/BrE,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,gEAGG;wBAAA;sNAAAsJ,eAAAA,CAAahJ,QAAAA,CAClB,IAAIsJ,IAAIJ,GAAAA,CAAkBX,QAAAA,IAAAA,KAAO,IAAPA,EAASgB,eAAAA,KAAmB3T,GAAO4B,WAAAA;qBAAAA;gBAAAA,KAAAA;oBAAAA,IAI3DmP,IAAU/G,EAAyB3M,IAAAA,IACrCuW,IAAqD,MACnDC,kMAAOT,eAAAA,CAAa3W,IAAAA,IAAAA,CAGtB0M,GAAeqK,MAAAA,CAAqBrK,GAAesK,IAAnD,OAAgE;wBAAA;wBAAA;qBAAA;oBAC9DzT,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,qDAAA,EAAA,KAAA,GAAA;gBAAA,KAAA;oBAIM,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAMQ,GAAY8H,aAAAA,CAAcrB;qBAAAA;gBAAAA,KAAAA;oBAAAA,OAAlD6C,IAAkB5J,EAAAA,IAAAA,IAClBwJ,IAAmBI,EAAgBE,YAAAA,EACnCL,IAAeG,EAAgBG,QAAAA,EAICvB,GAC9B,gBACAoB,EAAgBE,YAAAA,EAEMjM,OAAAA,CAAQ,SAACgB,CAAAA;wBAC/BgL,EAAK7N,OAAAA,CAAQkC,GAAAA,CAAIW,EAAOjB,IAAAA,EAAMiB,EAAOtM,KAAAA,EAAOsM,EAAO8J,OAAAA;oBACrD,IAE4BH,GAC1B,YACAoB,EAAgBG,QAAAA,EAEElM,OAAAA,CAAQ,SAACgB,CAAAA;wBAC3BgL,EAAK7N,OAAAA,CAAQkC,GAAAA,CAAIW,EAAOjB,IAAAA,EAAMiB,EAAOtM,KAAAA,EAAOsM,EAAO8J,OAAAA;oBACrD,IC3F8B,SAACtO,CAAAA,EAAkBqB,CAAAA;wBACrD,IAAMsO,IAAa,8LAAIC,kBAAAA,CAAgBvO,EAAIwO,OAAAA,GACrCC,IAAgB,IAAIC,QAAQ/P,EAAI6P,OAAAA,GAChCG,IAAgB,8LAAIC,iBAAAA,CAAeH;wBACzCH,EAAWvM,MAAAA,GAASI,OAAAA,CAAQ,SAACgB,CAAAA;4BAAW,OAAAwL,EAAcnM,GAAAA,CAAIW;wBAAAA,kMAGzCuK,eAAAA,CAAa3W,IAAAA,CAAK;4BAAE8X,SAAS;gCAAEL,SAASC;4BAAAA;wBAAAA,GAEhDD,OAAAA,CAAQrM,OAAAA,CAAQ,SAACtL,CAAAA,EAAOuK,CAAAA;4BAAAA,CAErB,oCAARA,KACAA,EAAIgB,UAAAA,CAAW,wBAAA,KAEfpC,EAAIwO,OAAAA,CAAQhM,GAAAA,CAAIpB,GAAKvK;wBAEzB;oBACF,CDgFMiY,CAAqBnQ,GAAKwP,IAEtB7T,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,qCAAA;wBAAA;wBAAA;qBAAA;gBAAA,KAAA;oBAUd,OAAA,EAAA,IAAA,IANI9J,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CACN,+DAICiM,IAAAA;wBAAAA;wBAAAA;qBAAAA,GACI;wBAAA;wBAAAH,6MAAAA,CAAahJ,QAAAA,CAClB,IAAIsJ,IACFJ,GAAAA,CACAX,QAAAA,IAAAA,KAAO,IAAPA,EAASgB,eAAAA,KAAmB3T,GAAO4B,WAAAA;qBAAAA;gBAAAA,KAAAA;oBAS7C,IAAI2R,GACF,OAAA;wBAAA;wBAAOM;qBAAAA;oBAGLY,IAA4C,MAC5CC,IAAoC;oBAExC,IAAA;wBACED,iMAAmBpL,EAA6BmK;oBAAAA,EAChD,OAAOlM,GAAAA;wBAMP,OALItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CACN,qEAGG;4BAAA;0NAAA8L,eAAAA,CAAahJ,QAAAA,CAClB,IAAIsJ,IAAIJ,GAAAA,CAAkBX,QAAAA,IAAAA,KAAO,IAAPA,EAASgB,eAAAA,KAAmB3T,GAAO4B,WAAAA;yBAAAA;oBAAAA;oBAIjE,IAAA;wBACE8S,iMAAerL,EAAyBoK;oBAAAA,EACxC,OAAOnM,GAAAA;wBAMP,OALItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CACN,iEAGG;4BAAA;0NAAA8L,eAAAA,CAAahJ,QAAAA,CAClB,IAAIsJ,IAAIJ,GAAAA,CAAkBX,QAAAA,IAAAA,KAAO,IAAPA,EAASgB,eAAAA,KAAmB3T,GAAO4B,WAAAA;yBAAAA;oBAAAA;oBAQ7D,OAAA,CAJE+S,IAAAA,CAAAA,CAAwBhC,QAAAA,IAAAA,KAAA,IAAAA,EAASiC,YAAAA,KACnCjC,EAAQiC,YAAAA,CAAa;wBAAEvQ,KAAGA;wBAAEvB,OAAO2R;oBAAAA,EAAAA,KAGV5B,IAAAA,CACvB7S,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,gDAES;wBAAA;wBAAM+I,EAAU;4BACrC/P,OAAO2R;4BACP9T,MAAM;gCACJ4N,aAAamG,EAAanG,WAAAA;gCAC1BC,YAAYkG,EAAalG,UAAAA;gCACzBF,OAAOoG,EAAapG,KAAAA;gCACpBF,IAAIsG,EAAarG,GAAAA;gCACjBI,SAASiG,EAAajG,OAAAA;4BAAAA;wBAAAA;qBAAAA,IAXU;wBAAA;wBAAA;qBAAA;gBAAA,KAAA;oBAgBpC,OAAA,CAZMoG,IAAiB7K,EASrB3M,IAAAA,EAAAA,2MAG4B+V,eAAAA,GAAAA,CACxBpT,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,sFAIJ+J,EAAK7N,OAAAA,CAAQyB,MAAAA,GAASI,OAAAA,CAAQ,SAACgB,CAAAA;wBAC7BgM,EAAe7O,OAAAA,CAAQkC,GAAAA,CAAIW,EAAOjB,IAAAA,EAAMiB,EAAOtM,KAAAA,EAC1CxB,EAAA,CAAA,GAAA8N;oBAEP,IAGAgL,EAAKK,OAAAA,CAAQrM,OAAAA,CAAQ,SAACtL,CAAAA,EAAOuK,CAAAA;wBAC3B+N,EAAeX,OAAAA,CAAQhM,GAAAA,CAAIpB,GAAKvK;oBAClC,IAEA;wBAAA;wBAAOsY;qBAAAA,IAAAA,CAIL7U,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,yFAIJ;wBAAA;wBAAO+J;qBAAAA;gBAAAA,KAAAA;oBAGT,OAAIc,IAAAA,CACE3U,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CACN,sEAGJ;wBAAA;wBAAO+J;qBAAAA,IAAAA,CAGL7T,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,4DAGP;wBAAA;sNAAAsJ,eAAAA,CAAahJ,QAAAA,CAClB,IAAIsJ,IAAIJ,GAAAA,CAAkBX,QAAAA,IAAAA,KAAO,IAAPA,EAASgB,eAAAA,KAAmB3T,GAAO4B,WAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AAEhE;AAAA,SAMekT;IAAAA,IAAhB,IAsBC3C,IAAAtW,IAAAA,EAtB+BkZ,IAAA,EAAA,EAAAC,IAAA,GAAPA,IAAO1Z,UAAAC,MAAAA,EAAPyZ,IAAAD,CAAAA,CAAOC,EAAAA,GAAA1Z,SAAAA,CAAA0Z,EAAAA;IAE9B,IAAA,CAAKD,EAAKxZ,MAAAA,IAAUwZ,CAAAA,CAAK,EAAA,YAAczQ,SAErC,OAAOsO,GAAoBhX,KAAAA,CAAAA,KAAA,GAAAmZ;IAI7B,IAAuB,cAAA,OAAZA,CAAAA,CAAK,EAAA,EAAmB;QACjC,IAAME,IAAaF,CAAAA,CAAK,EAAA,EAClBG,IAAUH,CAAAA,CAAK,EAAA;QACrB,OAAO;YAAA,IAAO,IAAOA,IAAA,EAAA,EAAAC,IAAA,GAAPA,IAAO1Z,UAAAC,MAAAA,EAAPyZ,IAAAD,CAAAA,CAAOC,EAAAA,GAAA1Z,SAAAA,CAAA0Z,EAAAA;YAAAA,OAAAA,EAAAA,GAAAA,KAAAA,GAAAA,KAAAA,GAAAA;gBAAAA,IAAAA,IAAAA,IAAAA;gBAAAA,OAAAA,EAAAA,IAAAA,EAAAA,SAAAA,CAAAA;oBAAAA,OAAAA,EAAAA,KAAAA;wBAAAA,KAAAA;4BACnB,OAAM;gCAAA;gCAAApC,GAAiBmC,CAAAA,CAAK,EAAA,EAAIG,GAAS,SAAAlL,CAAAA;oCAAA,OAAAlO,EAAAqW,GAAA;wCAAAnI;qCAAAA,EAAAA,KAAA,GAAA,SAAON,CAAAA;wCAAAA,IAAE5G,IAAK4G,EAAA5G,KAAAA,EAAEnC,IAAI+I,EAAA/I,IAAAA;wCAAAA,OAAAA,EAAAA,IAAAA,EAAAA,SAAAA,CAAAA;4CAAAA,OAAAA,EAAAA,KAAAA;gDAAAA,KAAAA;oDAEpD,OADPoU,CAAAA,CAAK,EAAA,CAAGI,SAAAA,GAAY;wDAAErS,OAAKA;wDAAEnC,MAAIA;oDAAAA,GACpB;wDAAA;wDAAAsU,EAAcrZ,KAAAA,CAAAA,KAAA,GAAAmZ;qDAAAA;gDAA3B,KAAA;oDAAA,OAAA;wDAAA;wDAAOnL,EAAAA,IAAAA;qDAAAA;4CAAAA;wCAAAA;oCACR;gCAAA;6BAAA;wBAHD,KAAA;4BAAA,OAAA;gCAAA;gCAAAI,EAAAA,IAAAA;6BAAAA;oBAAAA;gBAAAA;YAAAA;QAGE;IAAA;IAIN,IAAM2I,IAAUoC,CAAAA,CAAK,EAAA;IAErB,OAAO;QAAA,IAAO,IAAOA,IAAA,EAAA,EAAAC,IAAA,GAAPA,IAAO1Z,UAAAC,MAAAA,EAAPyZ,IAAAD,CAAAA,CAAOC,EAAAA,GAAA1Z,SAAAA,CAAA0Z,EAAAA;QAAAA,OAAAA,EAAAA,GAAAA,KAAAA,GAAAA,KAAAA,GAAAA;YAAAA,OAAAA,EAAAA,IAAAA,EAAAA,SAAAA,CAAAA;gBAAAA,OAAAA,EAAAA,KAAAA;oBAAAA,KAAAA;wBAAK,OAAM;4BAAA;4BAAApC,GAAiBmC,CAAAA,CAAK,EAAA,EAAIpC;yBAAAA;oBAAhC,KAAA;wBAAA,OAAA;4BAAA;4BAAA3I,EAAAA,IAAAA;yBAAAA;gBAAAA;YAAAA;QAAAA;IAAwC;AACpE;AAAA,IAAA,KAAA;IAAA;IAAA;IAAA;IAAA;CAAA;AEhPO,SAASoL,GAAY/P,CAAAA;IAMzB,IALDgQ,IAAQhQ,EAARgQ,QAAAA,EACAzI,IAAOvH,EAAPuH,OAAAA,EACA/K,IAAoBwD,EAApBxD,oBAAAA,EACAyT,IAAajQ,EAAbiQ,aAAAA,EACGC,IAAKC,EAAAnQ,GAAAoQ,KAEJC,IAAS,IAAIC,iBACbC,IAAY,CAAE;IAOlB,IAAK,IAAM9O,KANI,QAAX8F,KAAAA,CAAiBgJ,EAAU/I,QAAAA,GAAWD,CAAAA,GACd,QAAxB/K,KAAAA,CACF+T,EAAUC,uBAAAA,GAA0BhU,CAAAA,GAEtC+T,IAASzN,EAAAA,EAAAA,CAAAA,GAAQmN,IAAkBM,GAENF,EAAOI,MAAAA,CAAOhP,GAAK8O,CAAAA,CAAU9O,EAAAA;IAC1D,4LACEiP,WAAAA,CAAAC,aAAAA,CAAA,KAAAC,EAAA;QACEC,MAAI,GAAAvX,MAAAA,CAAKqB,GAAOG,OAAAA,EAAOxB,KAAAA,MAAAA,CAAI+E,GAAOb,QAAAA,EAAQlE,MAAAA,CACxC+W,IAAM,IAAA/W,MAAAA,CAAO+W,EAAO9M,QAAAA,MAAe;IAAA,GAEjC2M,IAEHF;AAGP;AAAA,IAAA,KAAA;IAAA;IAAA;IAAA;IAAA;CAAA;AC1BO,SAASc,GAAS9Q,CAAAA;IAMtB,IALDgQ,IAAQhQ,EAARgQ,QAAAA,EACAxT,IAAoBwD,EAApBxD,oBAAAA,EACA+K,IAAOvH,EAAPuH,OAAAA,EACA0I,IAAajQ,EAAbiQ,aAAAA,EACGC,IAAKC,EAAAnQ,GAAAoQ,KAEFC,IAAS,IAAIC,iBACfC,IAAY,CAAE;IAElB,IADe,QAAXhJ,KAAAA,CAAiBgJ,EAAU/I,QAAAA,GAAWD,CAAAA,GACd,QAAxB/K,GAA8B;QAAA,IAAAuU;QAChC,IAAwB,SAAA,CAAxBA,IAAIvU,CAAAA,KAAAA,KAAoB,MAAAuU,KAApBA,EAAsBtO,UAAAA,CAAW,MAAM;YACzC,IAAMuO,IACc,oBAAXC,OACHA,OAAOC,SAASC,kCAChBtX,QAAQC,GAAAA,CAAIF,cAAAA;YAClB4C,IAAoB,GAAAlD,MAAAA,CAAM0X,GAAI1X,MAAAA,CAAGkD;QACnC;QACA+T,EAAUC,uBAAAA,GAA0BhU;IACtC;IAIA,IAAK,IAAMiF,KAFX8O,IAASzN,EAAAA,EAAAA,CAAAA,GAAQmN,IAAkBM,GAENF,EAAOI,MAAAA,CAAOhP,GAAK8O,CAAAA,CAAU9O,EAAAA;IAE1D,IAAM2P,IAAO9X,GAAAA,MAAAA,CAAMqB,GAAOG,OAAAA,EAAOxB,KAAAA,MAAAA,CAAI+E,GAAOd,KAAAA,EAAKjE,MAAAA,CAC/C+W,IAAM/W,IAAAA,MAAAA,CAAO+W,EAAO9M,QAAAA,MAAe;IAErC,6LACEmN,UAAAA,CAAAC,aAAAA,CAAA,KAAAC,EAAA;QAAGC,MAAMO;IAAAA,GAAalB,IACnBF;AAGP;AAAA,IAAA,KAAA;IAAA;IAAA;CAAA;ACpCO,SAASqB,GAAUrR,CAAAA;IAAgD,IAA7CgQ,IAAQhQ,EAARgQ,QAAAA,EAAUnT,IAAqBmD,EAArBnD,qBAAAA,EAA0BqT,IAAKC,EAAAnQ,GAAAoQ;IACpE,6LACEM,UAAAA,CAAAC,aAAAA,CAAA,KAAAC,EAAA;QACEC,MAAI,GAAAvX,MAAAA,CAAKqB,GAAOG,OAAAA,EAAO,KAAAxB,MAAAA,CAAI+E,GAAOf,MAAAA,EAAMhE,MAAAA,CACtCuD,IAAAA,6BAAqBvD,MAAAA,CACYuD,KAC7B;IAAA,GAEFqT,IAEHF;AAGP;AAAA,IAAA,KAAA;IAAA;IAAA;CAAA;ACbO,SAASsB,GAAatR,CAAAA;IAAkC,IAA/BgQ,IAAQhQ,EAARgQ,QAAAA,EAAUvI,IAAOzH,EAAPyH,OAAAA,EAAYyI,IAAKC,EAAAnQ,GAAAoQ;IACzD,OACEM,gMAAAA,CAAAC,aAAAA,CAAA,KAAAC,EAAA;QACEC,MAAI,GAAAvX,MAAAA,CAAKqB,GAAOG,OAAAA,EAAO,KAAAxB,MAAAA,CAAI+E,GAAOI,SAAAA,EAASnF,MAAAA,CACzCmO,IAAAA,aAAOnO,MAAAA,CAAgBmO,KAAY;IAAA,GAEjCyI,IAEHF;AAGP;AAAA,ICCauB,KAA8B;IAAA,IAAAvR,IAAAC,EAAAC,IAAAC,IAAAA,CAAG,SAAAC,EAAOpB,CAAAA,EAAKqB,CAAAA;QAAG,IAAAmR,GAAAzL,GAAA0L,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;QAAA,OAAAtS,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBACxC,OAAfoa,IAAW,MAAI/Q,EAAArJ,IAAAA,GAAA,GAEC2I,GAAef,GAAKqB;gBAAI,KAAA;oBACM,OADvCI,EAAAzI,IAAAA,CACLiL,iBAAAA,CAAkB,2BAA0BxC,EAAArJ,IAAAA,GAAA,GAE3Bqb,MAAKnZ,GAAAA,MAAAA,CAAIqB,GAAO+B,SAAAA,EAA0B,kBAAA;wBAC/DgW,QAAQ;wBACR7D,SAAS;4BACP,gBAAgB;wBAAA;wBAElBlX,MAAM,IAAI2Y,gBAAgB;4BACxBqC,YAAY;4BACZC,WAAWjY,GAAOgC,QAAAA,IAAY;4BAC9BkW,eAAelY,GAAOiC,YAAAA,IAAgB;4BACtCE,UAAUnC,GAAO+B,SAAAA,GAAY;wBAAA;oBAAA;gBAE/B,KAAA;oBAXY,OAARqJ,IAAQtF,EAAAzI,IAAAA,EAAAyI,EAAArJ,IAAAA,GAAA,IAYI2O,EAAS+M,IAAAA;gBAAM,KAAA;oBAsBD,OAtBhCtB,IAAQ/Q,EAAAzI,IAAAA,CAA2ByW,YAAAA,EAE7BgD,IAAM,4LAAIsB,gBAAAA,CAAc;wBAC5BC,UAAUrY,GAAO+B,SAAAA;wBACjB1B,aAAawW;wBACb3C,SAAS;4BAAEoE,QAAQ;wBAAA;oBAAA,IAGfvB,IAAW,qMAAIwB,WAAAA,CAASzB,IACxBE,IAAW,qMAAIwB,WAAAA,CAAS1B,IACxBG,IAAiB,2MAAIwB,iBAAAA,CAAe3B,IACpCI,IAAmB,IAAIwB,4NAAAA,CAAiB5B,IACxCK,IAAmB,6MAAIwB,mBAAAA,CAAiB7B,IACxCM,IAAkB,4MAAIwB,kBAAAA,CAAgB9B,IACtCO,IAAkB,4MAAIwB,kBAAAA,CAAgB/B,IACtCQ,IAAiB,2MAAIwB,iBAAAA,CAAehC,IACpCS,IAAW,qMAAIwB,WAAAA,CAASjC,IACxBU,IAAc,uMAAIwB,eAAAA,CAAYlC,IAC9BW,IAAgB,0MAAIwB,gBAAAA,CAAcnC,IAClCY,IAAe,yMAAIwB,eAAAA,CAAapC,IAChCa,IAAkB,4MAAIwB,kBAAAA,CAAgBrC,IACtCc,IAAe,wMAAIwB,gBAAAA,CAAatC,IAChCe,IAAU,IAAIwB,0MAAAA,CAAQvC,IAAIhR,EAAAG,MAAAA,CAEzB,UAAA;wBACL8Q,UAAAA;wBACAC,UAAAA;wBACAC,gBAAAA;wBACAC,kBAAAA;wBACAC,kBAAAA;wBACAC,iBAAAA;wBACAC,iBAAAA;wBACAC,gBAAAA;wBACAC,UAAAA;wBACAC,aAAAA;wBACAC,eAAAA;wBACAC,cAAAA;wBACAC,iBAAAA;wBACAC,cAAAA;wBACAC,SAAAA;oBAAAA;gBACD,KAAA;gBAAA,KAAA;oBAAA,OAAA/R,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ;IAAAA;IACF,OAAA,SA3D0Ca,CAAAA,EAAAC,CAAAA;QAAA,OAAAlB,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;IAAA;AAAA,CAAA;AC1BnB,SAAAge,GAAcC,CAAAA;IACpC,OAAA,CAAA,CAAK,mBAAmB9V,IAAAA,CAAK8V;AAI/B;ACLM,SAAUC,GAAWtF,CAAAA;IAMzB,OAAA,CAAA,CAAA,CAJ6B,eAA3BA,EAAQvN,GAAAA,CAAI,cACiB,eAA7BuN,EAAQvN,GAAAA,CAAI,gBACa,eAAzBuN,EAAQvN,GAAAA,CAAI,QAAA;AAGhB;ACHO,IAAM8S,KAAa,SAAOpV,CAAAA;IAAkC,OAAAvI,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAC7D,OAAAuI,IAEF;wBAAA;wBAAO,IAAI+P,QAAQ/P,EAAI6P,OAAAA;qBAAAA,GAFlB;wBAAA;wBAAA;qBAAA;gBAAA,KAAA;oBAMiB,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA,EAAMwF,OAAO;;qBAAA;gBAAA,KAAA;oBACnB,OAAM;wBAAA;wBAAA,CADZxF,GAAYlK,EAA4B3M,IAAAA,GAAjC6W,OAAAA;qBAAAA;gBAAAA,KAAAA;oBAEf,OAAA;wBAAA;wBADclK,EAAe3M,IAAAA;qBAAAA;gBAAAA,KAAAA;oBAG7B,MAAA,EAAA,IAAA,IAAM,IAAIoO,MACR;gBAAA,KAAA;oBAAA,OAAA;wBAAA;qBAAA;YAAA;QAAA;IAAA;AAIP,GCZYzH,KAAM;IAAA,IAAAqB,IAAAC,EAAAC,IAAAC,IAAAA,CAAG,SAAAC;QAAA,OAAAF,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;YAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;gBAAA,KAAA;oBAAA,OAAAqJ,EAAAG,MAAAA,CAAAA,uMACbmN,gBAAAA,CAAa+E,IAAAA,CAAK;wBACvBhY,SAASH,GAAOG,OAAAA;wBAChByB,aAAa5B,GAAOgD,aAAAA,CAAcpB,WAAAA;wBAClCC,sBAAsB7B,GAAO6B,oBAAAA;wBAC7BE,WAAW/B,GAAO+B,SAAAA;wBAClBC,UAAUhC,GAAOgC,QAAAA;wBACjBC,eAAc0X,2PAAAA,EAAqB3Z,GAAOiC,YAAAA,IACtC,kBACA;wBACJC,uBAAuBlC,GAAOkC,qBAAAA;wBAC9BC,UAAUnC,GAAOmC,QAAAA;wBACjBE,cAAcrC,GAAOqC,YAAAA;wBACrBc,mBAAmBnD,GAAOgD,aAAAA,CAAcG,iBAAAA;oBAAAA;gBACxC,KAAA;gBAAA,KAAA;oBAAA,OAAA2C,EAAAO,IAAAA;YAAAA;QAAA,GAAAZ;IAAAA;IACH,OAAA;QAfkB,OAAAJ,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;IAAA;AAAA,CAAA,ICNEse,KAAY;IAsB/B,OAAAC,EANA,SAAAD;QACE,IADYE,EAAAA,IAAAA,EAAAF,IAfdG,EAAAle,IAAAA,EAAA,gBACe,CAAA,IACfke,EAAAA,IAAAA,EAAAA,eACc,OACdA,EAAAle,IAAAA,EAAA,OAAA,KAAA,IAEAke,EAAAle,IAAAA,EAAA,kBAAA,KAAA,IAEAke,EAAAle,IAAAA,EAAA,OAAA,KAAA,IAEAke,EAAAle,IAAAA,EAAA,OAAA,KAAA,IAEAke,EAAAle,IAAAA,EAAA,gBAAA,KAAA,IAIMA,IAAAA,CAAKme,WAAAA,IAAeJ,GACtB,MAAM,IAAInO,MAAM;IAEpB,GAEA;QAAA;YAAA3E,KAAA;YAAAvK,OAKA,SAASuC,CAAAA;gBACP,MAAM,IAAI2M,MAAM;YAClB;QAAA;QAEA;YAAA3E,KAAA;YAAAvK,OAMA,SAAK0d,CAAAA,EAAMC,CAAAA;gBACT,MAAM,IAAIzO,MAAM;YAClB;QAAA;QAAC;YAAA3E,KAAA;YAAAvK,OAED;gBACE,MAAM,IAAIkP,MAAM;YAClB;QAAA;QAEA;YAAA3E,KAAA;YAAAvK,OAIA;gBACE,MAAM,IAAIkP,MAAM;YAClB;QAAA;QAEA;YAAA3E,KAAA;YAAAvK,OAKA,SAAeuK,CAAAA;gBACb,MAAM,IAAI2E,MAAM;YAClB;QAAA;QAAC;YAAA3E,KAAA;YAAAvK,OAED;gBACE,MAAM,IAAIkP,MAAM;YAClB;QAAA;KAAA;AAAC,CAhE8B,ICKZ0O,KAAAA;IAOnB,SAAAA,EAAY9V,CAAAA,EAAKqB,CAAAA,EAAKiN,CAAAA;QAAS,IAAAyH,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAxI;QA2BW,OA3BX2H,EAAAA,IAAAA,EAAAK,IAAAA,CAC7BhI,IAAAyI,EAAA/e,IAAAA,EAAAse,EAAAA,EACKU,YAAAA,GAAY1S,EAAAA,EAAA,CAAA,GACZnI,GAAOgD,aAAAA,GAAa,CAAA,GAAA;YACvB8X,WAAW;YACX3Y,UAAAA,CAAUwQ,QAAAA,KAAAA,SAAAA,CAAOyH,IAAPzH,EAAS3S,MAAAA,KAAAA,KAAM,MAAAoa,IAAAA,KAAA,IAAfA,EAAiBjY,QAAAA,KAAYnC,GAAOgD,aAAAA,CAAcb,QAAAA;YAC5Dc,YAAAA,CAAY0P,QAAAA,KAAAA,SAAAA,CAAO0H,IAAP1H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAqa,IAAAA,KAAA,IAAfA,EAAiBtY,SAAAA,KAAa/B,GAAOgD,aAAAA,CAAcC,UAAAA;YAC/DC,UAAAA,CAAUyP,QAAAA,KAAAA,SAAAA,CAAO2H,IAAP3H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAsa,IAAAA,KAAA,IAAfA,EAAiBpX,QAAAA,KAAYlD,GAAOgD,aAAAA,CAAcE,QAAAA;YAC5DjB,cAAAA,CACE0Q,QAAAA,KAAAA,SAAAA,CAAO4H,IAAP5H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAua,IAAAA,KAAA,IAAfA,EAAiBtY,YAAAA,KAAgBjC,GAAOgD,aAAAA,CAAcf,YAAAA;YACxDkB,mBAAAA,CACEwP,QAAAA,KAAAA,SAAAA,CAAO6H,IAAP7H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAwa,IAAAA,KAAA,IAAfA,EAAiBO,qBAAAA,KACjB/a,GAAOgD,aAAAA,CAAcG,iBAAAA;YACvBvB,aAAa+Q,QAAAA,KAAAA,SAAAA,CAAO8H,IAAP9H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAya,KAAfA,EAAiBO,OAAAA,GAAAA,GAAOrc,MAAAA,CAC9BgU,QAAAA,KAAAA,SAAAA,CAAO+H,IAAP/H,EAAS3S,MAAAA,KAAAA,KAAM,MAAA0a,IAAAA,KAAA,IAAfA,EAAiBM,OAAAA,EAAOrc,MAAAA,CAAGqB,GAAOG,OAAAA,EAAAA,qBACrCH,GAAOgD,aAAAA,CAAcpB,WAAAA;YACzBoZ,SAAShb,GAAO4B,WAAAA,IAAe+Q,EAAQ3S,MAAAA,CAAOgb,OAAAA;YAC9C3X,OAAAA,CAAOsP,QAAAA,KAAegI,SAAAA,CAARA,IAAPhI,EAAS3S,MAAAA,KAAAA,KAAAA,MAAM2a,IAAAA,KAAAA,IAAfA,EAAiBtX,KAAAA,KAASrD,GAAOgD,aAAAA,CAAcK,KAAAA;QAAAA,IAExD8O,EAAK7H,WAAAA,mPAAcC,EACjBvK,GAAOsD,SAAAA,EACP6O,EAAK0I,YAAAA,GAEP1I,EAAKrT,GAAAA,GAAM,IAAI4U,IAAIrP,EAAIvF,GAAAA,GAEvBqT,EAAK9N,GAAAA,GAAMA,GACX8N,EAAK8I,YAAAA,GAAe5W,EAAI0O,OAAAA,CAAQkI,YAAAA,EAChC9I,EAAK+I,eAAAA,GAAkBvI,QAAAA,IAAAA,KAAO,IAAPA,EAASwI,OAAAA,EAAQhJ;IAC1C;IAAC,OAAAiJ,EAAAjB,GAnC0CP,KAmC1CC,EAAAM,GAAA;QAAA;YAAArT,KAAA;YAAAvK,OAAAA,CAAA8e,IAAA/V,EAAAC,IAAAC,IAAAA,CAED,SAAAC;gBAAA,OAAAF,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;oBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;wBAAA,KAAA;4BAC+C,OAD/CqJ,EAAAM,EAAAA,GACwBF,IAAuBJ,EAAArJ,IAAAA,GAAA,6LAAOuJ;wBAAS,KAAA;4BAAAF,EAAAuF,EAAAA,GAAAvF,EAAAzI,IAAAA,EAA7DxB,IAAAA,CAAKuJ,cAAAA,GAAAA,CAAcU,GAAAA,EAAAM,EAAAA,EAAAN,EAAAuF,EAAAA;wBAAA,KAAA;wBAAA,KAAA;4BAAA,OAAAvF,EAAAO,IAAAA;oBAAAA;gBAAA,GAAAZ,GAAA5J,IAAAA;YAAAA,KACpB;gBAFgB,OAAAwf,EAAAzf,KAAAA,CAAAC,IAAAA,EAAAP;YAAA,CAAA;QAAA;QAIjB;YAAAwL,KAAA;YAAAvK,OAKA,SAASuC,CAAAA;gBACP,qMAAOsU,eAAAA,CAAahJ,QAAAA,CAAStL;YAC/B;QAAA;QAEA;YAAAgI,KAAA;YAAAvK,OAIA;gBACE,OAAOV,IAAAA,CAAKiD;YACd;QAAA;QAEA;YAAAgI,KAAA;YAAAvK,OAMA,SAAK0d,CAAAA;gBAAgC,IAA1BC,IAAM5e,UAAAC,MAAAA,GAAAD,KAAAA,KAAAyM,MAAAzM,SAAAA,CAAAyM,EAAAA,GAAAzM,SAAAA,CAAG,EAAA,GAAA;oBAAE4e,QAAQ;gBAAA;gBAC5B,qMAAO9G,eAAAA,CAAa+E,IAAAA,CAAK8B,GAAMC;YACjC;QAAA;QAAC;YAAApT,KAAA;YAAAvK,OAED;gBACE,OAAO+e,SAAShU;YAClB;QAAA;QAEA;YAAAR,KAAA;YAAAvK,OAKA,SAAeuK,CAAAA;gBACb,OAAOjL,IAAAA,CAAKwI,GAAAA,CAAI0O,OAAAA,CAAQkI,YAAAA,CAAatU,GAAAA,CAAIG;YAC3C;QAAA;QAAC;YAAAA,KAAA;YAAAvK,OAED,SAAQ+K,CAAAA;gBACFzL,IAAAA,CAAKqf,eAAAA,IACPrf,IAAAA,CAAKqf,eAAAA,CAAgB5T;YAEzB;QAAA;KAAA;;IAlDC,IAAA+T;AAkDA,KCnFkBE,KAAAA;IAOnB,SAAAA,EAAYlX,CAAAA,EAAKqB,CAAAA,EAAKiN,CAAAA;QAAS,IAAAyH,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAvI;QA6B4B,OA7B5B2H,EAAAA,IAAAA,EAAAyB,IAC7BpJ,IAAAyI,EAAA/e,IAAAA,EAAA0f,IACYlX,EAAIvF,GAAAA,CAAIsD,KAAAA,CAAM,KACtBnE,GAAAA,IACJkU,EAAK0I,YAAAA,GAAY1S,EAAAA,EAAA,CAAA,GACZnI,GAAOgD,aAAAA,GAAa,CAAA,GAAA;YACvB8X,WAAW;YACX3Y,UAAAA,CAAUwQ,QAAAA,KAAAA,SAAAA,CAAOyH,IAAPzH,EAAS3S,MAAAA,KAAAA,KAAM,MAAAoa,IAAAA,KAAA,IAAfA,EAAiBjY,QAAAA,KAAYnC,GAAOgD,aAAAA,CAAcb,QAAAA;YAC5Dc,YAAAA,CAAY0P,QAAAA,KAAAA,SAAAA,CAAO0H,IAAP1H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAqa,IAAAA,KAAA,IAAfA,EAAiBtY,SAAAA,KAAa/B,GAAOgD,aAAAA,CAAcC,UAAAA;YAC/DC,UAAAA,CAAUyP,QAAAA,KAAAA,SAAAA,CAAO2H,IAAP3H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAsa,IAAAA,KAAA,IAAfA,EAAiBpX,QAAAA,KAAYlD,GAAOgD,aAAAA,CAAcE,QAAAA;YAC5DjB,cAAAA,CACE0Q,QAAAA,KAAAA,SAAAA,CAAO4H,IAAP5H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAua,IAAAA,KAAA,IAAfA,EAAiBtY,YAAAA,KAAgBjC,GAAOgD,aAAAA,CAAcf,YAAAA;YACxDkB,mBAAAA,CACEwP,QAAAA,KAAAA,SAAAA,CAAO6H,IAAP7H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAwa,IAAAA,KAAA,IAAfA,EAAiBO,qBAAAA,KACjB/a,GAAOgD,aAAAA,CAAcG,iBAAAA;YACvBvB,aAAa+Q,QAAAA,KAAAA,SAAAA,CAAO8H,IAAP9H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAya,KAAfA,EAAiBO,OAAAA,GAAAA,GAAOrc,MAAAA,CAC9BgU,QAAAA,KAAAA,SAAAA,CAAO+H,IAAP/H,EAAS3S,MAAAA,KAAAA,KAAM,MAAA0a,IAAAA,KAAA,IAAfA,EAAiBM,OAAAA,EAAOrc,MAAAA,CAAGqB,GAAOG,OAAAA,EAAAA,qBACrCH,GAAOgD,aAAAA,CAAcpB,WAAAA;YACzBoZ,SAAShb,GAAO4B,WAAAA,IAAe+Q,EAAQ3S,MAAAA,CAAOgb,OAAAA;QAAAA,IAEhD7I,EAAK7H,WAAAA,mPAAcC,EACjBvK,GAAOsD,SAAAA,EACP6O,EAAK0I,YAAAA,GAGP1I,EAAKrT,GAAAA,GAAM,IAAI4U,IAAIvB,EAAK0I,YAAAA,CAAaG,OAAAA,GAAU3W,EAAIvF,GAAAA,GACnDqT,EAAKzM,GAAAA,GAAMA,GACXyM,EAAK9N,GAAAA,GAAMA,GACX8N,EAAK8I,YAAAA,GAAe9I,EAAKrT,GAAAA,CAAImc,YAAAA,EAC7B9I,EAAK/M,cAAAA,GAAiBe,GAAyB9B,GAAKqB,IAAKyM;IAC3D;IAEA,OAAAiJ,EAAAG,GAvC6C3B,KAuC7CC,EAAA0B,GAAA;QAAA;YAAAzU,KAAA;YAAAvK,OAKA,SAASuC,CAAAA;gBACP,OAAOjD,IAAAA,CAAK6J,GAAAA,CAAI0E,QAAAA,CAAStL;YAC3B;QAAA;QAAC;YAAAgI,KAAA;YAAAvK,OAED;gBACE,OAAOV,IAAAA,CAAKiD;YACd;QAAA;QACA;YAAAgI,KAAA;YAAAvK,OAMA,SAAK0d,CAAAA;gBAAgC,IAA1BC,IAAM5e,UAAAC,MAAAA,GAAAD,KAAAA,KAAAyM,MAAAzM,SAAAA,CAAAyM,EAAAA,GAAAzM,SAAAA,CAAG,EAAA,GAAA;oBAAE4e,QAAQ;gBAAA;gBAC5B,OAAOre,IAAAA,CAAK6J,GAAAA,CAAIwU,MAAAA,CAAOA,EAAOA,MAAAA,EAAQ/B,IAAAA,CAAK8B;YAC7C;QAAA;QAEA;YAAAnT,KAAA;YAAAvK,OAKA,SAAeuK,CAAAA;gBACb,OAAOjL,IAAAA,CAAKiD,GAAAA,CAAImc,YAAAA,CAAatU,GAAAA,CAAIG;YACnC;QAAA;KAAA;AAAC,KC9DG0U,KAAQzB,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EACXrW,CAAAA,GAAAA,GAAOI,SAAAA,ECTe,SAAO2X,CAAAA;IAAY,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAS1C,IARMiR,IAAW0O,EAAaC,cAAAA,CAAe,aACvC/I,IAAU;wBACd5F,UAAUA,QAAAA,IAAAA,IAAAA,KAAYhF;wBACtB4T,eAAAA,CAAe;oBAAA,GAGXpC,IAAckC,EAAaR,YAAAA,CAAatU,GAAAA,CAAI,UAEjC;wBACf,IAAA,CAAK2S,GAAcC,IACjB,MAAM,IAAI9N,MAAM;wBAGlBgQ,EAAarW,cAAAA,CAAeoC,cAAAA,CAAe,SAAS+R;oBAAAA;oBAGtC,OAAA;wBAAA;wBAAMkC,EAAanR,WAAAA,CAAYxG,SAAAA,CAC7C2X,EAAarW,cAAAA,EACbuN;qBAAAA;gBAAAA,KAAAA;oBAGF,OALM8D,IAAUzM,EAGf3M,IAAAA,IAEM;wBAAA;wBAAAoe,EAAarR,QAAAA,CAASqM,EAAQ7N,QAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AACtC,IDbElF,GAAOb,QAAAA,EERc,SAAO4Y,CAAAA;IAA0B,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBACvC,KAAA;oBAAA,OAAA;wBAAA;wBAAM2d,GAAWgC,EAAapX,GAAAA;qBAAAA;gBAAAA,KAAAA;oBAC9C,OAAImV,GADYxP,EAAkC3M,IAAAA,MAEhD;wBAAA;wBAAO;qBAAA,GAGa;wBAAA;wBAAAoe,EAAanR,WAAAA,CAAYzH,QAAAA,CAC7C4Y,EAAarW,cAAAA,EACb;4BACEkQ,eAAeta,OAAO4gB,WAAAA,CAAYH,EAAaR,YAAAA;wBAAAA;qBAAAA;gBAAAA,KAAAA;oBAiBnD,IApBMxE,IAAUzM,EAKf3M,IAAAA,IAAAA,CAEKwE,IAAuB4Z,EAAaC,cAAAA,CACxC,0BAAA,KAIAD,EAAarW,cAAAA,CAAeoC,cAAAA,CAC1B,2BACA3F,IAIE0X,IAAckC,EAAaR,YAAAA,CAAatU,GAAAA,CAAI,UAEjC;wBACf,IAAA,CAAK2S,GAAcC,IACjB,MAAM,IAAI9N,MAAM;wBAGlBgQ,EAAarW,cAAAA,CAAeoC,cAAAA,CAAe,SAAS+R;oBAAAA;oBAGtD,OAAO;wBAAA;wBAAAkC,EAAarR,QAAAA,CAASqM,EAAQ7N,QAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AACtC,IF1BElF,GAAOQ,KAAAA,EGAW,SAAOuX,CAAAA;IAA0B,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAEzB,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAM+E,GAAe4a,EAAapX,GAAAA;qBAAAA;gBAAAA,KAAAA;oBACtC,OADjBwX,IAAqBC,EAAsCze,IAAAA,IAC1C;wBAAA;wBAAM4D,GAAWwa,EAAapX,GAAAA;qBAAAA;gBAAAA,KAAAA;oBAEnD,OAFI0X,IAAiBD,EAAkCze,IAAAA,IAElDwe,KAAuBE,IAYZ;wBAAA;wBAAM3W,GAAeqW,EAAapX,GAAAA;qBAAAA,GAAAA,CAX5CrE,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,2DAEP;wBAAA;wBAAA2R,EAAatD,IAAAA,CAClB;4BACErM,SAAS;wBAAA,GAEX;4BAAEoO,QAAQ;wBAAA;qBAAA;gBAAA,KAAA;oBAAA,IAIRnJ,IAAU+K,EAAsCze,IAAAA,IAAAA,CAElD8L,GAAe0S,MAAAA,CAAuB1S,GAAe4S,IAArD,OAAoE;wBAAA;wBAAA;qBAAA;oBAClE/b,GAAOC,WAAAA,IACTsH,QAAQuC,GAAAA,CAAI,2DAAA,EAAA,KAAA,GAAA;gBAAA,KAAA;oBAGY,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAMQ,GAAY8H,aAAAA,CAAcrB;qBAAAA;gBAAAA,KAAAA;oBAAAA,OAAlD6C,IAAkBkI,EAAwCze,IAAAA,IAChEwe,IAAqBjI,EAAgBE,YAAAA,EACrCiI,IAAiBnI,EAAgBG,QAAAA,EAAAA;wBAAAA;wBAAAA;qBAAAA;gBAAAA,KAAAA;oBAKjC,OAAA,IAAA,EAAA,IAAA,IAHI/T,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,mDAEhB;wBAAA;wBAAOmU,EAAatD,IAAAA,CAClB;4BAAErM,SAAS;4BAAkBxE,OAAK4C;wBAAAA,GAClC;4BAAEgQ,QAAQ;wBAAA;qBAAA;gBAAA,KAAA;oBAKZ7Z,IAAuC,MACvCC,IAA+B;oBAEnC,IAAA;wBACED,oLAAcgJ,aAAAA,EAA6BwS;oBAAAA,EAC3C,OAAOvU,GAAAA;wBAMP,OALItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CACN,4DAGJ;4BAAA;4BAAOmU,EAAatD,IAAAA,CAClB;gCAAErM,SAAS;gCAA8BxE,OAAKA;4BAAAA,GAC9C;gCAAE4S,QAAQ;4BAAA;yBAAA;oBAAA;oBAId,IAAA;wBACE5Z,iMAAU+I,EAAyB0S;oBAAAA,EACnC,OAAOzU,GAAAA;wBAIP,OAHItH,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,wDAEhB;4BAAA;4BAAOmU,EAAatD,IAAAA,CAClB;gCAAErM,SAAS;gCAA0BxE,OAAKA;4BAAAA,GAC1C;gCAAE4S,QAAQ;4BAAA;yBAAA;oBAAA;oBAId,OAAK7Z,KAAgBC,IAAAA,CAOfI,IAAcL,EAAYK,WAAAA,EAE1BD,IAAeJ,EAAYwM,QAAAA,EAC3B5B,IAAe5K,EAAY2b,aAAAA,EAC3Bpb,IAAoBN,EAAQ2b,SAAAA,EAC5BnP,IAAUzM,EAAY0M,QAAAA,EACtBmP,IAAgB7b,EAAYkM,uBAAAA,EAC5B2E,IAAW5Q,EAAQ6b,aAAAA,EAEpB9b,EAAYK,WAAAA,IAAgBJ,EAAQ2b,SAAAA,GAOlC;wBAAA;wBAAAR,EAAatD,IAAAA,CAAK;4BACvB9X,aAAWA;4BACXwb,oBAAkBA;4BAClBO,gBAAgBP;4BAChBvb,SAAOA;4BACP+b,YAAYN;4BACZA,gBAAcA;4BACdpb,MAAMwN,GAAmB7N,GAASD;4BAClCK,aAAa;gCACXA,aAAWA;gCACXkM,SAASnM;4BAAAA;4BAEX6b,cAAAA,CAAc;4BACdxQ,SAAS;4BACTrL,cAAc;gCACZmM,SAASnM;gCACTqM,SAAOA;gCACPE,YAAY;oCACVC,MAAgC,SAAA,CAA1BjD,IAAAkS,QAAAA,IAAAA,KAAAA,IAAAA,EAAeK,WAAAA,KAAAA,KAAW,MAAAvS,IAAAA,KAAA,IAAAA,EAAElM,CAAAA;oCAClCoP,UAAwC,SAAA,CAA9BxD,IAAAwS,QAAAA,IAAAA,KAAAA,IAAAA,EAAeM,eAAAA,KAAAA,KAAe,MAAA9S,IAAAA,KAAA,IAAAA,EAAE5L,CAAAA;oCAC1CqP,UAAwC,SAAA,CAA9BvD,IAAAsS,QAAAA,IAAAA,KAAAA,IAAAA,EAAeO,eAAAA,KAAAA,KAAe,MAAA7S,IAAAA,KAAA,IAAAA,EAAE9L,CAAAA;oCAC1CsP,cAAgD,SAAA,CAAlC4D,IAAAkL,QAAAA,IAAAA,KAAAA,IAAAA,EAAeQ,mBAAAA,KAAAA,KAAmB,MAAA1L,IAAAA,KAAA,IAAAA,EAAElT,CAAAA;oCAClDuP,gBAAoD,SAAA,CAApCsP,IAAAT,QAAAA,IAAAA,KAAAA,IAAAA,EAAeU,qBAAAA,KAAAA,KAAqB,MAAAD,IAAAA,KAAA,IAAAA,EAAE7e,CAAAA;oCACtDwP,kBAAwD,SAAA,CAAtCuP,IAAAX,QAAAA,IAAAA,KAAAA,IAAAA,EAAeY,uBAAAA,KAAAA,KAAuB,MAAAD,IAAAA,KAAA,IAAAA,EAAE/e,CAAAA;gCAAAA;4BAAAA;4BAG9DmN,cAAYA;4BACZrK,mBAAmB;gCACjByQ,UAAUzQ;gCACV0Q,MAAMJ,QAAAA,IAAAA,KAAA,IAAAA,EAAUxJ,GAAAA,CAAI,SAAC6J,CAAAA;oCAAQ,OAAC;wCAC5B5G,MAAM4G,QAAAA,IAAAA,KAAA,IAAAA,EAAKnD,EAAAA;wCACXxG,MAAM2J,QAAAA,IAAAA,KAAA,IAAAA,EAAK3J,IAAAA;oCAAAA;gCAAAA;4BAAAA;wBAAAA;qBAAAA,GArCf;wBAAA;wBAAO6T,EAAatD,IAAAA,CAClB;4BAAErM,SAAS;wBAAA,GACX;4BAAEoO,QAAQ;wBAAA;qBAAA,IAlBL;wBAAA;wBAAAuB,EAAatD,IAAAA,CAClB;4BAAErM,SAAS;4BAAkBxE,OAAO;wBAAA,GACpC;4BAAE4S,QAAQ;wBAAA;qBAAA;gBAAA,KAAA;oBA4Dd,OAAA,IAAA,EAAA,IAAA,IAJIla,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,0BAA0ByV,IAGnC;wBAAA;wBAAAtB,EAAatD,IAAAA,CAClB;4BACErM,SAAS;4BACTxE,OAAKyV;wBAAAA,GAEP;4BAAE7C,QAAQ;wBAAA;qBAAA;gBAAA,KAAA;oBAAA,OAAA;wBAAA;qBAAA;YAAA;QAAA;IAAA;AAGf,IHzIExW,GAAOd,KAAAA,EIVW,SAAO6Y,CAAAA;IAA0B,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBACpC,KAAA;oBAAA,OAAA;wBAAA;wBAAM2d,GAAWgC,EAAapX,GAAAA;qBAAAA;gBAAAA,KAAAA;oBAC9C,IAAImV,GADYxP,EAAkC3M,IAAAA,KAEhD,OAAA;wBAAA;wBAAO;qBAAA;oBAKT,IAFMkc,IAAckC,EAAaR,YAAAA,CAAatU,GAAAA,CAAI,UAEjC;wBACf,IAAA,CAAK2S,GAAcC,IACjB,MAAM,IAAI9N,MAAM;wBAGlBgQ,EAAarW,cAAAA,CAAeoC,cAAAA,CAAe,SAAS+R;oBAAAA;oBAGtC,OAAM;wBAAA;wBAAAkC,EAAanR,WAAAA,CAAY1H,KAAAA,CAC7C6Y,EAAarW,cAAAA,EACb;4BACEkQ,eAAeta,OAAO4gB,WAAAA,CAAYH,EAAaR,YAAAA;wBAAAA;qBAAAA;gBAAAA,KAAAA;oBAenD,OAlBMxE,IAAUzM,EAKf3M,IAAAA,IAAAA,CAEKwE,IAAuB4Z,EAAaC,cAAAA,CACxC,0BAAA,KAIAD,EAAarW,cAAAA,CAAeoC,cAAAA,CAC1B,2BACA3F,IAIG;wBAAA;wBAAA4Z,EAAarR,QAAAA,CAASqM,EAAQ7N,QAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AACtC,IJxBElF,GAAOf,MAAAA,EKXY,SAAO8Y,CAAAA;IAA0B,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBACrC,KAAA;oBAAA,OAAA;wBAAA;wBAAM2d,GAAWgC,EAAapX,GAAAA;qBAAAA;gBAAAA,KAAAA;oBAC9C,OAAImV,GADYxP,EAAkC3M,IAAAA,MAEhD;wBAAA;wBAAO;qBAAA,GAGa;wBAAA;wBAAAoe,EAAanR,WAAAA,CAAY3H,MAAAA,CAC7C8Y,EAAarW,cAAAA;qBAAAA;gBAAAA,KAAAA;oBAaf,OAdMqR,IAAUzM,EAEf3M,IAAAA,IAAAA,CAKG6E,QAAAA,CAHAA,IACFuZ,EAAaC,cAAAA,CAAe,+BAC5B1b,GAAOkC,qBAAAA,IAAAA,KACL,IAAAA,EAAuB4F,UAAAA,CAAW,IAAA,KAAA,CACpC5F,IAAwBlC,GAAO4B,WAAAA,GAAcM,CAAAA,GAE3CA,KACFuU,EAAQwE,YAAAA,CAAa/S,GAAAA,CAAI,YAAYhG,IAGhC;wBAAA;wBAAAuZ,EAAarR,QAAAA,CAASqM,EAAQ7N,QAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AACtC,ILTElF,GAAOM,MAAAA,EAASA,KACDvB,kBMnBM,SAAOgZ,CAAAA;IAA0B,OAAA3f,EAAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;QAAA,IAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA;QAAA,OAAA,EAAA,IAAA,EAAA,SAAA,CAAA;YAAA,OAAA,EAAA,KAAA;gBAAA,KAAA;oBAEpD,OAAM;wBAAA;wBAAA2f,EAAarW,cAAAA,CAAeoB,cAAAA,CACjC;qBAAA;gBAAA,KAAA;oBAGA,OAAA,CALEwW,IACHhT,EAAA3M,IAAAA,EAAAA,IAKK;wBAAA;wBAAAoe,EAAarW,cAAAA,CAAekD,iBAAAA,CAChC;qBAAA,GAF8B;wBAAA;wBAAA;qBAAA;gBAAA,KAAA;oBAChC0B,EAAA3M,IAAAA,IAAAA,EAAAA,KAAAA,GAAAA;gBAAAA,KAAAA;oBAKIwE,IAAuBmb,KAEzBhd,GAAO6B,oBAAAA,EAAAA,EAAAA,KAAAA,GAAAA;gBAAAA,KAAAA;oBAET,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;wBAAA;wBAAA;;wBAAA;qBAAA,GAAA;wBAAA;wBAAM4Z,EAAanR,WAAAA,CAAY2S,mBAAAA,CAC7BxB,EAAarW,cAAAA,EACbqW,EAAayB,MAAAA;qBAAAA;gBAAAA,KAAAA;oBAAAA,OAFflT,EAAA3M,IAAAA,IAAAA;wBAAAA;wBAAAA;qBAAAA;gBAAAA,KAAAA;oBASA,OAAA,IAAA,EAAA,IAAA,IAJI2C,GAAOC,WAAAA,IACTsH,QAAQD,KAAAA,CAAM,YAAY4C,IAGxBA,EAAM4B,OAAAA,CAAQC,QAAAA,CAAS,+BAClB;wBAAA;wBAAA0P,EAAatD,IAAAA,CAClB;4BACE7Q,OACE,+JACA4C,EAAM4B,OAAAA;wBAAAA,GAEV;4BAAEoO,QAAQ;wBAAA;qBAAA,GAId;wBAAA;wBAAOuB,EAAatD,IAAAA,CAAK;4BAAE7Q,OAAO4C,EAAM4B,OAAAA;wBAAAA,GAAW;4BAAEoO,QAAQ;wBAAA;qBAAA;gBAAA,KAAA;oBAyBhD,OArBTiD,IAAgB;wBACpB,IAAA,CAAKnd,GAAO8B,wBAAAA,EACV,OAAO;wBAET,IAAA;4BACE,OAAO,IAAIqD,OAAOnF,GAAO8B,wBAAAA;wBAAAA,EACzB,OAAOwF,GAAAA;4BAEP,MADAC,QAAQD,KAAAA,CAAM,6CAA6CA,IACrD,IAAImE,MACR,6CAAA9M,MAAAA,CAA6C2I,EAAMwE,OAAAA;wBAAAA;oBAGxD,CAZqB,IAchBsR,IAAoB,SAACte,CAAAA;wBACzB,OAAA,CAAKkB,GAAO8B,wBAAAA,IAGLqb,EAAe1Z,IAAAA,CAAK3E;oBAC5B,GAEoB;wBAAA;wBAAA2c,EAAarW,cAAAA,CAAeoB,cAAAA,CAC/C;qBAAA;gBAAA,KAAA;oBAEF,OAHM6W,IAASrT,EAAA3M,IAAAA,IAGT;wBAAA;wBAAAoe,EAAarW,cAAAA,CAAekD,iBAAAA,CAAkB;qBAAA;gBAAA,KAAA;oBAEpD,OAFA0B,EAAA3M,IAAAA,IAEIwE,KAAwBub,EAAkBvb,KAAAA,CACtCyb,IAAMzb,EAAqBiG,UAAAA,CAAW,UAC3C,IAAI4L,IAAI7R,KACR,IAAI6R,IAAI7R,GAAsB4Z,EAAaZ,YAAAA,CAAaG,OAAAA,GACzDqC,KAASC,EAAIrC,YAAAA,CAAa/S,GAAAA,CAAI,SAASmV,IAChC;wBAAA;wBAAA5B,EAAarR,QAAAA,CAASkT,EAAI1U,QAAAA;qBAAAA,IAAAA,CAG7B9J,IAAM,IAAI4U,IAAI+H,EAAaZ,YAAAA,CAAaG,OAAAA,GAC9CqC,KAASve,EAAImc,YAAAA,CAAa/S,GAAAA,CAAI,SAASmV,IAChC;wBAAA;wBAAA5B,EAAarR,QAAAA,CAAStL,EAAI8J,QAAAA;qBAAAA;YAAAA;QAAAA;IAAAA;AAClC,INlDK2U,KAAW,SAACC,CAAAA;IAChB,OAAOhC,EAAAA,CAASgC;AAClB,GAOAC,KAAA,SAAgBlJ,CAAAA,EAASiJ,CAAAA,EAAU7K,CAAAA;IAAY,IAAAyH,GAAAC,GAAAC;IAC7C,IAAA,CAAKta,GAAOgD,aAAAA,CAAcC,UAAAA,EACxB,MAAM,IAAIwI,MACR;IAGJ,IAAA,CAAA,CAAKzL,GAAOgD,aAAAA,CAAcE,QAAAA,IAAayP,QAAAA,KAAe,SAAA,CAARyH,IAAPzH,EAAS3S,MAAAA,KAAAA,KAAM,MAAAoa,KAAfA,EAAiBlX,QAAAA,GACtD,MAAM,IAAIuI,MACR;IAGJ,IAAA,CAAA,CAAKzL,GAAOgD,aAAAA,CAAcf,YAAAA,IAAiB0Q,QAAAA,KAAe,SAAA,CAAR0H,IAAP1H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAqa,KAAfA,EAAiBpY,YAAAA,GAC1D,MAAM,IAAIwJ,MACR;IAGJ,IAAA,CAAA,CAAKzL,GAAOgD,aAAAA,CAAcpB,WAAAA,IAAgB+Q,QAAAA,KAAe,SAAA,CAAR2H,IAAP3H,EAAS3S,MAAAA,KAAAA,KAAM,MAAAsa,KAAfA,EAAiBU,OAAAA,GACzD,MAAM,IAAIvP,MACR;IAIJ,OAAsB,YAAlBrE,EAAOmN,MAA0C,YAAA,OAAZiJ,IAEhCE,GACLnJ,GACA;QAAEmB,QAAQ;YAAEP,WAAWqI;QAAAA;IAAAA,GACvB7K,KAQJ;QAAA,IAAAgL,IAAArY,EAAAC,IAAAC,IAAAA,CAAO,SAAAC,EAAuBpB,CAAAA,EAAKqB,CAAAA;YAAG,OAAAH,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBAAA,OAAAqJ,EAAAG,MAAAA,CAAAA,UAC7B7B,GAAYC,KAEfqZ,GAAiBrZ,GAAKqB,GAAKiN,KAE3BiL,GAAmBvZ,GAAKqB,GAAK6O;oBAAQ,KAAA;oBAAA,KAAA;wBAAA,OAAAzO,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ;QAAAA;QALd,OAM5B,SAN4Ba,CAAAA,EAAAC,CAAAA;YAAA,OAAAoX,EAAA/hB,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAA7B;AAOD,GASKoiB,KAAgB;IAAA,IAAArY,IAAAC,EAAAC,IAAAC,IAAAA,CAAG,SAAAqY,EAAOxZ,CAAAA,EAAKqB,CAAAA,EAAKiN,CAAAA;QAAO,IAAA+C,GAAA8H,GAAAha,GAAAiY;QAAA,OAAAlW,IAAAM,IAAAA,CAAA,SAAAiY,CAAAA;YAAA,OAAA,OAAAA,EAAA/X,IAAAA,GAAA+X,EAAArhB,IAAAA;gBAAA,KAAA;oBACjC,OAANiZ,IAAWhQ,EAAXgQ,MAAAA,EAAMoI,EAAArhB,IAAAA,GAAA,GACQiZ;gBAAM,KAAA;oBAEI,IAF5B8H,IAAQM,EAAAzgB,IAAAA,CAAkB8X,SAAAA,EAC9BqI,IAAW/e,MAAMkK,OAAAA,CAAQ6U,KAAYA,CAAAA,CAAS,EAAA,GAAKA,GAAAA,CAAAA,CAC7Cha,IAAQ+Z,GAASC,EAAAA,GAEd;wBAAAM,EAAArhB,IAAAA,GAAA;wBAAA;oBAAA;oBACoD,OAArDgf,IAAe,IAAItB,GAAgB9V,GAAKqB,GAAKiN,IAAQmL,EAAArhB,IAAAA,GAAA,IACrDgf,EAAasC,WAAAA;gBAAa,KAAA;oBAAA,OAAAD,EAAArhB,IAAAA,GAAA,IACnB+G,EAAMiY;gBAAa,KAAA;oBAAA,OAAAqC,EAAA7X,MAAAA,CAAA6X,UAAAA,EAAAzgB,IAAAA;gBAAA,KAAA;oBAAA,OAAAygB,EAAA7X,MAAAA,CAAA,UAEzB,IAAIqV,SAAS,iCAAiC;wBAAEpB,QAAQ;oBAAA;gBAAM,KAAA;gBAAA,KAAA;oBAAA,OAAA4D,EAAAzX,IAAAA;YAAAA;QAAA,GAAAwX;IAAAA;IAExE,OAAA,SAbqB7R,CAAAA,EAAAgS,CAAAA,EAAAC,CAAAA;QAAA,OAAA5Y,EAAAzJ,KAAAA,CAAAC,IAAAA,EAAAP;IAAA;AAAA,CAAA,IAsBhBsiB,KAAkB;IAAA,IAAAM,IAAA5Y,EAAAC,IAAAC,IAAAA,CAAG,SAAA2Y,EAAO9Z,CAAAA,EAAKqB,CAAAA,EAAK1C,CAAAA;QAAa,IAAAwa,GAAAha;QAAA,OAAA+B,IAAAM,IAAAA,CAAA,SAAAuY,CAAAA;YAAA,OAAA,OAAAA,EAAArY,IAAAA,GAAAqY,EAAA3hB,IAAAA;gBAAA,KAAA;oBAIK,IAFtC+gB,IAClBnZ,EADFga,KAAAA,CAASlJ,SAAAA,EAEXqI,IAAW/e,MAAMkK,OAAAA,CAAQ6U,KAAYA,CAAAA,CAAS,EAAA,GAAKA,GACtC;wBAAAY,EAAA3hB,IAAAA,GAAA;wBAAA;oBAAA;oBAAA,MACLgP,MAAM;gBAAgC,KAAA;oBAEd,IAAA,CAAA,CAA1BjI,IAAQ+Z,GAASC,EAAAA,GACX;wBAAAY,EAAA3hB,IAAAA,GAAA;wBAAA;oBAAA;oBAAA,OAAA2hB,EAAA3hB,IAAAA,GAAA,GAEF+G,EAAM,IAAI+X,GAAkBlX,GAAKqB,GAAK1C;gBAAe,KAAA;oBAAAob,EAAAhY,EAAAA,GAAAgY,EAAA/gB,IAAAA,EAAA+gB,EAAA3hB,IAAAA,GAAA;oBAAA;gBAAA,KAAA;oBAAA2hB,EAAAhY,EAAAA,GAC3DV,EAAIwU,MAAAA,CAAO,KAAKoE,GAAAA;gBAAK,KAAA;oBAAA,OAAAF,EAAAnY,MAAAA,CAAAmY,UAAAA,EAAAhY,EAAAA;gBAAA,KAAA;gBAAA,KAAA;oBAAA,OAAAgY,EAAA/X,IAAAA;YAAAA;QAAA,GAAA8X;IAAAA;IAC1B,OAAA,SAbuBI,CAAAA,EAAAC,CAAAA,EAAAC,CAAAA;QAAA,OAAAP,EAAAtiB,KAAAA,CAAAC,IAAAA,EAAAP;IAAA;AAAA,CAAA,IOpGlBojB,KAAiB,SAAHrZ,CAAAA;IAA0C,IAApCxD,IAAoBwD,EAApBxD,oBAAAA,EAAsB+K,IAAOvH,EAAPuH,OAAAA;IAE9C,IAAI/K,KAAwD,YAAA,OAAzBA,GACjC,MAAM,IAAI7D,UAAU;IAEtB,IAAI4O,KAA8B,YAAA,OAAZA,GACpB,MAAM,IAAI5O,UAAU;IAGtB,IAAM0X,IAAS,IAAIC,iBACfC,IAAY,CAAE,GACZ+I,IAAezf,QAAQC,GAAAA,CAAIF,cAAAA;IACjC,IAAA,CAAK0f,GACH,MAAM,IAAIlT,MAAM;IAIlB,IADe,QAAXmB,KAAAA,CAAiBgJ,EAAU/I,QAAAA,GAAWD,CAAAA,GACd,QAAxB/K,GAA8B;QAAA,IAAAuU;QACR,SAAA,CAAxBA,IAAIvU,CAAAA,KAAAA,KAAoB,MAAAuU,KAApBA,EAAsBtO,UAAAA,CAAW,QAAA,CACnCjG,IAAoB,GAAAlD,MAAAA,CAAMggB,GAAYhgB,MAAAA,CAAGkD,EAAAA;QAE3C,IAAA;YAEE,IAAI6R,IAAI7R;QACT,EAAC,OAAOnF,GAAAA;YACP,MAAM,IAAI+O,MAAK,iCAAA9M,MAAAA,CAAkCkD;QACnD;QACA+T,EAAUC,uBAAAA,GAA0BhU;IACtC;IAEA,IAAK,IAAMiF,KAAO8O,EAAWF,EAAOI,MAAAA,CAAOhP,GAAK8O,CAAAA,CAAU9O,EAAAA;IAE1D,IAAM2P,IAAU,IAAI/C,IAAAA,GAAG/U,MAAAA,CAClBggB,GAAY,cAAAhgB,MAAAA,CAAa+E,GAAOd,KAAAA,EAAKjE,KAAAA,MAAAA,CAAI+W,EAAO9M,QAAAA;IAGrDwB,+LAAAA,EAASqM,EAAQ7N,QAAAA;AACnB,GAcagW,KACX,SAACC,CAAAA;IAAI,IAAE7e,IAAM1E,UAAAC,MAAAA,GAAA,KAAA,KAAAwM,MAAAzM,SAAAA,CAAA,EAAA,GAAAA,SAAAA,CAAA,EAAA,GAAG,CAAE;IAAA,OAAA;QAAA,IAAA4iB,IAAA5Y,EAAAC,IAAAC,IAAAA,CAClB,SAAAC,EAAO8P,CAAAA;YAAK,IAAAuJ,GAAAve,GAAAa,GAAAC,GAAAkR,GAAAV,GAAAkN,GAAAre;YAAA,OAAA6E,IAAAM,IAAAA,CAAA,SAAAC,CAAAA;gBAAA,OAAA,OAAAA,EAAAC,IAAAA,GAAAD,EAAArJ,IAAAA;oBAAA,KAAA;wBACsD,OADtDqiB,IAER5M,MADM3R,IAAeue,EAAfve,eAAAA,EAAiBa,IAAa0d,EAAb1d,aAAAA,EAAeC,IAAcyd,EAAdzd,cAAAA,EAAgBkR,IAAQuM,EAARvM,QAAAA,EAAQzM,EAAArJ,IAAAA,GAAA,GAGvC8D;oBAAiB,KAAA;wBAIzC,IAJeuF,EAAAzI,IAAAA,IAGdqhB,GAAe1e,IAAAA,CAGbA,EAAO6R,KAAAA,EAAK;4BAAA/L,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,GACM8V;oBAAU,KAAA;wBAAA,CAAxBV,IAAK/L,EAAAzI,IAAAA,KACCqhB,GAAe1e,IACrB+e,IAAY,IAAIC,IAAInN,EAAMnK,GAAAA,CAAI,SAACuX,CAAAA;4BAAC,OAAKA,EAAErX;wBAAI,KAC5C5H,EAAO6R,KAAAA,CAAMrJ,IAAAA,CAAK,SAAC0W,CAAAA;4BAAI,OAAKH,EAAU/X,GAAAA,CAAIkY;wBAAK,MAClDR,GAAe1e;oBAChB,KAAA;wBAAA,IAG+B,YAAA,OAAvBA,EAAOU,WAAAA,EAAwB;4BAAAoF,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,IACZ2E,EAAcpB,EAAOU,WAAAA;oBAAY,KAAA;wBAA1CoF,EAAAzI,IAAAA,IAEjBqhB,GAAe1e;oBAChB,KAAA;wBAAA,IAAA,CAGCvB,MAAMkK,OAAAA,CAAQ3I,EAAOU,WAAAA,GAAY;4BAAAoF,EAAArJ,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqJ,EAAArJ,IAAAA,GAAA,IACT4E;oBAAgB,KAAA;wBAApCX,IAAWoF,EAAAzI,IAAAA,EAEd2C,EAAOU,WAAAA,CAAY8H,IAAAA,CAAK,SAACkF,CAAAA;4BAAU,OAClChN,EAAYqL,QAAAA,CAAS2B;wBAAW,MAGlCgR,GAAe1e;oBAChB,KAAA;wBAAA,OAAA8F,EAAAG,MAAAA,CAAAA,UAGI4Y,EAAKtJ;oBAAM,KAAA;oBAAA,KAAA;wBAAA,OAAAzP,EAAAO,IAAAA;gBAAAA;YAAA,GAAAZ;QAAAA;QACnB,OAAA,SAAAa,CAAAA;YAAA,OAAA4X,EAAAtiB,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CAvCiB;AAuCjB,GAWU6jB,KAAa,SAACC,CAAAA,EAASpf,CAAAA;IAAM,OAAA;QAAA,IAAAqf,IAAA/Z,EAAAC,IAAAC,IAAAA,CAAK,SAAAqY,EAAOxZ,CAAAA;YAAG,IAAAib,GAAA/e,GAAAa,GAAAC,GAAAkR,GAAAV,GAAAkN,GAAAre;YAAA,OAAA6E,IAAAM,IAAAA,CAAA,SAAAiY,CAAAA;gBAAA,OAAA,OAAAA,EAAA/X,IAAAA,GAAA+X,EAAArhB,IAAAA;oBAAA,KAAA;wBACS,OADT6iB,IACcpN,MAA7D3R,IAAe+e,EAAf/e,eAAAA,EAAiBa,IAAake,EAAble,aAAAA,EAAeC,IAAcie,EAAdje,cAAAA,EAAgBkR,IAAQ+M,EAAR/M,QAAAA,EAAQuL,EAAA/X,IAAAA,GAAA,GAAA+X,EAAArhB,IAAAA,GAAA,GAErC8D;oBAAiB,KAAA;wBAA1B,IAAAud,EAAAzgB,IAAAA,EAED;4BAAAygB,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAA7X,MAAAA,CAAAA,wMACNmN,eAAAA,CAAa+E,IAAAA,CAAK;4BAAEoH,YAAY;4BAAKzT,SAAS;wBAAA;oBAAiB,KAAA;wBAAA,IAAA,CAGpE9L,EAAO6R,KAAAA,EAAK;4BAAAiM,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAArhB,IAAAA,GAAA,IACM8V;oBAAU,KAAA;wBAAnB,IAALV,IAAKiM,EAAAzgB,IAAAA,EACD;4BAAAygB,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAA7X,MAAAA,CAAAA,wMACDmN,eAAAA,CAAa+E,IAAAA,CAAK;4BAAEoH,YAAY;4BAAKzT,SAAS;wBAAA;oBAAiB,KAAA;wBACrB,IAA7CiT,IAAY,IAAIC,IAAInN,EAAMnK,GAAAA,CAAI,SAACuX,CAAAA;4BAAC,OAAKA,EAAErX;wBAAI,KAC5C5H,EAAO6R,KAAAA,CAAMrJ,IAAAA,CAAK,SAAC0W,CAAAA;4BAAI,OAAKH,EAAU/X,GAAAA,CAAIkY;wBAAAA,IAAM;4BAAApB,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAA7X,MAAAA,CAAAA,UAC5CmN,6MAAAA,CAAa+E,IAAAA,CAAK;4BAAEoH,YAAY;4BAAKzT,SAAS;wBAAA;oBAAiB,KAAA;wBAAA,IAIxC,YAAA,OAAvB9L,EAAOU,WAAAA,EAAwB;4BAAAod,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAArhB,IAAAA,GAAA,IACZ2E,EAAcpB,EAAOU,WAAAA;oBAAY,KAAA;wBAA1C,IAAAod,EAAAzgB,IAAAA,EACD;4BAAAygB,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAA7X,MAAAA,CAAAA,wMACTmN,eAAAA,CAAa+E,IAAAA,CAAK;4BAAEoH,YAAY;4BAAKzT,SAAS;wBAAA;oBAAc,KAAA;wBAAA,IAAA,CAInErN,MAAMkK,OAAAA,CAAQ3I,EAAOU,WAAAA,GAAY;4BAAAod,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAArhB,IAAAA,GAAA,IACT4E;oBAAgB,KAAA;wBAAzB,IAAXX,IAAWod,EAAAzgB,IAAAA,EAEd2C,EAAOU,WAAAA,CAAY8H,IAAAA,CAAK,SAACkF,CAAAA;4BAAU,OAClChN,EAAYqL,QAAAA,CAAS2B;wBAAW,IACjC;4BAAAoQ,EAAArhB,IAAAA,GAAA;4BAAA;wBAAA;wBAAA,OAAAqhB,EAAA7X,MAAAA,CAAAA,wMAEMmN,eAAAA,CAAa+E,IAAAA,CAAK;4BAAEoH,YAAY;4BAAKzT,SAAS;wBAAA;oBAAc,KAAA;wBAAAgS,EAAArhB,IAAAA,GAAA;wBAAA;oBAAA,KAAA;wBAIzB,OAJyBqhB,EAAA/X,IAAAA,GAAA,IAAA+X,EAAA1X,EAAAA,GAAA0X,EAAA,KAAA,CAAA,IAIvEvW,QAAQD,KAAAA,CAAM,yBAAuBwW,EAAA1X,EAAAA,GAAS0X,EAAA7X,MAAAA,CAAA,UACvC;oBAAI,KAAA;wBAAA,OAAA6X,EAAA7X,MAAAA,CAAAA,UAGNmZ,EAAQ/a;oBAAI,KAAA;oBAAA,KAAA;wBAAA,OAAAyZ,EAAAzX,IAAAA;gBAAAA;YAAA,GAAAwX,GAAA,MAAA;gBAAA;oBAAA;oBAAA;iBAAA;aAAA;QAAA;QACpB,OAAA,SAAAtX,CAAAA;YAAA,OAAA8Y,EAAAzjB,KAAAA,CAAAC,IAAAA,EAAAP;QAAA;IAAA,CA1CyC;AA0CzC","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]}}]
}